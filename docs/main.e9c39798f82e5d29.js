var rye=Object.defineProperty,iye=Object.defineProperties,sye=Object.getOwnPropertyDescriptors,Ez=Object.getOwnPropertySymbols,oye=Object.prototype.hasOwnProperty,aye=Object.prototype.propertyIsEnumerable,bz=(wr,g,x)=>g in wr?rye(wr,g,{enumerable:!0,configurable:!0,writable:!0,value:x}):wr[g]=x,Cz=(wr,g)=>{for(var x in g||(g={}))oye.call(g,x)&&bz(wr,x,g[x]);if(Ez)for(var x of Ez(g))aye.call(g,x)&&bz(wr,x,g[x]);return wr},Iz=(wr,g)=>iye(wr,sye(g));(self.webpackChunkmobile_scanning_demo=self.webpackChunkmobile_scanning_demo||[]).push([[179],{896:wr=>{window,wr.exports=function(g){var x={};function l(f){if(x[f])return x[f].exports;var p=x[f]={i:f,l:!1,exports:{}};return g[f].call(p.exports,p,p.exports,l),p.l=!0,p.exports}return l.m=g,l.c=x,l.d=function(f,p,E){l.o(f,p)||Object.defineProperty(f,p,{enumerable:!0,get:E})},l.r=function(f){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},l.t=function(f,p){if(1&p&&(f=l(f)),8&p||4&p&&"object"==typeof f&&f&&f.__esModule)return f;var E=Object.create(null);if(l.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:f}),2&p&&"string"!=typeof f)for(var b in f)l.d(E,b,function(S){return f[S]}.bind(null,b));return E},l.n=function(f){var p=f&&f.__esModule?function(){return f.default}:function(){return f};return l.d(p,"a",p),p},l.o=function(f,p){return Object.prototype.hasOwnProperty.call(f,p)},l.p="/",l(l.s=89)}([function(g,x){g.exports=function(l,f,p){return f in l?Object.defineProperty(l,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):l[f]=p,l},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){function l(f){return g.exports=l=Object.setPrototypeOf?Object.getPrototypeOf:function(p){return p.__proto__||Object.getPrototypeOf(p)},g.exports.default=g.exports,g.exports.__esModule=!0,l(f)}g.exports=l,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){function l(f,p){for(var E=0;E<p.length;E++){var b=p[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}g.exports=function(f,p,E){return p&&l(f.prototype,p),E&&l(f,E),f},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=l(19).default,p=l(1);g.exports=function(E,b){if(b&&("object"===f(b)||"function"==typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return p(E)},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=l(41);g.exports=function(p,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(E&&E.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),E&&f(p,E)},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){g.exports={EPSILON:l(62),create:l(63),clone:l(156),fromValues:l(157),copy:l(158),set:l(159),equals:l(160),exactEquals:l(161),add:l(162),subtract:l(64),sub:l(163),multiply:l(65),mul:l(164),divide:l(66),div:l(165),inverse:l(166),min:l(167),max:l(168),rotate:l(169),floor:l(170),ceil:l(171),round:l(172),scale:l(173),scaleAndAdd:l(174),distance:l(67),dist:l(175),squaredDistance:l(68),sqrDist:l(176),length:l(69),len:l(177),squaredLength:l(70),sqrLen:l(178),negate:l(179),normalize:l(180),dot:l(181),cross:l(182),lerp:l(183),random:l(184),transformMat2:l(185),transformMat2d:l(186),transformMat3:l(187),transformMat4:l(188),forEach:l(189),limit:l(190)}},function(g,x,l){"use strict";x.a={init:function(f,p){for(var E=f.length;E--;)f[E]=p},shuffle:function(f){for(var p=f.length-1;p>=0;p--){var E=Math.floor(Math.random()*p),b=f[p];f[p]=f[E],f[E]=b}return f},toPointList:function(f){var p=f.reduce(function(E,b){var S="[".concat(b.join(","),"]");return E.push(S),E},[]);return"[".concat(p.join(",\r\n"),"]")},threshold:function(f,p,E){return f.reduce(function(b,S){return E.apply(f,[S])>=p&&b.push(S),b},[])},maxIndex:function(f){for(var p=0,E=0;E<f.length;E++)f[E]>f[p]&&(p=E);return p},max:function(f){for(var p=0,E=0;E<f.length;E++)f[E]>p&&(p=f[E]);return p},sum:function(f){for(var p=f.length,E=0;p--;)E+=f[p];return E}}},function(g,x,l){"use strict";l.d(x,"h",function(){return ee}),l.d(x,"i",function(){return ue}),l.d(x,"b",function(){return Ve}),l.d(x,"j",function(){return we}),l.d(x,"e",function(){return Me}),l.d(x,"c",function(){return _e}),l.d(x,"f",function(){return X}),l.d(x,"g",function(){return j}),l.d(x,"a",function(){return oe}),l.d(x,"d",function(){return ge});var f=l(7),p=l(84),E={clone:f.clone,dot:f.dot},b=function(Z,Y){var se=[],z={rad:0,vec:E.clone([0,0])},fe={};function B(G){fe[G.id]=G,se.push(G)}function H(){var G,re=0;for(G=0;G<se.length;G++)re+=se[G].rad;z.rad=re/se.length,z.vec=E.clone([Math.cos(z.rad),Math.sin(z.rad)])}return B(Z),H(),{add:function(G){fe[G.id]||(B(G),H())},fits:function(G){return Math.abs(E.dot(G.point.vec,z.vec))>Y},getPoints:function(){return se},getCenter:function(){return z}}},S=function(Z,Y,se){return{rad:Z[se],point:Z,id:Y}},O=l(8),V={clone:f.clone},L={clone:p.clone};function ee(Z,Y){return{x:Z,y:Y,toVec2:function(){return V.clone([this.x,this.y])},toVec3:function(){return L.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function ie(Z,Y){Y||(Y=8);for(var se=Z.data,z=se.length,fe=8-Y,B=new Int32Array(1<<Y);z--;)B[se[z]>>fe]++;return B}function ue(Z,Y){var se=function(z){var fe,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,H=8-B;function G(Re,Ue){for(var Be=0,Ie=Re;Ie<=Ue;Ie++)Be+=fe[Ie];return Be}function re(Re,Ue){for(var Be=0,Ie=Re;Ie<=Ue;Ie++)Be+=Ie*fe[Ie];return Be}function ne(){var Re,Ue,Be,Ie,Ae=[0],je=(1<<B)-1;fe=ie(z,B);for(var ke=1;ke<je;ke++)0==(Be=(Re=G(0,ke))*(Ue=G(ke+1,je)))&&(Be=1),Ie=re(0,ke)*Ue-re(ke+1,je)*Re,Ae[ke]=Ie*Ie/Be;return O.a.maxIndex(Ae)}return ne()<<H}(Z);return function(z,fe,B){B||(B=z);for(var H=z.data,G=H.length,re=B.data;G--;)re[G]=H[G]<fe?1:0}(Z,se,Y),se}function Ve(Z,Y,se){var z,fe,B,H,G=[];function re(ne){var me=!1;for(fe=0;fe<G.length;fe++)(B=G[fe]).fits(ne)&&(B.add(ne),me=!0);return me}for(se||(se="rad"),z=0;z<Z.length;z++)re(H=S(Z[z],z,se))||G.push(b(H,Y));return G}function we(Z,Y,se){var z,fe,B,H,G=0,re=0,ne=[];for(z=0;z<Y;z++)ne[z]={score:0,item:null};for(z=0;z<Z.length;z++)if((fe=se.apply(this,[Z[z]]))>re)for((B=ne[G]).score=fe,B.item=Z[z],re=Number.MAX_VALUE,H=0;H<Y;H++)ne[H].score<re&&(re=ne[H].score,G=H);return ne}function Me(Z,Y,se){for(var z,fe=0,B=Y.x,H=Math.floor(Z.length/4),G=Y.x/2,re=0,ne=Y.x;B<H;){for(z=0;z<G;z++)se[re]=(.299*Z[4*fe+0]+.587*Z[4*fe+1]+.114*Z[4*fe+2]+(.299*Z[4*(fe+1)+0]+.587*Z[4*(fe+1)+1]+.114*Z[4*(fe+1)+2])+(.299*Z[4*B+0]+.587*Z[4*B+1]+.114*Z[4*B+2])+(.299*Z[4*(B+1)+0]+.587*Z[4*(B+1)+1]+.114*Z[4*(B+1)+2]))/4,re++,fe+=2,B+=2;fe+=ne,B+=ne}}function _e(Z,Y,se){var z=Z.length/4|0;if(se&&!0===se.singleChannel)for(var fe=0;fe<z;fe++)Y[fe]=Z[4*fe+0];else for(var B=0;B<z;B++)Y[B]=.299*Z[4*B+0]+.587*Z[4*B+1]+.114*Z[4*B+2]}function X(Z,Y){for(var se=Z.data,z=Z.size.x,fe=Y.data,B=0,H=z,G=se.length,re=z/2,ne=0;H<G;){for(var me=0;me<re;me++)fe[ne]=Math.floor((se[B]+se[B+1]+se[H]+se[H+1])/4),ne++,B+=2,H+=2;B+=z,H+=z}}function j(Z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],se=Z[0],fe=Z[2],B=fe*Z[1],H=B*(1-Math.abs(se/60%2-1)),G=fe-B,re=0,ne=0,me=0;return se<60?(re=B,ne=H):se<120?(re=H,ne=B):se<180?(ne=B,me=H):se<240?(ne=H,me=B):se<300?(re=H,me=B):se<360&&(re=B,me=H),Y[0]=255*(re+G)|0,Y[1]=255*(ne+G)|0,Y[2]=255*(me+G)|0,Y}function te(Z){for(var Y=[],se=[],z=1;z<Math.sqrt(Z)+1;z++)Z%z==0&&(se.push(z),z!==Z/z&&Y.unshift(Math.floor(Z/z)));return se.concat(Y)}function oe(Z,Y){var se,z=te(Y.x),fe=te(Y.y),B=Math.max(Y.x,Y.y),H=function(Be,Ie){for(var Ae=0,je=0,ke=[];Ae<Be.length&&je<Ie.length;)Be[Ae]===Ie[je]?(ke.push(Be[Ae]),Ae++,je++):Be[Ae]>Ie[je]?je++:Ae++;return ke}(z,fe),G=[8,10,15,20,32,60,80],re={"x-small":5,small:4,medium:3,large:2,"x-large":1},ne=re[Z]||re.medium,me=G[ne],Re=Math.floor(B/me);function Ue(Be){for(var Ie=0,Ae=Be[Math.floor(Be.length/2)];Ie<Be.length-1&&Be[Ie]<Re;)Ie++;return Ie>0&&(Ae=Math.abs(Be[Ie]-Re)>Math.abs(Be[Ie-1]-Re)?Be[Ie-1]:Be[Ie]),Re/Ae<G[ne+1]/G[ne]&&Re/Ae>G[ne-1]/G[ne]?{x:Ae,y:Ae}:null}return(se=Ue(H))||(se=Ue(te(B)))||(se=Ue(te(Re*me))),se}var Ee={top:function(Z,Y){return"%"===Z.unit?Math.floor(Y.height*(Z.value/100)):null},right:function(Z,Y){return"%"===Z.unit?Math.floor(Y.width-Y.width*(Z.value/100)):null},bottom:function(Z,Y){return"%"===Z.unit?Math.floor(Y.height-Y.height*(Z.value/100)):null},left:function(Z,Y){return"%"===Z.unit?Math.floor(Y.width*(Z.value/100)):null}};function ge(Z,Y,se){var z={width:Z,height:Y},fe=Object.keys(se).reduce(function(B,H){var ne,G=(ne=se[H],{value:parseFloat(ne),unit:(ne.indexOf("%"),"%")}),re=Ee[H](G,z);return B[H]=re,B},{});return{sx:fe.left,sy:fe.top,sw:fe.right-fe.left,sh:fe.bottom-fe.top}}},function(g,x,l){"use strict";var f=l(83),p=l.n(f),E=l(3),b=l.n(E),S=l(4),O=l.n(S),V=l(0),L=l.n(V),ee=l(7),ie=l(9),ue=l(8),Ve={clone:ee.clone};function we(_e){if(_e<0)throw new Error("expected positive number, received ".concat(_e))}var Me=function(){function _e(X,j){var te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,oe=arguments.length>3?arguments[3]:void 0;b()(this,_e),L()(this,"data",void 0),L()(this,"size",void 0),L()(this,"indexMapping",void 0),j?this.data=j:(this.data=new te(X.x*X.y),oe&&ue.a.init(this.data,0)),this.size=X}return O()(_e,[{key:"inImageWithBorder",value:function(X){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return we(j),X.x>=0&&X.y>=0&&X.x<this.size.x+2*j&&X.y<this.size.y+2*j}},{key:"subImageAsCopy",value:function(X,j){we(j.x),we(j.y);for(var te=X.size,oe=te.x,Ee=te.y,ge=0;ge<oe;ge++)for(var Z=0;Z<Ee;Z++)X.data[Z*oe+ge]=this.data[(j.y+Z)*this.size.x+j.x+ge];return X}},{key:"get",value:function(X,j){return this.data[j*this.size.x+X]}},{key:"getSafe",value:function(X,j){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var te=0;te<this.size.x;te++)this.indexMapping.x[te]=te,this.indexMapping.x[te+this.size.x]=te;for(var oe=0;oe<this.size.y;oe++)this.indexMapping.y[oe]=oe,this.indexMapping.y[oe+this.size.y]=oe}return this.data[this.indexMapping.y[j+this.size.y]*this.size.x+this.indexMapping.x[X+this.size.x]]}},{key:"set",value:function(X,j,te){return this.data[j*this.size.x+X]=te,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var X=this.size,j=X.x,te=X.y,oe=0;oe<j;oe++)this.data[oe]=this.data[(te-1)*j+oe]=0;for(var Ee=1;Ee<te-1;Ee++)this.data[Ee*j]=this.data[Ee*j+(j-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(X){var j,te,oe,Ee,ge,Z,Y,se,z,fe,B=this.data,H=this.size.y,G=this.size.x,re=[],ne=[],me=Math.PI,Re=me/4;if(X<=0)return ne;for(ge=0;ge<X;ge++)re[ge]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(te=0;te<H;te++)for(Ee=te*te,j=0;j<G;j++)(oe=B[te*G+j])>0&&((Z=re[oe-1]).m00+=1,Z.m01+=te,Z.m10+=j,Z.m11+=j*te,Z.m02+=Ee,Z.m20+=j*j);for(ge=0;ge<X;ge++)Z=re[ge],isNaN(Z.m00)||0===Z.m00||(fe=(Z.m02/Z.m00-(z=Z.m01/Z.m00)*z-(Z.m20/Z.m00-(se=Z.m10/Z.m00)*se))/(2*(Y=Z.m11/Z.m00-se*z)),fe=.5*Math.atan(fe)+(Y>=0?Re:-Re)+me,Z.theta=(180*fe/me+90)%180-90,Z.theta<0&&(Z.theta+=180),Z.rad=fe>me?fe-me:fe,Z.vec=Ve.clone([Math.cos(fe),Math.sin(fe)]),ne.push(Z));return ne}},{key:"getAsRGBA",value:function(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,j=new Uint8ClampedArray(4*this.size.x*this.size.y),te=0;te<this.size.y;te++)for(var oe=0;oe<this.size.x;oe++){var Ee=te*this.size.x+oe,ge=this.get(oe,te)*X;j[4*Ee+0]=ge,j[4*Ee+1]=ge,j[4*Ee+2]=ge,j[4*Ee+3]=255}return j}},{key:"show",value:function(X){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,te=X.getContext("2d");if(!te)throw new Error("Unable to get canvas context");var oe=te.getImageData(0,0,X.width,X.height),Ee=this.getAsRGBA(j);X.width=this.size.x,X.height=this.size.y;var ge=new ImageData(Ee,oe.width,oe.height);te.putImageData(ge,0,0)}},{key:"overlay",value:function(X,j,te){var oe=j<0||j>360?360:j,Ee=[0,1,1],ge=[0,0,0],Z=[255,255,255],Y=[0,0,0],se=X.getContext("2d");if(!se)throw new Error("Unable to get canvas context");for(var z=se.getImageData(te.x,te.y,this.size.x,this.size.y),fe=z.data,B=this.data.length;B--;){Ee[0]=this.data[B]*oe;var H=4*B,G=Ee[0]<=0?Z:Ee[0]>=360?Y:Object(ie.g)(Ee,ge),re=p()(G,3);fe[H]=re[0],fe[H+1]=re[1],fe[H+2]=re[2],fe[H+3]=255}se.putImageData(z,te.x,te.y)}}]),_e}();x.a=Me},function(g,x,l){g.exports=l(228)},function(g,x,l){var f=l(227);function p(E,b,S){return"undefined"!=typeof Reflect&&Reflect.get?(g.exports=p=Reflect.get,g.exports.default=g.exports,g.exports.__esModule=!0):(g.exports=p=function(O,V,L){var ee=f(O,V);if(ee){var ie=Object.getOwnPropertyDescriptor(ee,V);return ie.get?ie.get.call(L):ie.value}},g.exports.default=g.exports,g.exports.__esModule=!0),p(E,b,S||E)}g.exports=p,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l){var f=typeof l;return null!=l&&("object"==f||"function"==f)}},function(g,x){g.exports=Array.isArray},function(g,x,l){"use strict";x.a={drawRect:function(f,p,E,b){E.strokeStyle=b.color,E.fillStyle=b.color,E.lineWidth=b.lineWidth||1,E.beginPath(),E.strokeRect(f.x,f.y,p.x,p.y)},drawPath:function(f,p,E,b){E.strokeStyle=b.color,E.fillStyle=b.color,E.lineWidth=b.lineWidth,E.beginPath(),E.moveTo(f[0][p.x],f[0][p.y]);for(var S=1;S<f.length;S++)E.lineTo(f[S][p.x],f[S][p.y]);E.closePath(),E.stroke()},drawImage:function(f,p,E){var b=E.getImageData(0,0,p.x,p.y),S=b.data,O=S.length,V=f.length;if(O/V!=4)return!1;for(;V--;){var L=f[V];S[--O]=255,S[--O]=L,S[--O]=L,S[--O]=L}return E.putImageData(b,0,0),!0}}},function(g,x,l){var f=l(90),p=l(145)(function(E,b,S){f(E,b,S)});g.exports=p},function(g,x,l){var f=l(45),p="object"==typeof self&&self&&self.Object===Object&&self,E=f||p||Function("return this")();g.exports=E},function(g,x){g.exports=function(l){return null!=l&&"object"==typeof l}},function(g,x){function l(f){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(g.exports=l=function(p){return typeof p},g.exports.default=g.exports,g.exports.__esModule=!0):(g.exports=l=function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},g.exports.default=g.exports,g.exports.__esModule=!0),l(f)}g.exports=l,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){function l(f,p,E,b,S,O,V){try{var L=f[O](V),ee=L.value}catch(ie){return void E(ie)}L.done?p(ee):Promise.resolve(ee).then(b,S)}g.exports=function(f){return function(){var p=this,E=arguments;return new Promise(function(b,S){var O=f.apply(p,E);function V(ee){l(O,b,S,V,L,"next",ee)}function L(ee){l(O,b,S,V,L,"throw",ee)}V(void 0)})}},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){"use strict";x.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(f,p){var E,b=f.data,S=p.data,O=this.searchDirections,V=f.size.x;function L(ie,ue,Ve,we){var Me,_e,X;for(Me=0;Me<7;Me++){if(b[E=(_e=ie.cy+O[ie.dir][0])*V+(X=ie.cx+O[ie.dir][1])]===ue&&(0===S[E]||S[E]===Ve))return S[E]=Ve,ie.cy=_e,ie.cx=X,!0;0===S[E]&&(S[E]=we),ie.dir=(ie.dir+1)%8}return!1}function ee(ie,ue,Ve){return{dir:Ve,x:ie,y:ue,next:null,prev:null}}return{trace:function(ie,ue,Ve,we){return L(ie,ue,Ve,we)},contourTracing:function(ie,ue,Ve,we,Me){return function(_e,X,j,te,oe){var Ee,ge,Z,Y=null,se={cx:X,cy:_e,dir:0};if(L(se,te,j,oe)){Ee=Y=ee(X,_e,se.dir),Z=se.dir,(ge=ee(se.cx,se.cy,0)).prev=Ee,Ee.next=ge,ge.next=null,Ee=ge;do{se.dir=(se.dir+6)%8,L(se,te,j,oe),Z!==se.dir?(Ee.dir=se.dir,(ge=ee(se.cx,se.cy,0)).prev=Ee,Ee.next=ge,ge.next=null,Ee=ge):(Ee.dir=Z,Ee.x=se.cx,Ee.y=se.cy),Z=se.dir}while(se.cx!==X||se.cy!==_e);Y.prev=Ee.prev,Ee.prev.next=Y}return Y}(ie,ue,Ve,we,Me)}}}}},function(g,x,l){var f=l(27),p=l(103),E=l(104),b=f?f.toStringTag:void 0;g.exports=function(S){return null==S?void 0===S?"[object Undefined]":"[object Null]":b&&b in Object(S)?p(S):E(S)}},function(g,x,l){"use strict";(function(f){var p,E,b,S,O,V,L,ee,ie,ue,Ve,we,Me=l(7),_e=l(34),X=l(10),j=l(9),te=l(8),oe=(l(15),l(87)),Ee=l(21),ge=l(88),Z={ctx:{binary:null},dom:{binary:null}},Y={x:0,y:0};function se(B){var H,G,re,ne,me,Re,Ue,Be=ie.size.x,Ie=ie.size.y,Ae=-ie.size.x,je=-ie.size.y;for(H=0,G=0;G<B.length;G++)H+=(ne=B[G]).rad;for((H=(180*(H/=B.length)/Math.PI+90)%180-90)<0&&(H+=180),H=(180-H)*Math.PI/180,me=_e.copy(_e.create(),[Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H)]),G=0;G<B.length;G++)for(ne=B[G],re=0;re<4;re++)Me.transformMat2(ne.box[re],ne.box[re],me);for(G=0;G<B.length;G++)for(ne=B[G],re=0;re<4;re++)ne.box[re][0]<Be&&(Be=ne.box[re][0]),ne.box[re][0]>Ae&&(Ae=ne.box[re][0]),ne.box[re][1]<Ie&&(Ie=ne.box[re][1]),ne.box[re][1]>je&&(je=ne.box[re][1]);for(Re=[[Be,Ie],[Ae,Ie],[Ae,je],[Be,je]],Ue=p.halfSample?2:1,me=_e.invert(me,me),re=0;re<4;re++)Me.transformMat2(Re[re],Re[re],me);for(re=0;re<4;re++)Me.scale(Re[re],Re[re],Ue);return Re}function z(B,H){ie.subImageAsCopy(S,Object(j.h)(B,H)),we.skeletonize()}function fe(B,H,G,re){var ne,me,Re,Ue,Be=[],Ie=[],Ae=Math.ceil(ue.x/3);if(B.length>=2){for(ne=0;ne<B.length;ne++)B[ne].m00>Ae&&Be.push(B[ne]);if(Be.length>=2){for(Re=function(je){var ke=Object(j.b)(je,.9),In=Object(j.j)(ke,1,function(Ds){return Ds.getPoints().length}),un=[],$t=[];if(1===In.length){un=In[0].item.getPoints();for(var qn=0;qn<un.length;qn++)$t.push(un[qn].point)}return $t}(Be),me=0,ne=0;ne<Re.length;ne++)me+=Re[ne].rad;Re.length>1&&Re.length>=Be.length/4*3&&Re.length>B.length/4&&(me/=Re.length,Ue={index:H[1]*Y.x+H[0],pos:{x:G,y:re},box:[Me.clone([G,re]),Me.clone([G+S.size.x,re]),Me.clone([G+S.size.x,re+S.size.y]),Me.clone([G,re+S.size.y])],moments:Re,rad:me,vec:Me.clone([Math.cos(me),Math.sin(me)])},Ie.push(Ue))}}return Ie}x.a={init:function(B,H){p=H,Ve=B,function(){E=p.halfSample?new X.a({x:Ve.size.x/2|0,y:Ve.size.y/2|0}):Ve,ue=Object(j.a)(p.patchSize,E.size),Y.x=E.size.x/ue.x|0,Y.y=E.size.y/ue.y|0,ie=new X.a(E.size,void 0,Uint8Array,!1),O=new X.a(ue,void 0,Array,!0);var G=new ArrayBuffer(65536);S=new X.a(ue,new Uint8Array(G,0,ue.x*ue.y)),b=new X.a(ue,new Uint8Array(G,ue.x*ue.y*3,ue.x*ue.y),void 0,!0),we=Object(ge.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:f,{size:ue.x},G),ee=new X.a({x:E.size.x/S.size.x|0,y:E.size.y/S.size.y|0},void 0,Array,!0),V=new X.a(ee.size,void 0,void 0,!0),L=new X.a(ee.size,void 0,Int32Array,!0)}(),p.useWorker||"undefined"==typeof document||(Z.dom.binary=document.createElement("canvas"),Z.dom.binary.className="binaryBuffer",Z.ctx.binary=Z.dom.binary.getContext("2d"),Z.dom.binary.width=ie.size.x,Z.dom.binary.height=ie.size.y)},locate:function(){p.halfSample&&Object(j.f)(Ve,E),Object(j.i)(E,ie),ie.zeroBorder();var B=function(){var re,ne,me,Re,Ue,Be,Ie=[];for(re=0;re<Y.x;re++)for(ne=0;ne<Y.y;ne++)z(me=S.size.x*re,Re=S.size.y*ne),b.zeroBorder(),te.a.init(O.data,0),Be=oe.a.create(b,O).rasterize(0),Ue=O.moments(Be.count),Ie=Ie.concat(fe(Ue,[re,ne],me,Re));return Ie}();if(B.length<Y.x*Y.y*.05)return null;var H=function(re){var ne,me,Re=0,Ue=0;function Be(){var Ae;for(Ae=0;Ae<L.data.length;Ae++)if(0===L.data[Ae]&&1===V.data[Ae])return Ae;return L.length}function Ie(Ae){var In,un,$t,qn=Ae%L.size.x,Ds=Ae/L.size.x|0;if(Ae<L.data.length)for(In=ee.data[Ae],L.data[Ae]=Re,$t=0;$t<Ee.a.searchDirections.length;$t++)0!==V.data[un=(Ds+Ee.a.searchDirections[$t][0])*L.size.x+(qn+Ee.a.searchDirections[$t][1])]?0===L.data[un]&&Math.abs(Me.dot(ee.data[un].vec,In.vec))>.95&&Ie(un):L.data[un]=Number.MAX_VALUE}for(te.a.init(V.data,0),te.a.init(L.data,0),te.a.init(ee.data,null),ne=0;ne<re.length;ne++)ee.data[(me=re[ne]).index]=me,V.data[me.index]=1;for(V.zeroBorder();(Ue=Be())<L.data.length;)Re++,Ie(Ue);return Re}(B);if(H<1)return null;var G=function(re){var ne,me,Re=[];for(ne=0;ne<re;ne++)Re.push(0);for(me=L.data.length;me--;)L.data[me]>0&&Re[L.data[me]-1]++;return(Re=Re.map(function(Ue,Be){return{val:Ue,label:Be+1}})).sort(function(Ue,Be){return Be.val-Ue.val}),Re.filter(function(Ue){return Ue.val>=5})}(H);return 0===G.length?null:function(re,ne){var me,Re,Be,Ie=[],Ae=[];for(me=0;me<re.length;me++){for(Re=L.data.length,Ie.length=0;Re--;)L.data[Re]===re[me].label&&Ie.push(ee.data[Re]);(Be=se(Ie))&&Ae.push(Be)}return Ae}(G)},checkImageConstraints:function(B,H){var G,re,ne=B.getWidth(),me=B.getHeight(),Re=H.halfSample?.5:1;B.getConfig().area&&(re=Object(j.d)(ne,me,B.getConfig().area),B.setTopRight({x:re.sx,y:re.sy}),B.setCanvasSize({x:ne,y:me}),ne=re.sw,me=re.sh);var Ue={x:Math.floor(ne*Re),y:Math.floor(me*Re)};if(G=Object(j.a)(H.patchSize,Ue),B.setWidth(Math.floor(Math.floor(Ue.x/G.x)*(1/Re)*G.x)),B.setHeight(Math.floor(Math.floor(Ue.y/G.y)*(1/Re)*G.y)),B.getWidth()%G.x==0&&B.getHeight()%G.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(ne," )and height (").concat(me,") must a multiple of ").concat(G.x))}}}).call(this,l(46))},function(g,x,l){var f=l(92),p=l(93),E=l(94),b=l(95),S=l(96);function O(V){var L=-1,ee=null==V?0:V.length;for(this.clear();++L<ee;){var ie=V[L];this.set(ie[0],ie[1])}}O.prototype.clear=f,O.prototype.delete=p,O.prototype.get=E,O.prototype.has=b,O.prototype.set=S,g.exports=O},function(g,x,l){var f=l(26);g.exports=function(p,E){for(var b=p.length;b--;)if(f(p[b][0],E))return b;return-1}},function(g,x){g.exports=function(l,f){return l===f||l!=l&&f!=f}},function(g,x,l){var f=l(17).Symbol;g.exports=f},function(g,x,l){var f=l(35)(Object,"create");g.exports=f},function(g,x,l){var f=l(117);g.exports=function(p,E){var b=p.__data__;return f(E)?b["string"==typeof E?"string":"hash"]:b.map}},function(g,x,l){var f=l(132),p=l(18),E=Object.prototype,b=E.hasOwnProperty,S=E.propertyIsEnumerable,O=f(function(){return arguments}())?f:function(V){return p(V)&&b.call(V,"callee")&&!S.call(V,"callee")};g.exports=O},function(g,x){var l=/^(?:0|[1-9]\d*)$/;g.exports=function(f,p){var E=typeof f;return!!(p=null==p?9007199254740991:p)&&("number"==E||"symbol"!=E&&l.test(f))&&f>-1&&f%1==0&&f<p}},function(g,x,l){var f=l(14),p=l(232),E=l(233),b=l(236);g.exports=function(S,O){return f(S)?S:p(S,O)?[S]:E(b(S))}},function(g,x,l){var f=l(224),p=l(225),E=l(60),b=l(226);g.exports=function(S){return f(S)||p(S)||E(S)||b()},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){g.exports={determinant:l(251),transpose:l(252),multiply:l(253),identity:l(254),adjoint:l(255),rotate:l(256),invert:l(257),create:l(258),scale:l(259),copy:l(260),frob:l(261),ldu:l(262)}},function(g,x,l){var f=l(102),p=l(108);g.exports=function(E,b){var S=p(E,b);return f(S)?S:void 0}},function(g,x,l){var f=l(22),p=l(13);g.exports=function(E){if(!p(E))return!1;var b=f(E);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},function(g,x,l){var f=l(49);g.exports=function(p,E,b){"__proto__"==E&&f?f(p,E,{configurable:!0,enumerable:!0,value:b,writable:!0}):p[E]=b}},function(g,x){g.exports=function(l){return l.webpackPolyfill||(l.deprecate=function(){},l.paths=[],l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),l.webpackPolyfill=1),l}},function(g,x,l){var f=l(36),p=l(40);g.exports=function(E){return null!=E&&p(E.length)&&!f(E)}},function(g,x){g.exports=function(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=9007199254740991}},function(g,x){function l(f,p){return g.exports=l=Object.setPrototypeOf||function(E,b){return E.__proto__=b,E},g.exports.default=g.exports,g.exports.__esModule=!0,l(f,p)}g.exports=l,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=l(22),p=l(18);g.exports=function(E){return"symbol"==typeof E||p(E)&&"[object Symbol]"==f(E)}},function(g,x,l){var f=l(42);g.exports=function(p){if("string"==typeof p||f(p))return p;var E=p+"";return"0"==E&&1/p==-1/0?"-0":E}},function(g,x,l){var f=l(35)(l(17),"Map");g.exports=f},function(g,x,l){(function(f){g.exports="object"==typeof f&&f&&f.Object===Object&&f}).call(this,l(46))},function(g,x){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch(f){"object"==typeof window&&(l=window)}g.exports=l},function(g,x,l){var f=l(109),p=l(116),E=l(118),b=l(119),S=l(120);function O(V){var L=-1,ee=null==V?0:V.length;for(this.clear();++L<ee;){var ie=V[L];this.set(ie[0],ie[1])}}O.prototype.clear=f,O.prototype.delete=p,O.prototype.get=E,O.prototype.has=b,O.prototype.set=S,g.exports=O},function(g,x,l){var f=l(37),p=l(26);g.exports=function(E,b,S){(void 0!==S&&!p(E[b],S)||void 0===S&&!(b in E))&&f(E,b,S)}},function(g,x,l){var f=l(35),p=function(){try{var E=f(Object,"defineProperty");return E({},"",{}),E}catch(b){}}();g.exports=p},function(g,x,l){var f=l(131)(Object.getPrototypeOf,Object);g.exports=f},function(g,x){var l=Object.prototype;g.exports=function(f){var p=f&&f.constructor;return f===("function"==typeof p&&p.prototype||l)}},function(g,x,l){(function(f){var p=l(17),E=l(134),b=x&&!x.nodeType&&x,S=b&&"object"==typeof f&&f&&!f.nodeType&&f,O=S&&S.exports===b?p.Buffer:void 0;f.exports=(O?O.isBuffer:void 0)||E}).call(this,l(38)(g))},function(g,x,l){var f=l(136),p=l(137),E=l(138),b=E&&E.isTypedArray,S=b?p(b):f;g.exports=S},function(g,x){g.exports=function(l,f){if(("constructor"!==f||"function"!=typeof l[f])&&"__proto__"!=f)return l[f]}},function(g,x,l){var f=l(37),p=l(26),E=Object.prototype.hasOwnProperty;g.exports=function(b,S,O){var V=b[S];E.call(b,S)&&p(V,O)&&(void 0!==O||S in b)||f(b,S,O)}},function(g,x,l){var f=l(141),p=l(143),E=l(39);g.exports=function(b){return E(b)?f(b,!0):p(b)}},function(g,x){g.exports=function(l){return l}},function(g,x,l){var f=l(147),p=Math.max;g.exports=function(E,b,S){return b=p(void 0===b?E.length-1:b,0),function(){for(var O=arguments,V=-1,L=p(O.length-b,0),ee=Array(L);++V<L;)ee[V]=O[b+V];V=-1;for(var ie=Array(b+1);++V<b;)ie[V]=O[V];return ie[b]=S(ee),f(E,this,ie)}}},function(g,x,l){var f=l(148),p=l(150)(f);g.exports=p},function(g,x,l){var f=l(61);g.exports=function(p,E){if(p){if("string"==typeof p)return f(p,E);var b=Object.prototype.toString.call(p).slice(8,-1);return"Object"===b&&p.constructor&&(b=p.constructor.name),"Map"===b||"Set"===b?Array.from(p):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?f(p,E):void 0}},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l,f){(null==f||f>l.length)&&(f=l.length);for(var p=0,E=new Array(f);p<f;p++)E[p]=l[p];return E},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=1e-6},function(g,x){g.exports=function(){var l=new Float32Array(2);return l[0]=0,l[1]=0,l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]-p[0],l[1]=f[1]-p[1],l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]*p[0],l[1]=f[1]*p[1],l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]/p[0],l[1]=f[1]/p[1],l}},function(g,x){g.exports=function(l,f){var p=f[0]-l[0],E=f[1]-l[1];return Math.sqrt(p*p+E*E)}},function(g,x){g.exports=function(l,f){var p=f[0]-l[0],E=f[1]-l[1];return p*p+E*E}},function(g,x){g.exports=function(l){var f=l[0],p=l[1];return Math.sqrt(f*f+p*p)}},function(g,x){g.exports=function(l){var f=l[0],p=l[1];return f*f+p*p}},function(g,x){g.exports=1e-6},function(g,x){g.exports=function(){var l=new Float32Array(3);return l[0]=0,l[1]=0,l[2]=0,l}},function(g,x){g.exports=function(l,f,p){var E=new Float32Array(3);return E[0]=l,E[1]=f,E[2]=p,E}},function(g,x){g.exports=function(l,f){var p=f[0],E=f[1],b=f[2],S=p*p+E*E+b*b;return S>0&&(S=1/Math.sqrt(S),l[0]=f[0]*S,l[1]=f[1]*S,l[2]=f[2]*S),l}},function(g,x){g.exports=function(l,f){return l[0]*f[0]+l[1]*f[1]+l[2]*f[2]}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]-p[0],l[1]=f[1]-p[1],l[2]=f[2]-p[2],l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]*p[0],l[1]=f[1]*p[1],l[2]=f[2]*p[2],l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]/p[0],l[1]=f[1]/p[1],l[2]=f[2]/p[2],l}},function(g,x){g.exports=function(l,f){var p=f[0]-l[0],E=f[1]-l[1],b=f[2]-l[2];return Math.sqrt(p*p+E*E+b*b)}},function(g,x){g.exports=function(l,f){var p=f[0]-l[0],E=f[1]-l[1],b=f[2]-l[2];return p*p+E*E+b*b}},function(g,x){g.exports=function(l){var f=l[0],p=l[1],E=l[2];return Math.sqrt(f*f+p*p+E*E)}},function(g,x){g.exports=function(l){var f=l[0],p=l[1],E=l[2];return f*f+p*p+E*E}},function(g,x,l){var f=l(153),p=l(154),E=l(60),b=l(155);g.exports=function(S,O){return f(S)||p(S,O)||E(S,O)||b()},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){g.exports={EPSILON:l(71),create:l(72),clone:l(191),angle:l(192),fromValues:l(73),copy:l(193),set:l(194),equals:l(195),exactEquals:l(196),add:l(197),subtract:l(76),sub:l(198),multiply:l(77),mul:l(199),divide:l(78),div:l(200),min:l(201),max:l(202),floor:l(203),ceil:l(204),round:l(205),scale:l(206),scaleAndAdd:l(207),distance:l(79),dist:l(208),squaredDistance:l(80),sqrDist:l(209),length:l(81),len:l(210),squaredLength:l(82),sqrLen:l(211),negate:l(212),inverse:l(213),normalize:l(74),dot:l(75),cross:l(214),lerp:l(215),random:l(216),transformMat4:l(217),transformMat3:l(218),transformQuat:l(219),rotateX:l(220),rotateY:l(221),rotateZ:l(222),forEach:l(223)}},function(g,x,l){var f=l(229),p=l(243)(function(E,b){return null==E?{}:f(E,b)});g.exports=p},function(g,x,l){var f=l(2),p=l(41),E=l(248),b=l(249);function S(O){var V="function"==typeof Map?new Map:void 0;return g.exports=S=function(L){if(null===L||!E(L))return L;if("function"!=typeof L)throw new TypeError("Super expression must either be null or a function");if(void 0!==V){if(V.has(L))return V.get(L);V.set(L,ee)}function ee(){return b(L,arguments,f(this).constructor)}return ee.prototype=Object.create(L.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),p(ee,L)},g.exports.default=g.exports,g.exports.__esModule=!0,S(O)}g.exports=S,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){"use strict";var f=l(21),p={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(E,b){var S=E.data,O=b.data,V=E.size.x,L=E.size.y,ee=f.a.create(E,b);return{rasterize:function(ie){var ue,Ve,we,Me,_e,X,j,te,oe,Ee,ge,Z,Y=[],se=0;for(Z=0;Z<400;Z++)Y[Z]=0;for(Y[0]=S[0],oe=null,X=1;X<L-1;X++)for(Me=0,Ve=Y[0],_e=1;_e<V-1;_e++)if(0===O[ge=X*V+_e])if((ue=S[ge])!==Ve){if(0===Me)Y[we=se+1]=ue,Ve=ue,null!==(j=ee.contourTracing(X,_e,we,ue,p.DIR.OUTSIDE_EDGE))&&(se++,Me=we,(te=p.createContour2D()).dir=p.CONTOUR_DIR.CW_DIR,te.index=Me,te.firstVertex=j,te.nextpeer=oe,te.insideContours=null,null!==oe&&(oe.prevpeer=te),oe=te);else if(null!==(j=ee.contourTracing(X,_e,p.DIR.INSIDE_EDGE,ue,Me))){for((te=p.createContour2D()).firstVertex=j,te.insideContours=null,te.dir=0===ie?p.CONTOUR_DIR.CCW_DIR:p.CONTOUR_DIR.CW_DIR,te.index=ie,Ee=oe;null!==Ee&&Ee.index!==Me;)Ee=Ee.nextpeer;null!==Ee&&(te.nextpeer=Ee.insideContours,null!==Ee.insideContours&&(Ee.insideContours.prevpeer=te),Ee.insideContours=te)}}else O[ge]=Me;else O[ge]===p.DIR.OUTSIDE_EDGE||O[ge]===p.DIR.INSIDE_EDGE?(Me=0,Ve=O[ge]===p.DIR.INSIDE_EDGE?S[ge]:Y[0]):Ve=Y[Me=O[ge]];for(Ee=oe;null!==Ee;)Ee.index=ie,Ee=Ee.nextpeer;return{cc:oe,count:se}},debug:{drawContour:function(ie,ue){var Ve,we,Me,_e=ie.getContext("2d"),X=ue;for(_e.strokeStyle="red",_e.fillStyle="red",_e.lineWidth=1,Ve=null!==X?X.insideContours:null;null!==X;){switch(null!==Ve?(we=Ve,Ve=Ve.nextpeer):(we=X,Ve=null!==(X=X.nextpeer)?X.insideContours:null),we.dir){case p.CONTOUR_DIR.CW_DIR:_e.strokeStyle="red";break;case p.CONTOUR_DIR.CCW_DIR:_e.strokeStyle="blue";break;case p.CONTOUR_DIR.UNKNOWN_DIR:_e.strokeStyle="green"}Me=we.firstVertex,_e.beginPath(),_e.moveTo(Me.x,Me.y);do{_e.lineTo((Me=Me.next).x,Me.y)}while(Me!==we.firstVertex);_e.stroke()}}}}}};x.a=p},function(g,x,l){"use strict";x.a=function(f,p,E){var b=new f.Uint8Array(E),S=0|p.size,O=f.Math.imul;function V(X,j){X|=0,j|=0;var te=0,oe=0,ge=0,Z=0,Y=0,se=0,z=0;for(te=1;(0|te)<(S-1|0);te=te+1|0)for(z=z+S|0,oe=1;(0|oe)<(S-1|0);oe=oe+1|0)b[j+z+oe|0]=5==(0|(0|b[X+(ge=z-S|0)+(Y=oe-1|0)|0])+(0|b[X+ge+(se=oe+1|0)|0])+(0|b[X+z+oe|0])+(0|b[X+(Z=z+S|0)+Y|0])+(0|b[X+Z+se|0]))?1:0}function L(X,j,te){X|=0,j|=0,te|=0;var oe=0;for(oe=0|O(S,S);(0|oe)>0;)b[te+(oe=oe-1|0)|0]=(0|b[X+oe|0])-(0|b[j+oe|0])|0}function ee(X,j,te){X|=0,j|=0,te|=0;var oe=0;for(oe=0|O(S,S);(0|oe)>0;)b[te+(oe=oe-1|0)|0]=0|b[X+oe|0]|b[j+oe|0]|0}function ie(X){X|=0;var j=0,te=0;for(te=0|O(S,S);(0|te)>0;)j=(0|j)+(0|b[X+(te=te-1|0)|0])|0;return 0|j}function Ve(X,j){X|=0,j|=0;var te=0,oe=0,ge=0,Z=0,Y=0,se=0,z=0;for(te=1;(0|te)<(S-1|0);te=te+1|0)for(z=z+S|0,oe=1;(0|oe)<(S-1|0);oe=oe+1|0)b[j+z+oe|0]=(0|(0|b[X+(ge=z-S|0)+(Y=oe-1|0)|0])+(0|b[X+ge+(se=oe+1|0)|0])+(0|b[X+z+oe|0])+(0|b[X+(Z=z+S|0)+Y|0])+(0|b[X+Z+se|0]))>0?1:0}function we(X,j){X|=0,j|=0;var te=0;for(te=0|O(S,S);(0|te)>0;)b[j+(te=te-1|0)|0]=0|b[X+te|0]}return{skeletonize:function(){var j,te,oe,ge=0;(function(X,j){X|=0,j|=0;var te=0;for(te=0|O(S,S);(0|te)>0;)b[X+(te=te-1|0)|0]=j})(oe=(te=(j=0|O(S,S))+j|0)+j|0,0),function(X){X|=0;var j=0,te=0;for(j=0;(0|j)<(S-1|0);j=j+1|0)b[X+j|0]=0,b[X+te|0]=0,b[X+(te=te+S-1|0)|0]=0,te=te+1|0;for(j=0;(0|j)<(0|S);j=j+1|0)b[X+te|0]=0,te=te+1|0}(0);do{V(0,j),Ve(j,te),L(0,te,te),ee(oe,te,oe),we(j,0),ge=0==(0|ie(0))|0}while(!ge)}}}},function(g,x,l){g.exports=l(263)},function(g,x,l){var f=l(91),p=l(48),E=l(121),b=l(123),S=l(13),O=l(56),V=l(54);g.exports=function L(ee,ie,ue,Ve,we){ee!==ie&&E(ie,function(Me,_e){if(we||(we=new f),S(Me))b(ee,ie,_e,ue,L,Ve,we);else{var X=Ve?Ve(V(ee,_e),Me,_e+"",ee,ie,we):void 0;void 0===X&&(X=Me),p(ee,_e,X)}},O)}},function(g,x,l){var f=l(24),p=l(97),E=l(98),b=l(99),S=l(100),O=l(101);function V(L){var ee=this.__data__=new f(L);this.size=ee.size}V.prototype.clear=p,V.prototype.delete=E,V.prototype.get=b,V.prototype.has=S,V.prototype.set=O,g.exports=V},function(g,x){g.exports=function(){this.__data__=[],this.size=0}},function(g,x,l){var f=l(25),p=Array.prototype.splice;g.exports=function(E){var b=this.__data__,S=f(b,E);return!(S<0||(S==b.length-1?b.pop():p.call(b,S,1),--this.size,0))}},function(g,x,l){var f=l(25);g.exports=function(p){var E=this.__data__,b=f(E,p);return b<0?void 0:E[b][1]}},function(g,x,l){var f=l(25);g.exports=function(p){return f(this.__data__,p)>-1}},function(g,x,l){var f=l(25);g.exports=function(p,E){var b=this.__data__,S=f(b,p);return S<0?(++this.size,b.push([p,E])):b[S][1]=E,this}},function(g,x,l){var f=l(24);g.exports=function(){this.__data__=new f,this.size=0}},function(g,x){g.exports=function(l){var f=this.__data__,p=f.delete(l);return this.size=f.size,p}},function(g,x){g.exports=function(l){return this.__data__.get(l)}},function(g,x){g.exports=function(l){return this.__data__.has(l)}},function(g,x,l){var f=l(24),p=l(44),E=l(47);g.exports=function(b,S){var O=this.__data__;if(O instanceof f){var V=O.__data__;if(!p||V.length<199)return V.push([b,S]),this.size=++O.size,this;O=this.__data__=new E(V)}return O.set(b,S),this.size=O.size,this}},function(g,x,l){var f=l(36),p=l(105),E=l(13),b=l(107),S=/^\[object .+?Constructor\]$/,ie=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");g.exports=function(ue){return!(!E(ue)||p(ue))&&(f(ue)?ie:S).test(b(ue))}},function(g,x,l){var f=l(27),p=Object.prototype,E=p.hasOwnProperty,b=p.toString,S=f?f.toStringTag:void 0;g.exports=function(O){var V=E.call(O,S),L=O[S];try{O[S]=void 0;var ee=!0}catch(ue){}var ie=b.call(O);return ee&&(V?O[S]=L:delete O[S]),ie}},function(g,x){var l=Object.prototype.toString;g.exports=function(f){return l.call(f)}},function(g,x,l){var f,p=l(106),E=(f=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"";g.exports=function(b){return!!E&&E in b}},function(g,x,l){var f=l(17)["__core-js_shared__"];g.exports=f},function(g,x){var l=Function.prototype.toString;g.exports=function(f){if(null!=f){try{return l.call(f)}catch(p){}try{return f+""}catch(p){}}return""}},function(g,x){g.exports=function(l,f){return null==l?void 0:l[f]}},function(g,x,l){var f=l(110),p=l(24),E=l(44);g.exports=function(){this.size=0,this.__data__={hash:new f,map:new(E||p),string:new f}}},function(g,x,l){var f=l(111),p=l(112),E=l(113),b=l(114),S=l(115);function O(V){var L=-1,ee=null==V?0:V.length;for(this.clear();++L<ee;){var ie=V[L];this.set(ie[0],ie[1])}}O.prototype.clear=f,O.prototype.delete=p,O.prototype.get=E,O.prototype.has=b,O.prototype.set=S,g.exports=O},function(g,x,l){var f=l(28);g.exports=function(){this.__data__=f?f(null):{},this.size=0}},function(g,x){g.exports=function(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f}},function(g,x,l){var f=l(28),p=Object.prototype.hasOwnProperty;g.exports=function(E){var b=this.__data__;if(f){var S=b[E];return"__lodash_hash_undefined__"===S?void 0:S}return p.call(b,E)?b[E]:void 0}},function(g,x,l){var f=l(28),p=Object.prototype.hasOwnProperty;g.exports=function(E){var b=this.__data__;return f?void 0!==b[E]:p.call(b,E)}},function(g,x,l){var f=l(28);g.exports=function(p,E){var b=this.__data__;return this.size+=this.has(p)?0:1,b[p]=f&&void 0===E?"__lodash_hash_undefined__":E,this}},function(g,x,l){var f=l(29);g.exports=function(p){var E=f(this,p).delete(p);return this.size-=E?1:0,E}},function(g,x){g.exports=function(l){var f=typeof l;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==l:null===l}},function(g,x,l){var f=l(29);g.exports=function(p){return f(this,p).get(p)}},function(g,x,l){var f=l(29);g.exports=function(p){return f(this,p).has(p)}},function(g,x,l){var f=l(29);g.exports=function(p,E){var b=f(this,p),S=b.size;return b.set(p,E),this.size+=b.size==S?0:1,this}},function(g,x,l){var f=l(122)();g.exports=f},function(g,x){g.exports=function(l){return function(f,p,E){for(var b=-1,S=Object(f),O=E(f),V=O.length;V--;){var L=O[l?V:++b];if(!1===p(S[L],L,S))break}return f}}},function(g,x,l){var f=l(48),p=l(124),E=l(125),b=l(128),S=l(129),O=l(30),V=l(14),L=l(133),ee=l(52),ie=l(36),ue=l(13),Ve=l(135),we=l(53),Me=l(54),_e=l(139);g.exports=function(X,j,te,oe,Ee,ge,Z){var Y=Me(X,te),se=Me(j,te),z=Z.get(se);if(z)f(X,te,z);else{var fe=ge?ge(Y,se,te+"",X,j,Z):void 0,B=void 0===fe;if(B){var H=V(se),G=!H&&ee(se),re=!H&&!G&&we(se);fe=se,H||G||re?V(Y)?fe=Y:L(Y)?fe=b(Y):G?(B=!1,fe=p(se,!0)):re?(B=!1,fe=E(se,!0)):fe=[]:Ve(se)||O(se)?(fe=Y,O(Y)?fe=_e(Y):ue(Y)&&!ie(Y)||(fe=S(se))):B=!1}B&&(Z.set(se,fe),Ee(fe,se,oe,ge,Z),Z.delete(se)),f(X,te,fe)}}},function(g,x,l){(function(f){var p=l(17),E=x&&!x.nodeType&&x,b=E&&"object"==typeof f&&f&&!f.nodeType&&f,S=b&&b.exports===E?p.Buffer:void 0,O=S?S.allocUnsafe:void 0;f.exports=function(V,L){if(L)return V.slice();var ee=V.length,ie=O?O(ee):new V.constructor(ee);return V.copy(ie),ie}}).call(this,l(38)(g))},function(g,x,l){var f=l(126);g.exports=function(p,E){var b=E?f(p.buffer):p.buffer;return new p.constructor(b,p.byteOffset,p.length)}},function(g,x,l){var f=l(127);g.exports=function(p){var E=new p.constructor(p.byteLength);return new f(E).set(new f(p)),E}},function(g,x,l){var f=l(17).Uint8Array;g.exports=f},function(g,x){g.exports=function(l,f){var p=-1,E=l.length;for(f||(f=Array(E));++p<E;)f[p]=l[p];return f}},function(g,x,l){var f=l(130),p=l(50),E=l(51);g.exports=function(b){return"function"!=typeof b.constructor||E(b)?{}:f(p(b))}},function(g,x,l){var f=l(13),p=Object.create,E=function(){function b(){}return function(S){if(!f(S))return{};if(p)return p(S);b.prototype=S;var O=new b;return b.prototype=void 0,O}}();g.exports=E},function(g,x){g.exports=function(l,f){return function(p){return l(f(p))}}},function(g,x,l){var f=l(22),p=l(18);g.exports=function(E){return p(E)&&"[object Arguments]"==f(E)}},function(g,x,l){var f=l(39),p=l(18);g.exports=function(E){return p(E)&&f(E)}},function(g,x){g.exports=function(){return!1}},function(g,x,l){var f=l(22),p=l(50),E=l(18),O=Function.prototype.toString,V=Object.prototype.hasOwnProperty,L=O.call(Object);g.exports=function(ee){if(!E(ee)||"[object Object]"!=f(ee))return!1;var ie=p(ee);if(null===ie)return!0;var ue=V.call(ie,"constructor")&&ie.constructor;return"function"==typeof ue&&ue instanceof ue&&O.call(ue)==L}},function(g,x,l){var f=l(22),p=l(40),E=l(18),b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b["[object Arguments]"]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b["[object Map]"]=b["[object Number]"]=b["[object Object]"]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object WeakMap]"]=!1,g.exports=function(S){return E(S)&&p(S.length)&&!!b[f(S)]}},function(g,x){g.exports=function(l){return function(f){return l(f)}}},function(g,x,l){(function(f){var p=l(45),E=x&&!x.nodeType&&x,b=E&&"object"==typeof f&&f&&!f.nodeType&&f,S=b&&b.exports===E&&p.process,O=function(){try{return b&&b.require&&b.require("util").types||S&&S.binding&&S.binding("util")}catch(L){}}();f.exports=O}).call(this,l(38)(g))},function(g,x,l){var f=l(140),p=l(56);g.exports=function(E){return f(E,p(E))}},function(g,x,l){var f=l(55),p=l(37);g.exports=function(E,b,S,O){var V=!S;S||(S={});for(var L=-1,ee=b.length;++L<ee;){var ie=b[L],ue=O?O(S[ie],E[ie],ie,S,E):void 0;void 0===ue&&(ue=E[ie]),V?p(S,ie,ue):f(S,ie,ue)}return S}},function(g,x,l){var f=l(142),p=l(30),E=l(14),b=l(52),S=l(31),O=l(53),V=Object.prototype.hasOwnProperty;g.exports=function(L,ee){var ie=E(L),ue=!ie&&p(L),Ve=!ie&&!ue&&b(L),we=!ie&&!ue&&!Ve&&O(L),Me=ie||ue||Ve||we,_e=Me?f(L.length,String):[],X=_e.length;for(var j in L)!ee&&!V.call(L,j)||Me&&("length"==j||Ve&&("offset"==j||"parent"==j)||we&&("buffer"==j||"byteLength"==j||"byteOffset"==j)||S(j,X))||_e.push(j);return _e}},function(g,x){g.exports=function(l,f){for(var p=-1,E=Array(l);++p<l;)E[p]=f(p);return E}},function(g,x,l){var f=l(13),p=l(51),E=l(144),b=Object.prototype.hasOwnProperty;g.exports=function(S){if(!f(S))return E(S);var O=p(S),V=[];for(var L in S)("constructor"!=L||!O&&b.call(S,L))&&V.push(L);return V}},function(g,x){g.exports=function(l){var f=[];if(null!=l)for(var p in Object(l))f.push(p);return f}},function(g,x,l){var f=l(146),p=l(151);g.exports=function(E){return f(function(b,S){var O=-1,V=S.length,L=V>1?S[V-1]:void 0,ee=V>2?S[2]:void 0;for(L=E.length>3&&"function"==typeof L?(V--,L):void 0,ee&&p(S[0],S[1],ee)&&(L=V<3?void 0:L,V=1),b=Object(b);++O<V;){var ie=S[O];ie&&E(b,ie,O,L)}return b})}},function(g,x,l){var f=l(57),p=l(58),E=l(59);g.exports=function(b,S){return E(p(b,S,f),b+"")}},function(g,x){g.exports=function(l,f,p){switch(p.length){case 0:return l.call(f);case 1:return l.call(f,p[0]);case 2:return l.call(f,p[0],p[1]);case 3:return l.call(f,p[0],p[1],p[2])}return l.apply(f,p)}},function(g,x,l){var f=l(149),p=l(49),E=l(57);g.exports=p?function(S,O){return p(S,"toString",{configurable:!0,enumerable:!1,value:f(O),writable:!0})}:E},function(g,x){g.exports=function(l){return function(){return l}}},function(g,x){var l=Date.now;g.exports=function(f){var p=0,E=0;return function(){var b=l(),S=16-(b-E);if(E=b,S>0){if(++p>=800)return arguments[0]}else p=0;return f.apply(void 0,arguments)}}},function(g,x,l){var f=l(26),p=l(39),E=l(31),b=l(13);g.exports=function(S,O,V){if(!b(V))return!1;var L=typeof O;return!!("number"==L?p(V)&&E(O,V.length):"string"==L&&O in V)&&f(V[O],S)}},function(g,x){"undefined"!=typeof window&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l){window.setTimeout(l,1e3/60)})),"function"!=typeof Math.imul&&(Math.imul=function(l,f){var p=65535&l,E=65535&f;return p*E+((l>>>16&65535)*E+p*(f>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&(Object.assign=function(l){"use strict";if(null===l)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(l),p=1;p<arguments.length;p++){var E=arguments[p];if(null!==E)for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(f[b]=E[b])}return f})},function(g,x){g.exports=function(l){if(Array.isArray(l))return l},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l,f){var p=null==l?null:"undefined"!=typeof Symbol&&l[Symbol.iterator]||l["@@iterator"];if(null!=p){var E,b,S=[],O=!0,V=!1;try{for(p=p.call(l);!(O=(E=p.next()).done)&&(S.push(E.value),!f||S.length!==f);O=!0);}catch(L){V=!0,b=L}finally{try{O||null==p.return||p.return()}finally{if(V)throw b}}return S}},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l){var f=new Float32Array(2);return f[0]=l[0],f[1]=l[1],f}},function(g,x){g.exports=function(l,f){var p=new Float32Array(2);return p[0]=l,p[1]=f,p}},function(g,x){g.exports=function(l,f){return l[0]=f[0],l[1]=f[1],l}},function(g,x){g.exports=function(l,f,p){return l[0]=f,l[1]=p,l}},function(g,x,l){g.exports=function(p,E){var b=p[0],S=p[1],O=E[0],V=E[1];return Math.abs(b-O)<=f*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(S-V)<=f*Math.max(1,Math.abs(S),Math.abs(V))};var f=l(62)},function(g,x){g.exports=function(l,f){return l[0]===f[0]&&l[1]===f[1]}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]+p[0],l[1]=f[1]+p[1],l}},function(g,x,l){g.exports=l(64)},function(g,x,l){g.exports=l(65)},function(g,x,l){g.exports=l(66)},function(g,x){g.exports=function(l,f){return l[0]=1/f[0],l[1]=1/f[1],l}},function(g,x){g.exports=function(l,f,p){return l[0]=Math.min(f[0],p[0]),l[1]=Math.min(f[1],p[1]),l}},function(g,x){g.exports=function(l,f,p){return l[0]=Math.max(f[0],p[0]),l[1]=Math.max(f[1],p[1]),l}},function(g,x){g.exports=function(l,f,p){var E=Math.cos(p),b=Math.sin(p),S=f[0],O=f[1];return l[0]=S*E-O*b,l[1]=S*b+O*E,l}},function(g,x){g.exports=function(l,f){return l[0]=Math.floor(f[0]),l[1]=Math.floor(f[1]),l}},function(g,x){g.exports=function(l,f){return l[0]=Math.ceil(f[0]),l[1]=Math.ceil(f[1]),l}},function(g,x){g.exports=function(l,f){return l[0]=Math.round(f[0]),l[1]=Math.round(f[1]),l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]*p,l[1]=f[1]*p,l}},function(g,x){g.exports=function(l,f,p,E){return l[0]=f[0]+p[0]*E,l[1]=f[1]+p[1]*E,l}},function(g,x,l){g.exports=l(67)},function(g,x,l){g.exports=l(68)},function(g,x,l){g.exports=l(69)},function(g,x,l){g.exports=l(70)},function(g,x){g.exports=function(l,f){return l[0]=-f[0],l[1]=-f[1],l}},function(g,x){g.exports=function(l,f){var p=f[0],E=f[1],b=p*p+E*E;return b>0&&(b=1/Math.sqrt(b),l[0]=f[0]*b,l[1]=f[1]*b),l}},function(g,x){g.exports=function(l,f){return l[0]*f[0]+l[1]*f[1]}},function(g,x){g.exports=function(l,f,p){var E=f[0]*p[1]-f[1]*p[0];return l[0]=l[1]=0,l[2]=E,l}},function(g,x){g.exports=function(l,f,p,E){var b=f[0],S=f[1];return l[0]=b+E*(p[0]-b),l[1]=S+E*(p[1]-S),l}},function(g,x){g.exports=function(l,f){f=f||1;var p=2*Math.random()*Math.PI;return l[0]=Math.cos(p)*f,l[1]=Math.sin(p)*f,l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1];return l[0]=p[0]*E+p[2]*b,l[1]=p[1]*E+p[3]*b,l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1];return l[0]=p[0]*E+p[2]*b+p[4],l[1]=p[1]*E+p[3]*b+p[5],l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1];return l[0]=p[0]*E+p[3]*b+p[6],l[1]=p[1]*E+p[4]*b+p[7],l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1];return l[0]=p[0]*E+p[4]*b+p[12],l[1]=p[1]*E+p[5]*b+p[13],l}},function(g,x,l){g.exports=function(p,E,b,S,O,V){var L,ee;for(E||(E=2),b||(b=0),ee=S?Math.min(S*E+b,p.length):p.length,L=b;L<ee;L+=E)f[0]=p[L],f[1]=p[L+1],O(f,f,V),p[L]=f[0],p[L+1]=f[1];return p};var f=l(63)()},function(g,x){g.exports=function(l,f,p){var E=f[0]*f[0]+f[1]*f[1];if(E>p*p){var b=Math.sqrt(E);l[0]=f[0]/b*p,l[1]=f[1]/b*p}else l[0]=f[0],l[1]=f[1];return l}},function(g,x){g.exports=function(l){var f=new Float32Array(3);return f[0]=l[0],f[1]=l[1],f[2]=l[2],f}},function(g,x,l){g.exports=function(b,S){var O=f(b[0],b[1],b[2]),V=f(S[0],S[1],S[2]);p(O,O),p(V,V);var L=E(O,V);return L>1?0:Math.acos(L)};var f=l(73),p=l(74),E=l(75)},function(g,x){g.exports=function(l,f){return l[0]=f[0],l[1]=f[1],l[2]=f[2],l}},function(g,x){g.exports=function(l,f,p,E){return l[0]=f,l[1]=p,l[2]=E,l}},function(g,x,l){g.exports=function(p,E){var b=p[0],S=p[1],O=p[2],V=E[0],L=E[1],ee=E[2];return Math.abs(b-V)<=f*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(S-L)<=f*Math.max(1,Math.abs(S),Math.abs(L))&&Math.abs(O-ee)<=f*Math.max(1,Math.abs(O),Math.abs(ee))};var f=l(71)},function(g,x){g.exports=function(l,f){return l[0]===f[0]&&l[1]===f[1]&&l[2]===f[2]}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]+p[0],l[1]=f[1]+p[1],l[2]=f[2]+p[2],l}},function(g,x,l){g.exports=l(76)},function(g,x,l){g.exports=l(77)},function(g,x,l){g.exports=l(78)},function(g,x){g.exports=function(l,f,p){return l[0]=Math.min(f[0],p[0]),l[1]=Math.min(f[1],p[1]),l[2]=Math.min(f[2],p[2]),l}},function(g,x){g.exports=function(l,f,p){return l[0]=Math.max(f[0],p[0]),l[1]=Math.max(f[1],p[1]),l[2]=Math.max(f[2],p[2]),l}},function(g,x){g.exports=function(l,f){return l[0]=Math.floor(f[0]),l[1]=Math.floor(f[1]),l[2]=Math.floor(f[2]),l}},function(g,x){g.exports=function(l,f){return l[0]=Math.ceil(f[0]),l[1]=Math.ceil(f[1]),l[2]=Math.ceil(f[2]),l}},function(g,x){g.exports=function(l,f){return l[0]=Math.round(f[0]),l[1]=Math.round(f[1]),l[2]=Math.round(f[2]),l}},function(g,x){g.exports=function(l,f,p){return l[0]=f[0]*p,l[1]=f[1]*p,l[2]=f[2]*p,l}},function(g,x){g.exports=function(l,f,p,E){return l[0]=f[0]+p[0]*E,l[1]=f[1]+p[1]*E,l[2]=f[2]+p[2]*E,l}},function(g,x,l){g.exports=l(79)},function(g,x,l){g.exports=l(80)},function(g,x,l){g.exports=l(81)},function(g,x,l){g.exports=l(82)},function(g,x){g.exports=function(l,f){return l[0]=-f[0],l[1]=-f[1],l[2]=-f[2],l}},function(g,x){g.exports=function(l,f){return l[0]=1/f[0],l[1]=1/f[1],l[2]=1/f[2],l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2],O=p[0],V=p[1],L=p[2];return l[0]=b*L-S*V,l[1]=S*O-E*L,l[2]=E*V-b*O,l}},function(g,x){g.exports=function(l,f,p,E){var b=f[0],S=f[1],O=f[2];return l[0]=b+E*(p[0]-b),l[1]=S+E*(p[1]-S),l[2]=O+E*(p[2]-O),l}},function(g,x){g.exports=function(l,f){f=f||1;var p=2*Math.random()*Math.PI,E=2*Math.random()-1,b=Math.sqrt(1-E*E)*f;return l[0]=Math.cos(p)*b,l[1]=Math.sin(p)*b,l[2]=E*f,l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2],O=p[3]*E+p[7]*b+p[11]*S+p[15];return l[0]=(p[0]*E+p[4]*b+p[8]*S+p[12])/(O=O||1),l[1]=(p[1]*E+p[5]*b+p[9]*S+p[13])/O,l[2]=(p[2]*E+p[6]*b+p[10]*S+p[14])/O,l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2];return l[0]=E*p[0]+b*p[3]+S*p[6],l[1]=E*p[1]+b*p[4]+S*p[7],l[2]=E*p[2]+b*p[5]+S*p[8],l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2],O=p[0],V=p[1],L=p[2],ee=p[3],ie=ee*E+V*S-L*b,ue=ee*b+L*E-O*S,Ve=ee*S+O*b-V*E,we=-O*E-V*b-L*S;return l[0]=ie*ee+we*-O+ue*-L-Ve*-V,l[1]=ue*ee+we*-V+Ve*-O-ie*-L,l[2]=Ve*ee+we*-L+ie*-V-ue*-O,l}},function(g,x){g.exports=function(l,f,p,E){var b=p[1],S=p[2],O=f[1]-b,V=f[2]-S,L=Math.sin(E),ee=Math.cos(E);return l[0]=f[0],l[1]=b+O*ee-V*L,l[2]=S+O*L+V*ee,l}},function(g,x){g.exports=function(l,f,p,E){var b=p[0],S=p[2],O=f[0]-b,V=f[2]-S,L=Math.sin(E),ee=Math.cos(E);return l[0]=b+V*L+O*ee,l[1]=f[1],l[2]=S+V*ee-O*L,l}},function(g,x){g.exports=function(l,f,p,E){var b=p[0],S=p[1],O=f[0]-b,V=f[1]-S,L=Math.sin(E),ee=Math.cos(E);return l[0]=b+O*ee-V*L,l[1]=S+O*L+V*ee,l[2]=f[2],l}},function(g,x,l){g.exports=function(p,E,b,S,O,V){var L,ee;for(E||(E=3),b||(b=0),ee=S?Math.min(S*E+b,p.length):p.length,L=b;L<ee;L+=E)f[0]=p[L],f[1]=p[L+1],f[2]=p[L+2],O(f,f,V),p[L]=f[0],p[L+1]=f[1],p[L+2]=f[2];return p};var f=l(72)()},function(g,x,l){var f=l(61);g.exports=function(p){if(Array.isArray(p))return f(p)},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l){if("undefined"!=typeof Symbol&&null!=l[Symbol.iterator]||null!=l["@@iterator"])return Array.from(l)},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=l(2);g.exports=function(p,E){for(;!Object.prototype.hasOwnProperty.call(p,E)&&null!==(p=f(p)););return p},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=function(p){"use strict";var E=Object.prototype,b=E.hasOwnProperty,S="function"==typeof Symbol?Symbol:{},O=S.iterator||"@@iterator",V=S.asyncIterator||"@@asyncIterator",L=S.toStringTag||"@@toStringTag";function ee(B,H,G,re){var Ue,Be,Ie,Ae,me=Object.create((H&&H.prototype instanceof Ve?H:Ve).prototype),Re=new se(re||[]);return me._invoke=(Ue=B,Be=G,Ie=Re,Ae="suspendedStart",function(je,ke){if("executing"===Ae)throw new Error("Generator is already running");if("completed"===Ae){if("throw"===je)throw ke;return{value:void 0,done:!0}}for(Ie.method=je,Ie.arg=ke;;){var In=Ie.delegate;if(In){var un=ge(In,Ie);if(un){if(un===ue)continue;return un}}if("next"===Ie.method)Ie.sent=Ie._sent=Ie.arg;else if("throw"===Ie.method){if("suspendedStart"===Ae)throw Ae="completed",Ie.arg;Ie.dispatchException(Ie.arg)}else"return"===Ie.method&&Ie.abrupt("return",Ie.arg);Ae="executing";var $t=ie(Ue,Be,Ie);if("normal"===$t.type){if(Ae=Ie.done?"completed":"suspendedYield",$t.arg===ue)continue;return{value:$t.arg,done:Ie.done}}"throw"===$t.type&&(Ae="completed",Ie.method="throw",Ie.arg=$t.arg)}}),me}function ie(B,H,G){try{return{type:"normal",arg:B.call(H,G)}}catch(re){return{type:"throw",arg:re}}}p.wrap=ee;var ue={};function Ve(){}function we(){}function Me(){}var _e={};_e[O]=function(){return this};var X=Object.getPrototypeOf,j=X&&X(X(z([])));j&&j!==E&&b.call(j,O)&&(_e=j);var te=Me.prototype=Ve.prototype=Object.create(_e);function oe(B){["next","throw","return"].forEach(function(H){B[H]=function(G){return this._invoke(H,G)}})}function Ee(B,H){var G;this._invoke=function(re,ne){function me(){return new H(function(Re,Ue){!function Be(Ie,Ae,je,ke){var In=ie(B[Ie],B,Ae);if("throw"!==In.type){var un=In.arg,$t=un.value;return $t&&"object"==typeof $t&&b.call($t,"__await")?H.resolve($t.__await).then(function(qn){Be("next",qn,je,ke)},function(qn){Be("throw",qn,je,ke)}):H.resolve($t).then(function(qn){un.value=qn,je(un)},function(qn){return Be("throw",qn,je,ke)})}ke(In.arg)}(re,ne,Re,Ue)})}return G=G?G.then(me,me):me()}}function ge(B,H){var G=B.iterator[H.method];if(void 0===G){if(H.delegate=null,"throw"===H.method){if(B.iterator.return&&(H.method="return",H.arg=void 0,ge(B,H),"throw"===H.method))return ue;H.method="throw",H.arg=new TypeError("The iterator does not provide a 'throw' method")}return ue}var re=ie(G,B.iterator,H.arg);if("throw"===re.type)return H.method="throw",H.arg=re.arg,H.delegate=null,ue;var ne=re.arg;return ne?ne.done?(H[B.resultName]=ne.value,H.next=B.nextLoc,"return"!==H.method&&(H.method="next",H.arg=void 0),H.delegate=null,ue):ne:(H.method="throw",H.arg=new TypeError("iterator result is not an object"),H.delegate=null,ue)}function Z(B){var H={tryLoc:B[0]};1 in B&&(H.catchLoc=B[1]),2 in B&&(H.finallyLoc=B[2],H.afterLoc=B[3]),this.tryEntries.push(H)}function Y(B){var H=B.completion||{};H.type="normal",delete H.arg,B.completion=H}function se(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(Z,this),this.reset(!0)}function z(B){if(B){var H=B[O];if(H)return H.call(B);if("function"==typeof B.next)return B;if(!isNaN(B.length)){var G=-1,re=function ne(){for(;++G<B.length;)if(b.call(B,G))return ne.value=B[G],ne.done=!1,ne;return ne.value=void 0,ne.done=!0,ne};return re.next=re}}return{next:fe}}function fe(){return{value:void 0,done:!0}}return we.prototype=te.constructor=Me,Me.constructor=we,Me[L]=we.displayName="GeneratorFunction",p.isGeneratorFunction=function(B){var H="function"==typeof B&&B.constructor;return!!H&&(H===we||"GeneratorFunction"===(H.displayName||H.name))},p.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,Me):(B.__proto__=Me,L in B||(B[L]="GeneratorFunction")),B.prototype=Object.create(te),B},p.awrap=function(B){return{__await:B}},oe(Ee.prototype),Ee.prototype[V]=function(){return this},p.AsyncIterator=Ee,p.async=function(B,H,G,re,ne){void 0===ne&&(ne=Promise);var me=new Ee(ee(B,H,G,re),ne);return p.isGeneratorFunction(H)?me:me.next().then(function(Re){return Re.done?Re.value:me.next()})},oe(te),te[L]="Generator",te[O]=function(){return this},te.toString=function(){return"[object Generator]"},p.keys=function(B){var H=[];for(var G in B)H.push(G);return H.reverse(),function re(){for(;H.length;){var ne=H.pop();if(ne in B)return re.value=ne,re.done=!1,re}return re.done=!0,re}},p.values=z,se.prototype={constructor:se,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!B)for(var H in this)"t"===H.charAt(0)&&b.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=void 0)},stop:function(){this.done=!0;var B=this.tryEntries[0].completion;if("throw"===B.type)throw B.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var H=this;function G(Be,Ie){return me.type="throw",me.arg=B,H.next=Be,Ie&&(H.method="next",H.arg=void 0),!!Ie}for(var re=this.tryEntries.length-1;re>=0;--re){var ne=this.tryEntries[re],me=ne.completion;if("root"===ne.tryLoc)return G("end");if(ne.tryLoc<=this.prev){var Re=b.call(ne,"catchLoc"),Ue=b.call(ne,"finallyLoc");if(Re&&Ue){if(this.prev<ne.catchLoc)return G(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return G(ne.finallyLoc)}else if(Re){if(this.prev<ne.catchLoc)return G(ne.catchLoc,!0)}else{if(!Ue)throw new Error("try statement without catch or finally");if(this.prev<ne.finallyLoc)return G(ne.finallyLoc)}}}},abrupt:function(B,H){for(var G=this.tryEntries.length-1;G>=0;--G){var re=this.tryEntries[G];if(re.tryLoc<=this.prev&&b.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var ne=re;break}}ne&&("break"===B||"continue"===B)&&ne.tryLoc<=H&&H<=ne.finallyLoc&&(ne=null);var me=ne?ne.completion:{};return me.type=B,me.arg=H,ne?(this.method="next",this.next=ne.finallyLoc,ue):this.complete(me)},complete:function(B,H){if("throw"===B.type)throw B.arg;return"break"===B.type||"continue"===B.type?this.next=B.arg:"return"===B.type?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):"normal"===B.type&&H&&(this.next=H),ue},finish:function(B){for(var H=this.tryEntries.length-1;H>=0;--H){var G=this.tryEntries[H];if(G.finallyLoc===B)return this.complete(G.completion,G.afterLoc),Y(G),ue}},catch:function(B){for(var H=this.tryEntries.length-1;H>=0;--H){var G=this.tryEntries[H];if(G.tryLoc===B){var re=G.completion;if("throw"===re.type){var ne=re.arg;Y(G)}return ne}}throw new Error("illegal catch attempt")},delegateYield:function(B,H,G){return this.delegate={iterator:z(B),resultName:H,nextLoc:G},"next"===this.method&&(this.arg=void 0),ue}},p}(g.exports);try{regeneratorRuntime=f}catch(p){Function("r","regeneratorRuntime = r")(f)}},function(g,x,l){var f=l(230),p=l(240);g.exports=function(E,b){return f(E,b,function(S,O){return p(E,O)})}},function(g,x,l){var f=l(231),p=l(239),E=l(32);g.exports=function(b,S,O){for(var V=-1,L=S.length,ee={};++V<L;){var ie=S[V],ue=f(b,ie);O(ue,ie)&&p(ee,E(ie,b),ue)}return ee}},function(g,x,l){var f=l(32),p=l(43);g.exports=function(E,b){for(var S=0,O=(b=f(b,E)).length;null!=E&&S<O;)E=E[p(b[S++])];return S&&S==O?E:void 0}},function(g,x,l){var f=l(14),p=l(42),E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,b=/^\w*$/;g.exports=function(S,O){if(f(S))return!1;var V=typeof S;return!("number"!=V&&"symbol"!=V&&"boolean"!=V&&null!=S&&!p(S))||b.test(S)||!E.test(S)||null!=O&&S in Object(O)}},function(g,x,l){var f=l(234),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,b=f(function(S){var O=[];return 46===S.charCodeAt(0)&&O.push(""),S.replace(p,function(V,L,ee,ie){O.push(ee?ie.replace(E,"$1"):L||V)}),O});g.exports=b},function(g,x,l){var f=l(235);g.exports=function(p){var E=f(p,function(S){return 500===b.size&&b.clear(),S}),b=E.cache;return E}},function(g,x,l){var f=l(47);function p(E,b){if("function"!=typeof E||null!=b&&"function"!=typeof b)throw new TypeError("Expected a function");var S=function(){var O=arguments,V=b?b.apply(this,O):O[0],L=S.cache;if(L.has(V))return L.get(V);var ee=E.apply(this,O);return S.cache=L.set(V,ee)||L,ee};return S.cache=new(p.Cache||f),S}p.Cache=f,g.exports=p},function(g,x,l){var f=l(237);g.exports=function(p){return null==p?"":f(p)}},function(g,x,l){var f=l(27),p=l(238),E=l(14),b=l(42),S=f?f.prototype:void 0,O=S?S.toString:void 0;g.exports=function V(L){if("string"==typeof L)return L;if(E(L))return p(L,V)+"";if(b(L))return O?O.call(L):"";var ee=L+"";return"0"==ee&&1/L==-1/0?"-0":ee}},function(g,x){g.exports=function(l,f){for(var p=-1,E=null==l?0:l.length,b=Array(E);++p<E;)b[p]=f(l[p],p,l);return b}},function(g,x,l){var f=l(55),p=l(32),E=l(31),b=l(13),S=l(43);g.exports=function(O,V,L,ee){if(!b(O))return O;for(var ie=-1,ue=(V=p(V,O)).length,Ve=ue-1,we=O;null!=we&&++ie<ue;){var Me=S(V[ie]),_e=L;if("__proto__"===Me||"constructor"===Me||"prototype"===Me)return O;if(ie!=Ve){var X=we[Me];void 0===(_e=ee?ee(X,Me,we):void 0)&&(_e=b(X)?X:E(V[ie+1])?[]:{})}f(we,Me,_e),we=we[Me]}return O}},function(g,x,l){var f=l(241),p=l(242);g.exports=function(E,b){return null!=E&&p(E,b,f)}},function(g,x){g.exports=function(l,f){return null!=l&&f in Object(l)}},function(g,x,l){var f=l(32),p=l(30),E=l(14),b=l(31),S=l(40),O=l(43);g.exports=function(V,L,ee){for(var ie=-1,ue=(L=f(L,V)).length,Ve=!1;++ie<ue;){var we=O(L[ie]);if(!(Ve=null!=V&&ee(V,we)))break;V=V[we]}return Ve||++ie!=ue?Ve:!!(ue=null==V?0:V.length)&&S(ue)&&b(we,ue)&&(E(V)||p(V))}},function(g,x,l){var f=l(244),p=l(58),E=l(59);g.exports=function(b){return E(p(b,void 0,f),b+"")}},function(g,x,l){var f=l(245);g.exports=function(p){return null!=p&&p.length?f(p,1):[]}},function(g,x,l){var f=l(246),p=l(247);g.exports=function E(b,S,O,V,L){var ee=-1,ie=b.length;for(O||(O=p),L||(L=[]);++ee<ie;){var ue=b[ee];S>0&&O(ue)?S>1?E(ue,S-1,O,V,L):f(L,ue):V||(L[L.length]=ue)}return L}},function(g,x){g.exports=function(l,f){for(var p=-1,E=f.length,b=l.length;++p<E;)l[b+p]=f[p];return l}},function(g,x,l){var f=l(27),p=l(30),E=l(14),b=f?f.isConcatSpreadable:void 0;g.exports=function(S){return E(S)||p(S)||!!(b&&S&&S[b])}},function(g,x){g.exports=function(l){return-1!==Function.toString.call(l).indexOf("[native code]")},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x,l){var f=l(41),p=l(250);function E(b,S,O){return p()?(g.exports=E=Reflect.construct,g.exports.default=g.exports,g.exports.__esModule=!0):(g.exports=E=function(V,L,ee){var ie=[null];ie.push.apply(ie,L);var ue=new(Function.bind.apply(V,ie));return ee&&f(ue,ee.prototype),ue},g.exports.default=g.exports,g.exports.__esModule=!0),E.apply(null,arguments)}g.exports=E,g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}},g.exports.default=g.exports,g.exports.__esModule=!0},function(g,x){g.exports=function(l){return l[0]*l[3]-l[2]*l[1]}},function(g,x){g.exports=function(l,f){if(l===f){var p=f[1];l[1]=f[2],l[2]=p}else l[0]=f[0],l[1]=f[2],l[2]=f[1],l[3]=f[3];return l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2],O=f[3],V=p[0],L=p[1],ee=p[2],ie=p[3];return l[0]=E*V+S*L,l[1]=b*V+O*L,l[2]=E*ee+S*ie,l[3]=b*ee+O*ie,l}},function(g,x){g.exports=function(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l}},function(g,x){g.exports=function(l,f){var p=f[0];return l[0]=f[3],l[1]=-f[1],l[2]=-f[2],l[3]=p,l}},function(g,x){g.exports=function(l,f,p){var E=f[0],b=f[1],S=f[2],O=f[3],V=Math.sin(p),L=Math.cos(p);return l[0]=E*L+S*V,l[1]=b*L+O*V,l[2]=E*-V+S*L,l[3]=b*-V+O*L,l}},function(g,x){g.exports=function(l,f){var p=f[0],E=f[1],b=f[2],S=f[3],O=p*S-b*E;return O?(l[0]=S*(O=1/O),l[1]=-E*O,l[2]=-b*O,l[3]=p*O,l):null}},function(g,x){g.exports=function(){var l=new Float32Array(4);return l[0]=1,l[1]=0,l[2]=0,l[3]=1,l}},function(g,x){g.exports=function(l,f,p){var b=f[1],S=f[2],O=f[3],V=p[0],L=p[1];return l[0]=f[0]*V,l[1]=b*V,l[2]=S*L,l[3]=O*L,l}},function(g,x){g.exports=function(l,f){return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l}},function(g,x){g.exports=function(l){return Math.sqrt(Math.pow(l[0],2)+Math.pow(l[1],2)+Math.pow(l[2],2)+Math.pow(l[3],2))}},function(g,x){g.exports=function(l,f,p,E){return l[2]=E[2]/E[0],p[0]=E[0],p[1]=E[1],p[3]=E[3]-l[2]*p[1],[l,f,p]}},function(g,x,l){"use strict";l.r(x),l.d(x,"BarcodeDecoder",function(){return qr}),l.d(x,"Readers",function(){return f}),l.d(x,"CameraAccess",function(){return Kn}),l.d(x,"ImageDebug",function(){return ue.a}),l.d(x,"ImageWrapper",function(){return O.a}),l.d(x,"ResultCollector",function(){return Ap});var f={};l.r(f),l.d(f,"BarcodeReader",function(){return B}),l.d(f,"TwoOfFiveReader",function(){return Bl}),l.d(f,"NewCodabarReader",function(){return _v}),l.d(f,"Code128Reader",function(){return G}),l.d(f,"Code32Reader",function(){return Cp}),l.d(f,"Code39Reader",function(){return Ds}),l.d(f,"Code39VINReader",function(){return gv}),l.d(f,"Code93Reader",function(){return Ep}),l.d(f,"EAN2Reader",function(){return pp}),l.d(f,"EAN5Reader",function(){return yv}),l.d(f,"EAN8Reader",function(){return fp}),l.d(f,"EANReader",function(){return je}),l.d(f,"I2of5Reader",function(){return Vl}),l.d(f,"UPCEReader",function(){return Ll}),l.d(f,"UPCReader",function(){return hp});var p=l(19),E=l.n(p),b=l(16),S=l.n(b),O=(l(152),l(10)),V={},L_UP=1,L_DOWN=-1;V.getBarcodeLine=function(D,k,C){var _,v,w,I,A,M=0|k.x,R=0|k.y,F=0|C.x,q=0|C.y,W=Math.abs(q-R)>Math.abs(F-M),ye=[],Le=D.data,Oe=D.size.x,Ye=255,pt=0;function $e(dr,Ov){Ye=(A=Le[Ov*Oe+dr])<Ye?A:Ye,pt=A>pt?A:pt,ye.push(A)}W&&(w=M,M=R,R=w,w=F,F=q,q=w),M>F&&(w=M,M=F,F=w,w=R,R=q,q=w);var It=F-M,mn=Math.abs(q-R);_=It/2|0,v=R;var Kr=R<q?1:-1;for(I=M;I<F;I++)W?$e(v,I):$e(I,v),(_-=mn)<0&&(v+=Kr,_+=It);return{line:ye,min:Ye,max:pt}},V.toBinaryLine=function(D){var k,C,_,v,w,I,A=D.min,M=D.max,R=D.line,F=A+(M-A)/2,q=[],W=(M-A)/12,ye=-W;for(_=R[0]>F?L_UP:L_DOWN,q.push({pos:0,val:R[0]}),w=0;w<R.length-2;w++)_!==(v=(k=R[w+1]-R[w])+(C=R[w+2]-R[w+1])<ye&&R[w+1]<1.5*F?L_DOWN:k+C>W&&R[w+1]>.5*F?L_UP:_)&&(q.push({pos:w,val:R[w]}),_=v);for(q.push({pos:R.length,val:R[R.length-1]}),I=q[0].pos;I<q[1].pos;I++)R[I]=R[I]>F?0:1;for(w=1;w<q.length-1;w++)for(W=q[w+1].val>q[w].val?q[w].val+(q[w+1].val-q[w].val)/3*2|0:q[w+1].val+(q[w].val-q[w+1].val)/3|0,I=q[w].pos;I<q[w+1].pos;I++)R[I]=R[I]>W?0:1;return{line:R,threshold:W}},V.debug={printFrequency:function(D,k){var C,_=k.getContext("2d");for(k.width=D.length,k.height=256,_.beginPath(),_.strokeStyle="blue",C=0;C<D.length;C++)_.moveTo(C,255),_.lineTo(C,255-D[C]);_.stroke(),_.closePath()},printPattern:function(D,k){var C,_=k.getContext("2d");for(k.width=D.length,_.fillColor="black",C=0;C<D.length;C++)1===D[C]&&_.fillRect(C,0,1,100)}};var ee,D,ie=V,ue=l(15),Ve=l(3),we=l.n(Ve),Me=l(4),_e=l.n(Me),X=l(1),j=l.n(X),te=l(6),oe=l.n(te),Ee=l(5),ge=l.n(Ee),Z=l(2),Y=l.n(Z),se=l(0),z=l.n(se),fe=l(8);(D=ee||(ee={}))[D.Forward=1]="Forward",D[D.Reverse=-1]="Reverse";var B=function(){function D(k,C){return we()(this,D),z()(this,"_row",[]),z()(this,"config",{}),z()(this,"supplements",[]),z()(this,"SINGLE_CODE_ERROR",0),z()(this,"FORMAT","unknown"),z()(this,"CONFIG_KEYS",{}),this._row=[],this.config=k||{},C&&(this.supplements=C),this}return _e()(D,[{key:"_nextUnset",value:function(k){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_<k.length;_++)if(!k[_])return _;return k.length}},{key:"_matchPattern",value:function(k,C,_){var v,w=0,I=0,A=0,M=0,F=0;_=_||this.SINGLE_CODE_ERROR||1;for(var q=0;q<k.length;q++)A+=k[q],M+=C[q];if(A<M)return Number.MAX_VALUE;_*=v=A/M;for(var W=0;W<k.length;W++){if(F=C[W]*v,(I=Math.abs(k[W]-F)/F)>_)return Number.MAX_VALUE;w+=I}return w/M}},{key:"_nextSet",value:function(k){for(var _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_<k.length;_++)if(k[_])return _;return k.length}},{key:"_correctBars",value:function(k,C,_){for(var v=_.length,w=0;v--;)(w=k[_[v]]*(1-(1-C)/2))>1&&(k[_[v]]=w)}},{key:"decodePattern",value:function(k){this._row=k;var C=this.decode();return null===C?(this._row.reverse(),(C=this.decode())&&(C.direction=ee.Reverse,C.start=this._row.length-C.start,C.end=this._row.length-C.end)):C.direction=ee.Forward,C&&(C.format=this.FORMAT),C}},{key:"_matchRange",value:function(k,C,_){var v;for(v=k=k<0?0:k;v<C;v++)if(this._row[v]!==_)return!1;return!0}},{key:"_fillCounters",value:function(){var k=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._nextUnset(this._row),C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._row.length,_=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],v=[],w=0;v[w]=0;for(var I=k;I<C;I++)this._row[I]^(_?1:0)?v[w]++:(v[++w]=1,_=!_);return v}},{key:"_toCounters",value:function(k,C){var _=C.length,v=this._row.length,w=!this._row[k],I=0;fe.a.init(C,0);for(var A=k;A<v;A++)if(this._row[A]^(w?1:0))C[I]++;else{if(++I===_)break;C[I]=1,w=!w}return C}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}]),D}();var G=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"CODE_SHIFT",98),z()(j()(_),"CODE_C",99),z()(j()(_),"CODE_B",100),z()(j()(_),"CODE_A",101),z()(j()(_),"START_CODE_A",103),z()(j()(_),"START_CODE_B",104),z()(j()(_),"START_CODE_C",105),z()(j()(_),"STOP_CODE",106),z()(j()(_),"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),z()(j()(_),"SINGLE_CODE_ERROR",.64),z()(j()(_),"AVG_CODE_ERROR",.3),z()(j()(_),"FORMAT","code_128"),z()(j()(_),"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),_}return _e()(C,[{key:"_decodeCode",value:function(_,v){for(var w={error:Number.MAX_VALUE,code:-1,start:_,end:_,correction:{bar:1,space:1}},I=[0,0,0,0,0,0],M=!this._row[_],R=0,F=_;F<this._row.length;F++)if(this._row[F]^(M?1:0))I[R]++;else{if(R===I.length-1){v&&this._correct(I,v);for(var q=0;q<this.CODE_PATTERN.length;q++){var W=this._matchPattern(I,this.CODE_PATTERN[q]);W<w.error&&(w.code=q,w.error=W)}return w.end=F,-1===w.code||w.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[w.code]&&(w.correction.bar=this.calculateCorrection(this.CODE_PATTERN[w.code],I,this.MODULE_INDICES.bar),w.correction.space=this.calculateCorrection(this.CODE_PATTERN[w.code],I,this.MODULE_INDICES.space)),w)}I[++R]=1,M=!M}return null}},{key:"_correct",value:function(_,v){this._correctBars(_,v.bar,this.MODULE_INDICES.bar),this._correctBars(_,v.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var _=[0,0,0,0,0,0],v=this._nextSet(this._row),w={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},I=!1,A=0,M=v;M<this._row.length;M++)if(this._row[M]^(I?1:0))_[A]++;else{if(A===_.length-1){for(var R=_.reduce(function(ye,Le){return ye+Le},0),F=this.START_CODE_A;F<=this.START_CODE_C;F++){var q=this._matchPattern(_,this.CODE_PATTERN[F]);q<w.error&&(w.code=F,w.error=q)}if(w.error<this.AVG_CODE_ERROR)return w.start=M-R,w.end=M,w.correction.bar=this.calculateCorrection(this.CODE_PATTERN[w.code],_,this.MODULE_INDICES.bar),w.correction.space=this.calculateCorrection(this.CODE_PATTERN[w.code],_,this.MODULE_INDICES.space),w;for(var W=0;W<4;W++)_[W]=_[W+2];_[4]=0,_[5]=0,A--}else A++;_[A]=1,I=!I}return null}},{key:"decode",value:function(_,v){var w=this,I=this._findStart();if(null===I)return null;var A={code:I.code,start:I.start,end:I.end,correction:{bar:I.correction.bar,space:I.correction.space}},M=[];M.push(A);for(var R=A.code,F=function($e){switch($e){case w.START_CODE_A:return w.CODE_A;case w.START_CODE_B:return w.CODE_B;case w.START_CODE_C:return w.CODE_C;default:return null}}(A.code),q=!1,W=!1,ye=W,Le=!0,Oe=0,Ye=[],pt=[];!q;){if(ye=W,W=!1,null!==(A=this._decodeCode(A.end,A.correction)))switch(A.code!==this.STOP_CODE&&(Le=!0),A.code!==this.STOP_CODE&&(Ye.push(A.code),R+=++Oe*A.code),M.push(A),F){case this.CODE_A:if(A.code<64)pt.push(String.fromCharCode(32+A.code));else if(A.code<96)pt.push(String.fromCharCode(A.code-64));else switch(A.code!==this.STOP_CODE&&(Le=!1),A.code){case this.CODE_SHIFT:W=!0,F=this.CODE_B;break;case this.CODE_B:F=this.CODE_B;break;case this.CODE_C:F=this.CODE_C;break;case this.STOP_CODE:q=!0}break;case this.CODE_B:if(A.code<96)pt.push(String.fromCharCode(32+A.code));else switch(A.code!==this.STOP_CODE&&(Le=!1),A.code){case this.CODE_SHIFT:W=!0,F=this.CODE_A;break;case this.CODE_A:F=this.CODE_A;break;case this.CODE_C:F=this.CODE_C;break;case this.STOP_CODE:q=!0}break;case this.CODE_C:if(A.code<100)pt.push(A.code<10?"0"+A.code:A.code);else switch(A.code!==this.STOP_CODE&&(Le=!1),A.code){case this.CODE_A:F=this.CODE_A;break;case this.CODE_B:F=this.CODE_B;break;case this.STOP_CODE:q=!0}}else q=!0;ye&&(F=F===this.CODE_A?this.CODE_B:this.CODE_A)}return null===A?null:(A.end=this._nextUnset(this._row,A.end),this._verifyTrailingWhitespace(A)?(R-=Oe*Ye[Ye.length-1])%103!==Ye[Ye.length-1]?null:pt.length?(Le&&pt.splice(pt.length-1,1),{code:pt.join(""),start:I.start,end:A.end,codeset:F,startInfo:I,decodedCodes:M,endInfo:A,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(_){var v;return(v=_.end+(_.end-_.start)/2)<this._row.length&&this._matchRange(_.end,v,0)?_:null}},{key:"calculateCorrection",value:function(_,v,w){for(var I=w.length,A=0,M=0;I--;)M+=_[w[I]],A+=v[w[I]];return M/A}}]),C}(B);function re(D,k){var C=Object.keys(D);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(D);k&&(_=_.filter(function(v){return Object.getOwnPropertyDescriptor(D,v).enumerable})),C.push.apply(C,_)}return C}function ne(D){for(var k=1;k<arguments.length;k++){var C=null!=arguments[k]?arguments[k]:{};k%2?re(Object(C),!0).forEach(function(_){z()(D,_,C[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(C)):re(Object(C)).forEach(function(_){Object.defineProperty(D,_,Object.getOwnPropertyDescriptor(C,_))})}return D}var Re=[1,1,1],Ue=[1,1,1,1,1],Be=[1,1,2],Ie=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],Ae=[0,11,13,14,19,25,28,21,22,26],je=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(_,v){var w;return we()(this,C),w=k.call(this,S()({supplements:[]},_),v),z()(j()(w),"FORMAT","ean_13"),z()(j()(w),"SINGLE_CODE_ERROR",.7),z()(j()(w),"STOP_PATTERN",[1,1,1]),w}return _e()(C,[{key:"_findPattern",value:function(_,v,w,I){var A=new Array(_.length).fill(0),M={error:Number.MAX_VALUE,start:0,end:0},R=0;v||(v=this._nextSet(this._row));for(var F=!1,q=v;q<this._row.length;q++)if(this._row[q]^(w?1:0))A[R]+=1;else{if(R===A.length-1){var W=this._matchPattern(A,_);if(W<.48&&M.error&&W<M.error)return F=!0,M.error=W,M.start=q-A.reduce(function(Le,Oe){return Le+Oe},0),M.end=q,M;if(I){for(var ye=0;ye<A.length-2;ye++)A[ye]=A[ye+2];A[A.length-2]=0,A[A.length-1]=0,R--}}else R++;A[R]=1,w=!w}return F?M:null}},{key:"_decodeCode",value:function(_,v){var w=[0,0,0,0],A={error:Number.MAX_VALUE,code:-1,start:_,end:_},M=!this._row[_],R=0;v||(v=Ie.length);for(var F=_;F<this._row.length;F++)if(this._row[F]^(M?1:0))w[R]++;else{if(R===w.length-1){for(var q=0;q<v;q++){var W=this._matchPattern(w,Ie[q]);A.end=F,W<A.error&&(A.code=q,A.error=W)}return A.error>.48?null:A}w[++R]=1,M=!M}return null}},{key:"_findStart",value:function(){for(var _=this._nextSet(this._row),v=null;!v;){if(!(v=this._findPattern(Re,_,!1,!0)))return null;var w=v.start-(v.end-v.start);if(w>=0&&this._matchRange(w,v.start,0))return v;_=v.end,v=null}return null}},{key:"_calculateFirstDigit",value:function(_){for(var v=0;v<Ae.length;v++)if(_===Ae[v])return v;return null}},{key:"_decodePayload",value:function(_,v,w){for(var I=ne({},_),A=0,M=0;M<6;M++){if(!(I=this._decodeCode(I.end)))return null;I.code>=10?(I.code-=10,A|=1<<5-M):A|=0<<5-M,v.push(I.code),w.push(I)}var R=this._calculateFirstDigit(A);if(null===R)return null;v.unshift(R);var F=this._findPattern(Ue,I.end,!0,!1);if(null===F||!F.end)return null;w.push(F);for(var q=0;q<6;q++){if(!(F=this._decodeCode(F.end,10)))return null;w.push(F),v.push(F.code)}return F}},{key:"_verifyTrailingWhitespace",value:function(_){var v=_.end+(_.end-_.start);return v<this._row.length&&this._matchRange(_.end,v,0)?_:null}},{key:"_findEnd",value:function(_,v){var w=this._findPattern(this.STOP_PATTERN,_,v,!1);return null!==w?this._verifyTrailingWhitespace(w):null}},{key:"_checksum",value:function(_){for(var v=0,w=_.length-2;w>=0;w-=2)v+=_[w];v*=3;for(var I=_.length-1;I>=0;I-=2)v+=_[I];return v%10==0}},{key:"_decodeExtensions",value:function(_){var v=this._nextSet(this._row,_),w=this._findPattern(Be,v,!1,!1);if(null===w)return null;for(var I=0;I<this.supplements.length;I++)try{var A=this.supplements[I].decode(this._row,w.end);if(null!==A)return{code:A.code,start:v,startInfo:w,end:A.end,decodedCodes:A.decodedCodes,format:this.supplements[I].FORMAT}}catch(M){console.error("* decodeExtensions error in ",this.supplements[I],": ",M)}return null}},{key:"decode",value:function(_,v){var w=new Array,I=new Array,A={},M=this._findStart();if(!M)return null;var R={start:M.start,end:M.end};if(I.push(R),!(R=this._decodePayload(R,w,I))||!(R=this._findEnd(R.end,!1))||(I.push(R),!this._checksum(w)))return null;if(this.supplements.length>0){var F=this._decodeExtensions(R.end);if(!F||!F.decodedCodes)return null;var q=F.decodedCodes[F.decodedCodes.length-1];if(!this._verifyTrailingWhitespace({start:q.start+((q.end-q.start)/2|0),end:q.end}))return null;A={supplement:F,code:w.join("")+F.code}}return ne(ne({code:w.join(""),start:M.start,end:R.end,startInfo:M,decodedCodes:I},A),{},{format:this.FORMAT})}}]),C}(B),ke=l(33),In=l.n(ke);var $t=new Uint16Array(In()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map(function(D){return D.charCodeAt(0)})),qn=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Ds=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","code_39"),_}return _e()(C,[{key:"_findStart",value:function(){for(var _=this._nextSet(this._row),v=_,w=new Uint16Array([0,0,0,0,0,0,0,0,0]),I=0,A=!1,M=_;M<this._row.length;M++)if(this._row[M]^(A?1:0))w[I]++;else{if(I===w.length-1){if(148===this._toPattern(w)){var R=Math.floor(Math.max(0,v-(M-v)/4));if(this._matchRange(R,v,0))return{start:v,end:M}}v+=w[0]+w[1];for(var F=0;F<7;F++)w[F]=w[F+2];w[7]=0,w[8]=0,I--}else I++;w[I]=1,A=!A}return null}},{key:"_toPattern",value:function(_){for(var v=_.length,w=0,I=v,A=0;I>3;){w=this._findNextWidth(_,w),I=0;for(var M=0,R=0;R<v;R++)_[R]>w&&(M|=1<<v-1-R,I++,A+=_[R]);if(3===I){for(var F=0;F<v&&I>0;F++)if(_[F]>w&&(I--,2*_[F]>=A))return-1;return M}}return-1}},{key:"_findNextWidth",value:function(_,v){for(var w=Number.MAX_VALUE,I=0;I<_.length;I++)_[I]<w&&_[I]>v&&(w=_[I]);return w}},{key:"_patternToChar",value:function(_){for(var v=0;v<qn.length;v++)if(qn[v]===_)return String.fromCharCode($t[v]);return null}},{key:"_verifyTrailingWhitespace",value:function(_,v,w){var I=fe.a.sum(w);return 3*(v-_-I)>=I}},{key:"decode",value:function(_,v){var w=new Uint16Array([0,0,0,0,0,0,0,0,0]),I=[];if(!(v=this._findStart()))return null;var A,M,R=this._nextSet(this._row,v.end);do{w=this._toCounters(R,w);var F=this._toPattern(w);if(F<0||null===(A=this._patternToChar(F)))return null;I.push(A),M=R,R+=fe.a.sum(w),R=this._nextSet(this._row,R)}while("*"!==A);return I.pop(),I.length&&this._verifyTrailingWhitespace(M,R,w)?{code:I.join(""),start:v.start,end:R,startInfo:v,decodedCodes:I,format:this.FORMAT}:null}}]),C}(B),sM=l(12),bu=l.n(sM);var oM=/[IOQ]/g,cp=/[A-Z0-9]{17}/,gv=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","code_39_vin"),_}return _e()(C,[{key:"_checkChecksum",value:function(_){return!!_}},{key:"decode",value:function(_,v){var w=bu()(Y()(C.prototype),"decode",this).call(this,_,v);if(!w)return null;var I=w.code;return I&&(I=I.replace(oM,"")).match(cp)&&this._checkChecksum(I)?(w.code=I,w):null}}]),C}(Ds);var Pl=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],dp=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],mv=[26,41,11,14],_v=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"_counters",[]),z()(j()(_),"FORMAT","codabar"),_}return _e()(C,[{key:"_computeAlternatingThreshold",value:function(_,v){for(var w=Number.MAX_VALUE,I=0,A=0,M=_;M<v;M+=2)(A=this._counters[M])>I&&(I=A),A<w&&(w=A);return(w+I)/2|0}},{key:"_toPattern",value:function(_){var v=_+7;if(v>this._counters.length)return-1;for(var w=this._computeAlternatingThreshold(_,v),I=this._computeAlternatingThreshold(_+1,v),A=64,R=0,F=0;F<7;F++)this._counters[_+F]>(0==(1&F)?w:I)&&(R|=A),A>>=1;return R}},{key:"_isStartEnd",value:function(_){for(var v=0;v<mv.length;v++)if(mv[v]===_)return!0;return!1}},{key:"_sumCounters",value:function(_,v){for(var w=0,I=_;I<v;I++)w+=this._counters[I];return w}},{key:"_findStart",value:function(){for(var _=this._nextUnset(this._row),v=1;v<this._counters.length;v++){var w=this._toPattern(v);if(-1!==w&&this._isStartEnd(w))return{start:_+=this._sumCounters(0,v),end:_+this._sumCounters(v,v+8),startCounter:v,endCounter:v+8}}return null}},{key:"_patternToChar",value:function(_){for(var v=0;v<dp.length;v++)if(dp[v]===_)return String.fromCharCode(Pl[v]);return null}},{key:"_calculatePatternLength",value:function(_){for(var v=0,w=_;w<_+7;w++)v+=this._counters[w];return v}},{key:"_verifyWhitespace",value:function(_,v){return(_-1<=0||this._counters[_-1]>=this._calculatePatternLength(_)/2)&&(v+8>=this._counters.length||this._counters[v+7]>=this._calculatePatternLength(v)/2)}},{key:"_charToPattern",value:function(_){for(var v=_.charCodeAt(0),w=0;w<Pl.length;w++)if(Pl[w]===v)return dp[w];return 0}},{key:"_thresholdResultPattern",value:function(_,v){for(var w,I={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},A=v,M=0;M<_.length;M++){w=this._charToPattern(_[M]);for(var R=6;R>=0;R--){var F=2==(1&R)?I.bar:I.space,q=1==(1&w)?F.wide:F.narrow;q.size+=this._counters[A+R],q.counts++,w>>=1}A+=8}return["space","bar"].forEach(function(W){var ye=I[W];ye.wide.min=Math.floor((ye.narrow.size/ye.narrow.counts+ye.wide.size/ye.wide.counts)/2),ye.narrow.max=Math.ceil(ye.wide.min),ye.wide.max=Math.ceil((2*ye.wide.size+1.5)/ye.wide.counts)}),I}},{key:"_validateResult",value:function(_,v){for(var w,I=this._thresholdResultPattern(_,v),A=v,M=0;M<_.length;M++){w=this._charToPattern(_[M]);for(var R=6;R>=0;R--){var F=0==(1&R)?I.bar:I.space,q=1==(1&w)?F.wide:F.narrow,W=this._counters[A+R];if(W<q.min||W>q.max)return!1;w>>=1}A+=8}return!0}},{key:"decode",value:function(_,v){if(this._counters=this._fillCounters(),!(v=this._findStart()))return null;var w,I=v.startCounter,A=[];do{if((w=this._toPattern(I))<0)return null;var M=this._patternToChar(w);if(null===M)return null;if(A.push(M),I+=8,A.length>1&&this._isStartEnd(w))break}while(I<this._counters.length);if(A.length-2<4||!this._isStartEnd(w)||!this._verifyWhitespace(v.startCounter,I-8)||!this._validateResult(A,v.startCounter))return null;var R=v.start+this._sumCounters(v.startCounter,(I=I>this._counters.length?this._counters.length:I)-8);return{code:A.join(""),start:v.start,end:R,startInfo:v,decodedCodes:A,format:this.FORMAT}}}]),C}(B);var hp=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","upc_a"),_}return _e()(C,[{key:"decode",value:function(_,v){var w=je.prototype.decode.call(this);return w&&w.code&&13===w.code.length&&"0"===w.code.charAt(0)?(w.code=w.code.substring(1),w):null}}]),C}(je);var fp=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","ean_8"),_}return _e()(C,[{key:"_decodePayload",value:function(_,v,w){for(var I=_,A=0;A<4;A++){if(!(I=this._decodeCode(I.end,10)))return null;v.push(I.code),w.push(I)}if(null===(I=this._findPattern(Ue,I.end,!0,!1)))return null;w.push(I);for(var M=0;M<4;M++){if(!(I=this._decodeCode(I.end,10)))return null;w.push(I),v.push(I.code)}return I}}]),C}(je);var pp=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","ean_2"),_}return _e()(C,[{key:"decode",value:function(_,v){_&&(this._row=_);var w=0,I=v,A=this._row.length,M=[],R=[],F=null;if(void 0===I)return null;for(var q=0;q<2&&I<A;q++){if(!(F=this._decodeCode(I)))return null;R.push(F),M.push(F.code%10),F.code>=10&&(w|=1<<1-q),1!==q&&(I=this._nextSet(this._row,F.end),I=this._nextUnset(this._row,I))}if(2!==M.length||parseInt(M.join(""))%4!==w)return null;var W=this._findStart();return{code:M.join(""),decodedCodes:R,end:F.end,format:this.FORMAT,startInfo:W,start:W.start}}}]),C}(je);var lM=[24,20,18,17,12,6,3,10,9,5],yv=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","ean_5"),_}return _e()(C,[{key:"decode",value:function(_,v){if(void 0===v)return null;_&&(this._row=_);for(var w=0,I=v,A=this._row.length,M=null,R=[],F=[],q=0;q<5&&I<A;q++){if(!(M=this._decodeCode(I)))return null;F.push(M),R.push(M.code%10),M.code>=10&&(w|=1<<4-q),4!==q&&(I=this._nextSet(this._row,M.end),I=this._nextUnset(this._row,I))}if(5!==R.length||function(ye){for(var Le=ye.length,Oe=0,Ye=Le-2;Ye>=0;Ye-=2)Oe+=ye[Ye];Oe*=3;for(var pt=Le-1;pt>=0;pt-=2)Oe+=ye[pt];return(Oe*=3)%10}(R)!==function(ye){for(var Le=0;Le<10;Le++)if(ye===lM[Le])return Le;return null}(w))return null;var W=this._findStart();return{code:R.join(""),decodedCodes:F,end:M.end,format:this.FORMAT,startInfo:W,start:W.start}}}]),C}(je);function vv(D,k){var C=Object.keys(D);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(D);k&&(_=_.filter(function(v){return Object.getOwnPropertyDescriptor(D,v).enumerable})),C.push.apply(C,_)}return C}var Ll=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),z()(j()(_),"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),z()(j()(_),"FORMAT","upc_e"),_}return _e()(C,[{key:"_decodePayload",value:function(_,v,w){for(var I=function(R){for(var F=1;F<arguments.length;F++){var q=null!=arguments[F]?arguments[F]:{};F%2?vv(Object(q),!0).forEach(function(W){z()(R,W,q[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(q)):vv(Object(q)).forEach(function(W){Object.defineProperty(R,W,Object.getOwnPropertyDescriptor(q,W))})}return R}({},_),A=0,M=0;M<6;M++){if(!(I=this._decodeCode(I.end)))return null;I.code>=10&&(I.code=I.code-10,A|=1<<5-M),v.push(I.code),w.push(I)}return this._determineParity(A,v)?I:null}},{key:"_determineParity",value:function(_,v){for(var w=0;w<this.CODE_FREQUENCY.length;w++)for(var I=0;I<this.CODE_FREQUENCY[w].length;I++)if(_===this.CODE_FREQUENCY[w][I])return v.unshift(w),v.push(I),!0;return!1}},{key:"_convertToUPCA",value:function(_){var v=[_[0]],w=_[_.length-2];return(v=w<=2?v.concat(_.slice(1,3)).concat([w,0,0,0,0]).concat(_.slice(3,6)):3===w?v.concat(_.slice(1,4)).concat([0,0,0,0,0]).concat(_.slice(4,6)):4===w?v.concat(_.slice(1,5)).concat([0,0,0,0,0,_[5]]):v.concat(_.slice(1,6)).concat([0,0,0,0,w])).push(_[_.length-1]),v}},{key:"_checksum",value:function(_){return bu()(Y()(C.prototype),"_checksum",this).call(this,this._convertToUPCA(_))}},{key:"_findEnd",value:function(_,v){return bu()(Y()(C.prototype),"_findEnd",this).call(this,_,!0)}},{key:"_verifyTrailingWhitespace",value:function(_){var v=_.end+(_.end-_.start)/2;return v<this._row.length&&this._matchRange(_.end,v,0)?_:null}}]),C}(je);var Vl=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(_){var v;return we()(this,C),v=k.call(this,S()({normalizeBarSpaceWidth:!1},_)),z()(j()(v),"barSpaceRatio",[1,1]),z()(j()(v),"SINGLE_CODE_ERROR",.78),z()(j()(v),"AVG_CODE_ERROR",.38),z()(j()(v),"START_PATTERN",[1,1,1,1]),z()(j()(v),"STOP_PATTERN",[1,1,3]),z()(j()(v),"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),z()(j()(v),"MAX_CORRECTION_FACTOR",5),z()(j()(v),"FORMAT","i2of5"),_.normalizeBarSpaceWidth&&(v.SINGLE_CODE_ERROR=.38,v.AVG_CODE_ERROR=.09),v.config=_,ge()(v,j()(v))}return _e()(C,[{key:"_matchPattern",value:function(_,v){if(this.config.normalizeBarSpaceWidth){for(var w=[0,0],I=[0,0],A=[0,0],M=this.MAX_CORRECTION_FACTOR,R=1/M,F=0;F<_.length;F++)w[F%2]+=_[F],I[F%2]+=v[F];A[0]=I[0]/w[0],A[1]=I[1]/w[1],A[0]=Math.max(Math.min(A[0],M),R),A[1]=Math.max(Math.min(A[1],M),R),this.barSpaceRatio=A;for(var q=0;q<_.length;q++)_[q]*=this.barSpaceRatio[q%2]}return bu()(Y()(C.prototype),"_matchPattern",this).call(this,_,v)}},{key:"_findPattern",value:function(_,v){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=new Array(_.length).fill(0),M=0,R={error:Number.MAX_VALUE,start:0,end:0},F=this.AVG_CODE_ERROR;w=w||!1,I=I||!1,v||(v=this._nextSet(this._row));for(var q=v;q<this._row.length;q++)if(this._row[q]^(w?1:0))A[M]++;else{if(M===A.length-1){var W=A.reduce(function(Oe,Ye){return Oe+Ye},0),ye=this._matchPattern(A,_);if(ye<F)return R.error=ye,R.start=q-W,R.end=q,R;if(!I)return null;for(var Le=0;Le<A.length-2;Le++)A[Le]=A[Le+2];A[A.length-2]=0,A[A.length-1]=0,M--}else M++;A[M]=1,w=!w}return null}},{key:"_findStart",value:function(){for(var _=0,v=this._nextSet(this._row),w=null,I=1;!w;){if(!(w=this._findPattern(this.START_PATTERN,v,!1,!0)))return null;if(I=Math.floor((w.end-w.start)/4),(_=w.start-10*I)>=0&&this._matchRange(_,w.start,0))return w;v=w.end,w=null}return null}},{key:"_verifyTrailingWhitespace",value:function(_){var v=_.end+(_.end-_.start)/2;return v<this._row.length&&this._matchRange(_.end,v,0)?_:null}},{key:"_findEnd",value:function(){this._row.reverse();var _=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),null===_)return null;var v=_.start;return _.start=this._row.length-_.end,_.end=this._row.length-v,null!==_?this._verifyTrailingWhitespace(_):null}},{key:"_decodePair",value:function(_){for(var v=[],w=0;w<_.length;w++){var I=this._decodeCode(_[w]);if(!I)return null;v.push(I)}return v}},{key:"_decodeCode",value:function(_){for(var v=this.AVG_CODE_ERROR,w={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=0;I<this.CODE_PATTERN.length;I++){var A=this._matchPattern(_,this.CODE_PATTERN[I]);A<w.error&&(w.code=I,w.error=A)}return w.error<v?w:null}},{key:"_decodePayload",value:function(_,v,w){for(var I=0,A=_.length,M=[[0,0,0,0,0],[0,0,0,0,0]],R=null;I<A;){for(var F=0;F<5;F++)M[0][F]=_[I]*this.barSpaceRatio[0],M[1][F]=_[I+1]*this.barSpaceRatio[1],I+=2;if(!(R=this._decodePair(M)))return null;for(var q=0;q<R.length;q++)v.push(R[q].code+""),w.push(R[q])}return R}},{key:"_verifyCounterLength",value:function(_){return _.length%10==0}},{key:"decode",value:function(_,v){var w=new Array,I=new Array,A=this._findStart();if(!A)return null;I.push(A);var M=this._findEnd();if(!M)return null;var R=this._fillCounters(A.end,M.start,!1);return this._verifyCounterLength(R)&&this._decodePayload(R,w,I)?w.length%2!=0||w.length<6?null:(I.push(M),{code:w.join(""),start:A.start,end:M.end,startInfo:A,decodedCodes:I,format:this.FORMAT}):null}}]),C}(B);var _p=[3,1,3,1,1,1],yp=[3,1,1,1,3],Ul=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],vp=_p.reduce(function(D,k){return D+k},0),Bl=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"barSpaceRatio",[1,1]),z()(j()(_),"FORMAT","2of5"),z()(j()(_),"SINGLE_CODE_ERROR",.78),z()(j()(_),"AVG_CODE_ERROR",.3),_}return _e()(C,[{key:"_findPattern",value:function(_,v){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=arguments.length>3&&void 0!==arguments[3]&&arguments[3],A=[],M=0,R={error:Number.MAX_VALUE,code:-1,start:0,end:0},F=0,q=0,W=this.AVG_CODE_ERROR;v||(v=this._nextSet(this._row));for(var ye=0;ye<_.length;ye++)A[ye]=0;for(var Le=v;Le<this._row.length;Le++)if(this._row[Le]^(w?1:0))A[M]++;else{if(M===A.length-1){F=0;for(var Oe=0;Oe<A.length;Oe++)F+=A[Oe];if((q=this._matchPattern(A,_))<W)return R.error=q,R.start=Le-F,R.end=Le,R;if(!I)return null;for(var Ye=0;Ye<A.length-2;Ye++)A[Ye]=A[Ye+2];A[A.length-2]=0,A[A.length-1]=0,M--}else M++;A[M]=1,w=!w}return null}},{key:"_findStart",value:function(){for(var _=null,v=this._nextSet(this._row),w=1,I=0;!_;){if(!(_=this._findPattern(_p,v,!1,!0)))return null;if(w=Math.floor((_.end-_.start)/vp),(I=_.start-5*w)>=0&&this._matchRange(I,_.start,0))return _;v=_.end,_=null}return _}},{key:"_verifyTrailingWhitespace",value:function(_){var v=_.end+(_.end-_.start)/2;return v<this._row.length&&this._matchRange(_.end,v,0)?_:null}},{key:"_findEnd",value:function(){this._row.reverse();var _=this._nextSet(this._row),v=this._findPattern(yp,_,!1,!0);if(this._row.reverse(),null===v)return null;var w=v.start;return v.start=this._row.length-v.end,v.end=this._row.length-w,null!==v?this._verifyTrailingWhitespace(v):null}},{key:"_verifyCounterLength",value:function(_){return _.length%10==0}},{key:"_decodeCode",value:function(_){for(var v=this.AVG_CODE_ERROR,w={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=0;I<Ul.length;I++){var A=this._matchPattern(_,Ul[I]);A<w.error&&(w.code=I,w.error=A)}return w.error<v?w:null}},{key:"_decodePayload",value:function(_,v,w){for(var I=0,A=_.length,M=[0,0,0,0,0],R=null;I<A;){for(var F=0;F<5;F++)M[F]=_[I]*this.barSpaceRatio[0],I+=2;if(!(R=this._decodeCode(M)))return null;v.push("".concat(R.code)),w.push(R)}return R}},{key:"decode",value:function(_,v){var w=this._findStart();if(!w)return null;var I=this._findEnd();if(!I)return null;var A=this._fillCounters(w.end,I.start,!1);if(!this._verifyCounterLength(A))return null;var M=[];M.push(w);var R=[];return this._decodePayload(A,R,M)?R.length<5?null:(M.push(I),{code:R.join(""),start:w.start,end:I.end,startInfo:w,decodedCodes:M,format:this.FORMAT}):null}}]),C}(B);var jl=new Uint16Array(In()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map(function(D){return D.charCodeAt(0)})),wp=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),Ep=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","code_93"),_}return _e()(C,[{key:"_patternToChar",value:function(_){for(var v=0;v<wp.length;v++)if(wp[v]===_)return String.fromCharCode(jl[v]);return null}},{key:"_toPattern",value:function(_){for(var v=_.length,w=_.reduce(function(F,q){return F+q},0),I=0,A=0;A<v;A++){var M=Math.round(9*_[A]/w);if(M<1||M>4)return-1;if(0==(1&A))for(var R=0;R<M;R++)I=I<<1|1;else I<<=M}return I}},{key:"_findStart",value:function(){for(var _=this._nextSet(this._row),v=_,w=new Uint16Array([0,0,0,0,0,0]),I=0,A=!1,M=_;M<this._row.length;M++)if(this._row[M]^(A?1:0))w[I]++;else{if(I===w.length-1){if(350===this._toPattern(w)){var R=Math.floor(Math.max(0,v-(M-v)/4));if(this._matchRange(R,v,0))return{start:v,end:M}}v+=w[0]+w[1];for(var F=0;F<4;F++)w[F]=w[F+2];w[4]=0,w[5]=0,I--}else I++;w[I]=1,A=!A}return null}},{key:"_verifyEnd",value:function(_,v){return!(_===v||!this._row[v])}},{key:"_decodeExtended",value:function(_){for(var v=_.length,w=[],I=0;I<v;I++){var A=_[I];if(A>="a"&&A<="d"){if(I>v-2)return null;var M=_[++I],R=M.charCodeAt(0),F=void 0;switch(A){case"a":if(!(M>="A"&&M<="Z"))return null;F=String.fromCharCode(R-64);break;case"b":if(M>="A"&&M<="E")F=String.fromCharCode(R-38);else if(M>="F"&&M<="J")F=String.fromCharCode(R-11);else if(M>="K"&&M<="O")F=String.fromCharCode(R+16);else if(M>="P"&&M<="S")F=String.fromCharCode(R+43);else{if(!(M>="T"&&M<="Z"))return null;F=String.fromCharCode(127)}break;case"c":if(M>="A"&&M<="O")F=String.fromCharCode(R-32);else{if("Z"!==M)return null;F=":"}break;case"d":if(!(M>="A"&&M<="Z"))return null;F=String.fromCharCode(R+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",F),null}w.push(F)}else w.push(A)}return w}},{key:"_matchCheckChar",value:function(_,v,w){var I=_.slice(0,v),A=I.length,M=I.reduce(function(R,F,q){return R+((-1*q+(A-1))%w+1)*jl.indexOf(F.charCodeAt(0))},0);return jl[M%47]===_[v].charCodeAt(0)}},{key:"_verifyChecksums",value:function(_){return this._matchCheckChar(_,_.length-2,20)&&this._matchCheckChar(_,_.length-1,15)}},{key:"decode",value:function(_,v){if(!(v=this._findStart()))return null;var w,I,A=new Uint16Array([0,0,0,0,0,0]),M=[],R=this._nextSet(this._row,v.end);do{A=this._toCounters(R,A);var F=this._toPattern(A);if(F<0||null===(I=this._patternToChar(F)))return null;M.push(I),w=R,R+=fe.a.sum(A),R=this._nextSet(this._row,R)}while("*"!==I);return M.pop(),M.length&&this._verifyEnd(w,R)&&this._verifyChecksums(M)?(M=M.slice(0,M.length-2),null===(M=this._decodeExtended(M))?null:{code:M.join(""),start:v.start,end:R,startInfo:v,decodedCodes:M,format:this.FORMAT}):null}}]),C}(B);var bp=/[AEIO]/g,Cp=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(){var _;we()(this,C);for(var v=arguments.length,w=new Array(v),I=0;I<v;I++)w[I]=arguments[I];return _=k.call.apply(k,[this].concat(w)),z()(j()(_),"FORMAT","code_32_reader"),_}return _e()(C,[{key:"_decodeCode32",value:function(_){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(_))return null;for(var v=0,w=0;w<_.length;w++)v=32*v+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(_[w]);var I=""+v;return I.length<9&&(I=("000000000"+I).slice(-9)),"A"+I}},{key:"_checkChecksum",value:function(_){return!!_}},{key:"decode",value:function(_,v){var w=bu()(Y()(C.prototype),"decode",this).call(this,_,v);if(!w)return null;var I=w.code;if(!I||(I=I.replace(bp,""),!this._checkChecksum(I)))return null;var A=this._decodeCode32(I);return A?(w.code=A,w):null}}]),C}(Ds),sa={code_128_reader:G,ean_reader:je,ean_5_reader:yv,ean_2_reader:pp,ean_8_reader:fp,code_39_reader:Ds,code_39_vin_reader:gv,codabar_reader:_v,upc_reader:hp,upc_e_reader:Ll,i2of5_reader:Vl,"2of5_reader":Bl,code_93_reader:Ep,code_32_reader:Cp},qr={registerReader:function(D,k){sa[D]=k},create:function(D,k){var _=[];function v(){D.readers.forEach(function(A){var M,R={},F=[];"object"===E()(A)?(M=A.format,R=A.config):"string"==typeof A&&(M=A),R.supplements&&(F=R.supplements.map(function(W){return new sa[W]}));try{var q=new sa[M](R,F);_.push(q)}catch(W){throw console.error("* Error constructing reader ",M,W),W}})}function w(A){var M,R=null,F=ie.getBarcodeLine(k,A[0],A[1]);for(ie.toBinaryLine(F),M=0;M<_.length&&null===R;M++)R=_[M].decodePattern(F.line);return null===R?null:{codeResult:R,barcodeLine:F}}function I(A){var M,R,W,F=function(W){return Math.sqrt(Math.pow(Math.abs(W[1].y-W[0].y),2)+Math.pow(Math.abs(W[1].x-W[0].x),2))}(M=[{x:((W=A)[1][0]-W[0][0])/2+W[0][0],y:(W[1][1]-W[0][1])/2+W[0][1]},{x:(W[3][0]-W[2][0])/2+W[2][0],y:(W[3][1]-W[2][1])/2+W[2][1]}]),q=Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x);return null===(M=function(W,ye,Le){function Oe(Ye){var pt=Ye*Math.sin(ye),$e=Ye*Math.cos(ye);W[0].y-=pt,W[0].x-=$e,W[1].y+=pt,W[1].x+=$e}for(Oe(Le);Le>1&&(!k.inImageWithBorder(W[0])||!k.inImageWithBorder(W[1]));)Oe(-(Le-=Math.ceil(Le/2)));return W}(M,q,Math.floor(.1*F)))?null:(null===(R=w(M))&&(R=function(W,ye,Le){var Oe,Ye,pt,$e=Math.sqrt(Math.pow(W[1][0]-W[0][0],2)+Math.pow(W[1][1]-W[0][1],2)),It=null,mn=Math.sin(Le),Kr=Math.cos(Le);for(Oe=1;Oe<16&&null===It;Oe++)pt={y:(Ye=$e/16*Oe*(Oe%2==0?-1:1))*mn,x:Ye*Kr},ye[0].y+=pt.x,ye[0].x-=pt.y,ye[1].y+=pt.x,ye[1].x-=pt.y,It=w(ye);return It}(A,M,q)),null===R?null:{codeResult:R.codeResult,line:M,angle:q,pattern:R.barcodeLine.line,threshold:R.barcodeLine.threshold})}return v(),{decodeFromBoundingBox:function(A){return I(A)},decodeFromBoundingBoxes:function(A){var M,R,F=[],q=D.multiple;for(M=0;M<A.length;M++){var W=A[M];if((R=I(W)||{}).box=W,q)F.push(R);else if(R.codeResult)return R}if(q)return{barcodes:F}},decodeFromImage:function(A){return function(M){for(var R=null,F=0;F<_.length&&null===R;F++)R=_[F].decodeImage?_[F].decodeImage(M):null;return R}(A)},registerReader:function(A,M){if(sa[A])throw new Error("cannot register existing reader",A);sa[A]=M},setReaders:function(A){D.readers=A,_.length=0,v()}}}},xs=function(){var D={};function k(v){return D[v]||(D[v]={subscribers:[]}),D[v]}function C(v,w){v.async?setTimeout(function(){v.callback(w)},4):v.callback(w)}function _(v,w,I){var A;if("function"==typeof w)A={callback:w,async:I};else if(!(A=w).callback)throw new Error("Callback was not specified on options");k(v).subscribers.push(A)}return{subscribe:function(v,w,I){return _(v,w,I)},publish:function(v,w){var I=k(v),A=I.subscribers;A.filter(function(M){return!!M.once}).forEach(function(M){C(M,w)}),I.subscribers=A.filter(function(M){return!M.once}),I.subscribers.forEach(function(M){C(M,w)})},once:function(v,w){_(v,{callback:w,async:arguments.length>2&&void 0!==arguments[2]&&arguments[2],once:!0})},unsubscribe:function(v,w){if(v){var I=k(v);I.subscribers=I&&w?I.subscribers.filter(function(A){return A.callback!==w}):[]}else D={}}}}(),Zt=l(20),Xi=l.n(Zt),xi=l(11),As=l.n(xi),Ev=l(85),Ip=l.n(Ev),$l=l(86);var hi,Hl=function(D){oe()(C,D);var k=function(D){var k=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(C){return!1}}();return function(){var C,_=Y()(D);if(k){var v=Y()(this).constructor;C=Reflect.construct(_,arguments,v)}else C=_.apply(this,arguments);return ge()(this,C)}}(C);function C(_,v){var w;return we()(this,C),w=k.call(this,_),z()(j()(w),"code",void 0),w.code=v,Object.setPrototypeOf(j()(w),C.prototype),w}return C}(l.n($l)()(Error)),oa="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Cu(){try{return navigator.mediaDevices.enumerateDevices()}catch(k){var D=new Hl("enumerateDevices is not defined. ".concat(oa),-1);return Promise.reject(D)}}function bv(D){try{return navigator.mediaDevices.getUserMedia(D)}catch(C){var k=new Hl("getUserMedia is not defined. ".concat(oa),-1);return Promise.reject(k)}}function Cv(D){return new Promise(function(k,C){var _=10;!function v(){_>0?D.videoWidth>10&&D.videoHeight>10?k():window.setTimeout(v,500):C(new Hl("Unable to play video stream. Is webcam working?",-1)),_--}()})}function Iv(D,k){return Dp.apply(this,arguments)}function Dp(){return(Dp=Xi()(As.a.mark(function D(k,C){var _;return As.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,bv(C);case 2:if(hi=_=v.sent,!k){v.next=11;break}return k.setAttribute("autoplay","true"),k.setAttribute("muted","true"),k.setAttribute("playsinline","true"),k.srcObject=_,k.addEventListener("loadedmetadata",function(){k.play()}),v.abrupt("return",Cv(k));case 11:return v.abrupt("return",Promise.resolve());case 12:case"end":return v.stop()}},D)}))).apply(this,arguments)}function Sp(D){var k=Ip()(D,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==D.minAspectRatio&&D.minAspectRatio>0&&(k.aspectRatio=D.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==D.facing&&(k.facingMode=D.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),k}function Tv(){var k=Sp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return k&&k.deviceId&&k.facingMode&&delete k.facingMode,Promise.resolve({audio:!1,video:k})}function xp(){return(xp=Xi()(As.a.mark(function D(){return As.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Cu();case 2:return C.abrupt("return",C.sent.filter(function(_){return"videoinput"===_.kind}));case 4:case"end":return C.stop()}},D)}))).apply(this,arguments)}function en(){if(!hi)return null;var D=hi.getVideoTracks();return D&&null!=D&&D.length?D[0]:null}var Ms={requestedVideoElement:null,request:function(D,k){return Xi()(As.a.mark(function C(){return As.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return Ms.requestedVideoElement=D,v.next=3,Tv(k);case 3:return v.abrupt("return",Iv(D,v.sent));case 5:case"end":return v.stop()}},C)}))()},release:function(){var D=hi&&hi.getVideoTracks();return null!==Ms.requestedVideoElement&&Ms.requestedVideoElement.pause(),new Promise(function(k){setTimeout(function(){D&&D.length&&D[0].stop(),hi=null,Ms.requestedVideoElement=null,k()},0)})},enumerateVideoDevices:function(){return xp.apply(this,arguments)},getActiveStreamLabel:function(){var D=en();return D?D.label:""},getActiveTrack:en},Kn=Ms,Ap={create:function(D){var k,C=document.createElement("canvas"),_=C.getContext("2d"),v=[],w=null!==(k=D.capacity)&&void 0!==k?k:20,I=!0===D.capture;return{addResult:function(M,R,F){var q={};(function(M){return!!w&&M&&(R=M,!((F=D.blacklist)&&F.some(function(q){return Object.keys(q).every(function(W){return q[W]===R[W]})})))&&function(R,F){return"function"!=typeof F||F(R)}(M,D.filter);var R,F})(F)&&(w--,q.codeResult=F,I&&(C.width=R.x,C.height=R.y,ue.a.drawImage(M,R,_),q.frame=C.toDataURL()),v.push(q))},getResults:function(){return v}}}},Gl={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},mt=l(7),Wl=function D(){we()(this,D),z()(this,"config",void 0),z()(this,"inputStream",void 0),z()(this,"framegrabber",void 0),z()(this,"inputImageWrapper",void 0),z()(this,"stopped",!1),z()(this,"boxSize",void 0),z()(this,"resultCollector",void 0),z()(this,"decoder",void 0),z()(this,"workerPool",[]),z()(this,"onUIThread",!0),z()(this,"canvasContainer",new zl)},ft=function D(){we()(this,D),z()(this,"image",void 0),z()(this,"overlay",void 0)},zl=function D(){we()(this,D),z()(this,"ctx",void 0),z()(this,"dom",void 0),this.ctx=new ft,this.dom=new ft},ql=l(23);function Dt(D){return"undefined"==typeof document?null:D instanceof HTMLElement&&D.nodeName&&1===D.nodeType?D:document.querySelector("string"==typeof D?D:"#interactive.viewport")}function nt(D,k){var w,I,C=(w=k,(I=document.querySelector(D))||((I=document.createElement("canvas")).className=w),I),_=C.getContext("2d");return{canvas:C,context:_}}var Kl={274:"orientation"},ur=Object.keys(Kl).map(function(D){return Kl[D]});function dM(D){return new Promise(function(k){var C=new FileReader;C.onload=function(_){return k(_.target.result)},C.readAsArrayBuffer(D)})}function Ql(D){return new Promise(function(k,C){var _=new XMLHttpRequest;_.open("GET",D,!0),_.responseType="blob",_.onreadystatechange=function(){_.readyState!==XMLHttpRequest.DONE||200!==_.status&&0!==_.status||k(this.response)},_.onerror=C,_.send()})}function Je(D){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur,C=new DataView(D),_=D.byteLength,v=k.reduce(function(I,A){var M=Object.keys(Kl).filter(function(R){return Kl[R]===A})[0];return M&&(I[M]=A),I},{}),w=2;if(255!==C.getUint8(0)||216!==C.getUint8(1))return!1;for(;w<_;){if(255!==C.getUint8(w))return!1;if(225===C.getUint8(w+1))return Qn(C,w+4,v);w+=2+C.getUint16(w+2)}return!1}function Qn(D,k,C){if("Exif"!==function(I,A,M){for(var R="",F=A;F<A+4;F++)R+=String.fromCharCode(I.getUint8(F));return R}(D,k))return!1;var _,v=k+6;if(18761===D.getUint16(v))_=!1;else{if(19789!==D.getUint16(v))return!1;_=!0}if(42!==D.getUint16(v+2,!_))return!1;var w=D.getUint32(v+4,!_);return!(w<8)&&function(I,A,M,R,F){for(var q=I.getUint16(M,!F),W={},ye=0;ye<q;ye++){var Le=M+12*ye+2,Oe=R[I.getUint16(Le,!F)];Oe&&(W[Oe]=Dv(I,Le,0,0,F))}return W}(D,0,v+w,C,_)}function Dv(D,k,C,_,v){var w=D.getUint16(k+2,!v),I=D.getUint32(k+4,!v);return 3===w&&1===I?D.getUint16(k+8,!v):null}var Sv={};function hM(D,k){D.onload=function(){k.loaded(this)}}Sv.load=function(D,k,C,_,v){var w,I,A,M=new Array(_),R=new Array(M.length);if(!1===v)M[0]=D;else for(w=0;w<M.length;w++)A=C+w,M[w]="".concat(D,"image-").concat("00".concat(A).slice(-3),".jpg");for(R.notLoaded=[],R.addImage=function(F){R.notLoaded.push(F)},R.loaded=function(F){for(var q=R.notLoaded,W=0;W<q.length;W++)if(q[W]===F){q.splice(W,1);for(var ye=0;ye<M.length;ye++){var Le=M[ye].substr(M[ye].lastIndexOf("/"));if(-1!==F.src.lastIndexOf(Le)){R[ye]={img:F};break}}break}0===q.length&&(!1===v?function(Oe){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur;return/^blob:/i.test(Oe)?Ql(Oe).then(dM).then(function(pt){return Je(pt,Ye)}):Promise.resolve(null)}(D,["orientation"]).then(function(Oe){R[0].tags=Oe,k(R)}).catch(function(Oe){console.log(Oe),k(R)}):k(R))},w=0;w<M.length;w++)I=new Image,R.addImage(I),hM(I,R),I.src=M[w]};var Iu=Sv,cr={createVideoStream:function(D){var k,C,_=null,v=["canrecord","ended"],w={},I={x:0,y:0,type:"Point"},A={x:0,y:0,type:"XYSize"},M={getRealWidth:function(){return D.videoWidth},getRealHeight:function(){return D.videoHeight},getWidth:function(){return k},getHeight:function(){return C},setWidth:function(R){k=R},setHeight:function(R){C=R},setInputStream:function(R){_=R,this.setAttribute("src",void 0!==R.src?R.src:"")},ended:function(){return D.ended},getConfig:function(){return _},setAttribute:function(R,F){D&&D.setAttribute(R,F)},pause:function(){D.pause()},play:function(){D.play()},setCurrentTime:function(R){var F;"LiveStream"!==(null===(F=_)||void 0===F?void 0:F.type)&&this.setAttribute("currentTime",R.toString())},addEventListener:function(R,F,q){-1!==v.indexOf(R)?(w[R]||(w[R]=[]),w[R].push(F)):D.addEventListener(R,F,q)},clearEventHandlers:function(){v.forEach(function(R){var F=w[R];F&&F.length>0&&F.forEach(function(q){D.removeEventListener(R,q)})})},trigger:function(R,F){var q,W,ye,Le,Oe,Ye=w[R];if("canrecord"===R&&(Le=D.videoWidth,Oe=D.videoHeight,k=null!==(W=_)&&void 0!==W&&W.size?Le/Oe>1?_.size:Math.floor(Le/Oe*_.size):Le,C=null!==(ye=_)&&void 0!==ye&&ye.size?Le/Oe>1?Math.floor(Oe/Le*_.size):_.size:Oe,A.x=k,A.y=C),Ye&&Ye.length>0)for(q=0;q<Ye.length;q++)Ye[q].apply(M,F)},setTopRight:function(R){I.x=R.x,I.y=R.y},getTopRight:function(){return I},setCanvasSize:function(R){A.x=R.x,A.y=R.y},getCanvasSize:function(){return A},getFrame:function(){return D}};return M},createLiveStream:function(D){D&&D.setAttribute("autoplay","true");var k=cr.createVideoStream(D);return k.ended=function(){return!1},k},createImageStream:function(){var D,k,C=null,_=0,v=0,w=0,I=!0,A=!1,M=null,R=0,F=null,q=!1,W=["canrecord","ended"],ye={},Le={x:0,y:0,type:"Point"},Oe={x:0,y:0,type:"XYSize"};function Ye($e,It){var mn,Kr=ye[$e];if(Kr&&Kr.length>0)for(mn=0;mn<Kr.length;mn++)Kr[mn].apply(pt,It)}var pt={trigger:Ye,getWidth:function(){return D},getHeight:function(){return k},setWidth:function($e){D=$e},setHeight:function($e){k=$e},getRealWidth:function(){return _},getRealHeight:function(){return v},setInputStream:function($e){var It;!1===$e.sequence?(F=$e.src,R=1):(F=$e.src,R=$e.length),A=!1,Iu.load(F,function(mn){var Kr,dr;if(M=mn,mn[0].tags&&mn[0].tags.orientation)switch(mn[0].tags.orientation){case 6:case 8:_=mn[0].img.height,v=mn[0].img.width;break;default:_=mn[0].img.width,v=mn[0].img.height}else _=mn[0].img.width,v=mn[0].img.height;D=null!==(Kr=C)&&void 0!==Kr&&Kr.size?_/v>1?C.size:Math.floor(_/v*C.size):_,k=null!==(dr=C)&&void 0!==dr&&dr.size?_/v>1?Math.floor(v/_*C.size):C.size:v,Oe.x=D,Oe.y=k,A=!0,w=0,setTimeout(function(){Ye("canrecord",[])},0)},1,R,null===(It=C=$e)||void 0===It?void 0:It.sequence)},ended:function(){return q},setAttribute:function(){},getConfig:function(){return C},pause:function(){I=!0},play:function(){I=!1},setCurrentTime:function($e){w=$e},addEventListener:function($e,It){-1!==W.indexOf($e)&&(ye[$e]||(ye[$e]=[]),ye[$e].push(It))},clearEventHandlers:function(){Object.keys(ye).forEach(function($e){return delete ye[$e]})},setTopRight:function($e){Le.x=$e.x,Le.y=$e.y},getTopRight:function(){return Le},setCanvasSize:function($e){Oe.x=$e.x,Oe.y=$e.y},getCanvasSize:function(){return Oe},getFrame:function(){var $e,It;return A?(I||($e=null===(It=M)||void 0===It?void 0:It[w],w<R-1?w++:setTimeout(function(){q=!0,Ye("ended",[])},0)),$e):null}};return pt}},fM=cr,Tu=l(9),xv=Math.PI/180,Ai={create:function(D,k){var C,_={},v=D.getConfig(),w=(Object(Tu.h)(D.getRealWidth(),D.getRealHeight()),D.getCanvasSize()),I=Object(Tu.h)(D.getWidth(),D.getHeight()),A=D.getTopRight(),M=A.x,R=A.y,F=null,q=null;return(C=k||document.createElement("canvas")).width=w.x,C.height=w.y,F=C.getContext("2d"),q=new Uint8Array(I.x*I.y),_.attachData=function(W){q=W},_.getData=function(){return q},_.grab=function(){var W,pt,$e,ye=v.halfSample,Le=D.getFrame(),Oe=Le,Ye=0;if(Oe){if((pt=C).width!==($e=w).x&&(pt.width=$e.x),pt.height!==$e.y&&(pt.height=$e.y),"ImageStream"===v.type&&(Oe=Le.img,Le.tags&&Le.tags.orientation))switch(Le.tags.orientation){case 6:Ye=90*xv;break;case 8:Ye=-90*xv}return 0!==Ye?(F.translate(w.x/2,w.y/2),F.rotate(Ye),F.drawImage(Oe,-w.y/2,-w.x/2,w.y,w.x),F.rotate(-Ye),F.translate(-w.x/2,-w.y/2)):F.drawImage(Oe,0,0,w.x,w.y),W=F.getImageData(M,R,I.x,I.y).data,ye?Object(Tu.e)(W,I,q):Object(Tu.c)(W,q,v),!0}return!1},_.getSize=function(){return I},_}},pM=Ai;function Av(D,k){var C=Object.keys(D);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(D);k&&(_=_.filter(function(v){return Object.getOwnPropertyDescriptor(D,v).enumerable})),C.push.apply(C,_)}return C}function Yl(D){for(var k=1;k<arguments.length;k++){var C=null!=arguments[k]?arguments[k]:{};k%2?Av(Object(C),!0).forEach(function(_){z()(D,_,C[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(C)):Av(Object(C)).forEach(function(_){Object.defineProperty(D,_,Object.getOwnPropertyDescriptor(C,_))})}return D}var Mi=[];function Mv(D){return Yl(Yl({},D),{},{inputStream:Yl(Yl({},D.inputStream),{},{target:null})})}function gM(D){if(D){var k=D().default;if(!k)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var C;function _(w){self.postMessage({event:"processed",imageData:C.data,result:w},[C.data.buffer])}function v(){self.postMessage({event:"initialized",imageData:C.data},[C.data.buffer])}self.onmessage=function(w){if("init"===w.data.cmd){var I=w.data.config;I.numOfWorkers=0,C=new k.ImageWrapper({x:w.data.size.x,y:w.data.size.y},new Uint8Array(w.data.imageData)),k.init(I,v,C),k.onProcessed(_)}else"process"===w.data.cmd?(C.data=new Uint8Array(w.data.imageData),k.start()):"setReaders"===w.data.cmd?k.setReaders(w.data.readers):"registerReader"===w.data.cmd&&k.registerReader(w.data.name,w.data.reader)}}function Rv(D,k,C){var _,v,w=("undefined"!=typeof __factorySource__&&(v=__factorySource__),_=new Blob(["("+gM.toString()+")("+v+");"],{type:"text/javascript"}),window.URL.createObjectURL(_)),I={worker:new Worker(w),imageData:new Uint8Array(k.getWidth()*k.getHeight()),busy:!0};I.worker.onmessage=function(A){"initialized"===A.data.event?(URL.revokeObjectURL(w),I.busy=!1,I.imageData=new Uint8Array(A.data.imageData),C(I)):"processed"===A.data.event&&(I.imageData=new Uint8Array(A.data.imageData),I.busy=!1)},I.worker.postMessage({cmd:"init",size:{x:k.getWidth(),y:k.getHeight()},imageData:I.imageData,config:Mv(D)},[I.imageData.buffer])}function kv(D,k,C,_){var v=D-Mi.length;if(0===v&&_)_();else if(v<0)Mi.slice(v).forEach(function(A){A.worker.terminate()}),Mi=Mi.slice(0,v),_&&_();else{var w=function(A){Mi.push(A),Mi.length>=D&&_&&_()};if(k)for(var I=0;I<v;I++)Rv(k,C,w)}}function lr(D,k,C){for(var _=D.length;_--;)D[_][0]+=k,D[_][1]+=C}var xt=function(){function D(){var C=this;we()(this,D),z()(this,"context",new Wl),z()(this,"canRecord",function(_){var v;C.context.config&&(ql.a.checkImageConstraints(C.context.inputStream,null===(v=C.context.config)||void 0===v?void 0:v.locator),C.initCanvas(),C.context.framegrabber=pM.create(C.context.inputStream,C.context.canvasContainer.dom.image),void 0===C.context.config.numOfWorkers&&(C.context.config.numOfWorkers=0),kv(C.context.config.numOfWorkers,C.context.config,C.context.inputStream,function(){var w;0===(null===(w=C.context.config)||void 0===w?void 0:w.numOfWorkers)&&C.initializeData(),C.ready(_)}))}),z()(this,"update",function(){if(C.context.onUIThread){var _,v=(I=C.context.framegrabber,Mi.length?!!(A=Mi.filter(function(M){return!M.busy})[0])&&(I.attachData(A.imageData),I.grab()&&(A.busy=!0,A.worker.postMessage({cmd:"process",imageData:A.imageData},[A.imageData.buffer])),!0):null);v||(C.context.framegrabber.attachData(null===(_=C.context.inputImageWrapper)||void 0===_?void 0:_.data),C.context.framegrabber.grab()&&(v||C.locateAndDecode()))}else{var w;C.context.framegrabber.attachData(null===(w=C.context.inputImageWrapper)||void 0===w?void 0:w.data),C.context.framegrabber.grab(),C.locateAndDecode()}var I,A})}var k;return _e()(D,[{key:"initBuffers",value:function(C){if(this.context.config){var _=(I=this.context.inputStream,M=this.context.config.locator,R=C||new O.a({x:I.getWidth(),y:I.getHeight(),type:"XYSize"}),F=[Object(mt.clone)([0,0]),Object(mt.clone)([0,R.size.y]),Object(mt.clone)([R.size.x,R.size.y]),Object(mt.clone)([R.size.x,0])],ql.a.init(R,M),{inputImageWrapper:R,boxSize:F}),w=_.boxSize;this.context.inputImageWrapper=_.inputImageWrapper,this.context.boxSize=w}var I,M,R,F}},{key:"initializeData",value:function(C){this.context.config&&(this.initBuffers(C),this.context.decoder=qr.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?Dt(this.context.config.inputStream.target):null}},{key:"ready",value:function(C){this.context.inputStream.play(),C()}},{key:"initCanvas",value:function(){var C=function(D){var k,C,_,v,w=Dt(null==D||null===(k=D.config)||void 0===k||null===(C=k.inputStream)||void 0===C?void 0:C.target),I=null==D||null===(_=D.config)||void 0===_||null===(v=_.inputStream)||void 0===v?void 0:v.type;if(!I)return null;var A=function(R){if("undefined"!=typeof document){var F=nt("canvas.imgBuffer","imgBuffer"),q=nt("canvas.drawingBuffer","drawingBuffer");return F.canvas.width=q.canvas.width=R.x,F.canvas.height=q.canvas.height=R.y,{dom:{image:F.canvas,overlay:q.canvas},ctx:{image:F.context,overlay:q.context}}}return null}(D.inputStream.getCanvasSize());if(!A)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var M=A.dom;return"undefined"!=typeof document&&w&&("ImageStream"!==I||w.contains(M.image)||w.appendChild(M.image),w.contains(M.overlay)||w.appendChild(M.overlay)),A}(this.context);if(C){var _=C.ctx,v=C.dom;this.context.canvasContainer.dom.image=v.image,this.context.canvasContainer.dom.overlay=v.overlay,this.context.canvasContainer.ctx.image=_.image,this.context.canvasContainer.ctx.overlay=_.overlay}}},{key:"initInputStream",value:function(C){if(this.context.config&&this.context.config.inputStream){var _=this.context.config.inputStream,v=_.type,w=_.constraints,I=function(){var R=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LiveStream",F=arguments.length>1?arguments[1]:void 0,q=arguments.length>2?arguments[2]:void 0;switch(R){case"VideoStream":var W=document.createElement("video");return{video:W,inputStream:q.createVideoStream(W)};case"ImageStream":return{inputStream:q.createImageStream()};case"LiveStream":var ye=null;return F&&((ye=F.querySelector("video"))||(ye=document.createElement("video"),F.appendChild(ye))),{video:ye,inputStream:q.createLiveStream(ye)};default:return console.error("* setupInputStream invalid type ".concat(R)),{video:null,inputStream:null}}}(v,this.getViewPort(),fM),A=I.video,M=I.inputStream;"LiveStream"===v&&A&&Kn.request(A,w).then(function(){return M.trigger("canrecord")}).catch(function(R){return C(R)}),M.setAttribute("preload","auto"),M.setInputStream(this.context.config.inputStream),M.addEventListener("canrecord",this.canRecord.bind(void 0,C)),this.context.inputStream=M}}},{key:"getBoundingBoxes",value:function(){var C;return null!==(C=this.context.config)&&void 0!==C&&C.locate?ql.a.locate():[[Object(mt.clone)(this.context.boxSize[0]),Object(mt.clone)(this.context.boxSize[1]),Object(mt.clone)(this.context.boxSize[2]),Object(mt.clone)(this.context.boxSize[3])]]}},{key:"transformResult",value:function(C){var M,R,F,_=this,v=this.context.inputStream.getTopRight(),w=v.x,I=v.y;if((0!==w||0!==I)&&(C.barcodes&&C.barcodes.forEach(function(M){return _.transformResult(M)}),C.line&&2===C.line.length&&(F=I,(M=C.line)[0].x+=R=w,M[0].y+=F,M[1].x+=R,M[1].y+=F),C.box&&lr(C.box,w,I),C.boxes&&C.boxes.length>0))for(var A=0;A<C.boxes.length;A++)lr(C.boxes[A],w,I)}},{key:"addResult",value:function(C,_){var v=this;_&&this.context.resultCollector&&(C.barcodes?C.barcodes.filter(function(w){return w.codeResult}).forEach(function(w){return v.addResult(w,_)}):C.codeResult&&this.context.resultCollector.addResult(_,this.context.inputStream.getCanvasSize(),C.codeResult))}},{key:"hasCodeResult",value:function(C){return!(!C||!(C.barcodes?C.barcodes.some(function(_){return _.codeResult}):C.codeResult))}},{key:"publishResult",value:function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1?arguments[1]:void 0,v=C;C&&this.context.onUIThread&&(this.transformResult(C),this.addResult(C,_),v=C.barcodes||C),xs.publish("processed",v),this.hasCodeResult(C)&&xs.publish("detected",v)}},{key:"locateAndDecode",value:function(){var C=this.getBoundingBoxes();if(C){var _,v=this.context.decoder.decodeFromBoundingBoxes(C)||{};v.boxes=C,this.publishResult(v,null===(_=this.context.inputImageWrapper)||void 0===_?void 0:_.data)}else{var w,I=this.context.decoder.decodeFromImage(this.context.inputImageWrapper);I?this.publishResult(I,null===(w=this.context.inputImageWrapper)||void 0===w?void 0:w.data):this.publishResult()}}},{key:"startContinuousUpdate",value:function(){var C,_=this,v=null,w=1e3/((null===(C=this.context.config)||void 0===C?void 0:C.frequency)||60);this.context.stopped=!1;var I=this.context;!function A(M){v=v||M,I.stopped||(M>=v&&(v+=w,_.update()),window.requestAnimationFrame(A))}(performance.now())}},{key:"start",value:function(){var C,_;this.context.onUIThread&&"LiveStream"===(null===(C=this.context.config)||void 0===C||null===(_=C.inputStream)||void 0===_?void 0:_.type)?this.startContinuousUpdate():this.update()}},{key:"stop",value:(k=Xi()(As.a.mark(function C(){var _;return As.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(this.context.stopped=!0,kv(0),null===(_=this.context.config)||void 0===_||!_.inputStream||"LiveStream"!==this.context.config.inputStream.type){v.next=6;break}return v.next=5,Kn.release();case 5:this.context.inputStream.clearEventHandlers();case 6:case"end":return v.stop()}},C,this)})),function(){return k.apply(this,arguments)})},{key:"setReaders",value:function(C){var _;this.context.decoder&&this.context.decoder.setReaders(C),_=C,Mi.forEach(function(v){return v.worker.postMessage({cmd:"setReaders",readers:_})})}},{key:"registerReader",value:function(C,_){var v,w;qr.registerReader(C,_),this.context.decoder&&this.context.decoder.registerReader(C,_),v=C,w=_,Mi.forEach(function(I){return I.worker.postMessage({cmd:"registerReader",name:v,reader:w})})}}]),D}(),aa=new xt,Rp=aa.context,Nv={init:function(D,k,C){var _,v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:aa;return k||(_=new Promise(function(w,I){k=function(A){A?I(A):w()}})),v.context.config=S()({},Gl,D),v.context.config.numOfWorkers>0&&(v.context.config.numOfWorkers=0),C?(v.context.onUIThread=!1,v.initializeData(C),k&&k()):v.initInputStream(k),_},start:function(){return aa.start()},stop:function(){return aa.stop()},pause:function(){Rp.stopped=!0},onDetected:function(D){D&&("function"==typeof D||"object"===E()(D)&&D.callback)?xs.subscribe("detected",D):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(D){xs.unsubscribe("detected",D)},onProcessed:function(D){D&&("function"==typeof D||"object"===E()(D)&&D.callback)?xs.subscribe("processed",D):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(D){xs.unsubscribe("processed",D)},setReaders:function(D){D?aa.setReaders(D):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(D,k){D?k?aa.registerReader(D,k):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(D){D&&"function"==typeof D.addResult&&(Rp.resultCollector=D)},get canvas(){return Rp.canvasContainer},decodeSingle:function(D,k){var C=this,_=new xt;return(D=S()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:D.src},numOfWorkers:1,locator:{halfSample:!1}},D)).numOfWorkers>0&&(D.numOfWorkers=0),D.numOfWorkers>0&&("undefined"==typeof Blob||"undefined"==typeof Worker)&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),D.numOfWorkers=0),new Promise(function(v,w){try{C.init(D,function(){xs.once("processed",function(I){_.stop(),k&&k.call(null,I),v(I)},!0),_.start()},null,_)}catch(I){w(I)}})},get default(){return Nv},Readers:f,CameraAccess:Kn,ImageDebug:ue.a,ImageWrapper:O.a,ResultCollector:Ap};x.default=Nv}]).default},308:(wr,g,x)=>{"use strict";function l(n){return"function"==typeof n}function f(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const p=f(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function E(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class b{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(l(r))try{r()}catch(s){e=s instanceof p?s.errors:[s]}const{_teardowns:i}=this;if(i){this._teardowns=null;for(const s of i)try{V(s)}catch(o){e=null!=e?e:[],o instanceof p?e=[...e,...o.errors]:e.push(o)}}if(e)throw new p(e)}}add(e){var t;if(e&&e!==this)if(this.closed)V(e);else{if(e instanceof b){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(t=this._teardowns)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&E(t,e)}remove(e){const{_teardowns:t}=this;t&&E(t,e),e instanceof b&&e._removeParent(this)}}b.EMPTY=(()=>{const n=new b;return n.closed=!0,n})();const S=b.EMPTY;function O(n){return n instanceof b||n&&"closed"in n&&l(n.remove)&&l(n.add)&&l(n.unsubscribe)}function V(n){l(n)?n():n.unsubscribe()}const L={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ee={setTimeout(...n){const{delegate:e}=ee;return((null==e?void 0:e.setTimeout)||setTimeout)(...n)},clearTimeout(n){const{delegate:e}=ee;return((null==e?void 0:e.clearTimeout)||clearTimeout)(n)},delegate:void 0};function ie(n){ee.setTimeout(()=>{const{onUnhandledError:e}=L;if(!e)throw n;e(n)})}function ue(){}const Ve=_e("C",void 0,void 0);function _e(n,e,t){return{kind:n,value:e,error:t}}let X=null;function j(n){if(L.useDeprecatedSynchronousErrorHandling){const e=!X;if(e&&(X={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=X;if(X=null,t)throw r}}else n()}class oe extends b{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,O(e)&&e.add(this)):this.destination=se}static create(e,t,r){return new Ee(e,t,r)}next(e){this.isStopped?Y(_e("N",e,void 0),this):this._next(e)}error(e){this.isStopped?Y(_e("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Y(Ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ee extends oe{constructor(e,t,r){let i;if(super(),l(e))i=e;else if(e){let s;({next:i,error:t,complete:r}=e),this&&L.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe()):s=e,i=null==i?void 0:i.bind(s),t=null==t?void 0:t.bind(s),r=null==r?void 0:r.bind(s)}this.destination={next:i?ge(i):ue,error:ge(null!=t?t:Z),complete:r?ge(r):ue}}}function ge(n,e){return(...t)=>{try{n(...t)}catch(r){L.useDeprecatedSynchronousErrorHandling?function(n){L.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=n)}(r):ie(r)}}}function Z(n){throw n}function Y(n,e){const{onStoppedNotification:t}=L;t&&ee.setTimeout(()=>t(n,e))}const se={closed:!0,next:ue,error:Z,complete:ue},z="function"==typeof Symbol&&Symbol.observable||"@@observable";function fe(n){return n}let G=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function(n){return n&&n instanceof oe||function(n){return n&&l(n.next)&&l(n.error)&&l(n.complete)}(n)&&O(n)}(t)?t:new Ee(t,r,i);return j(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=re(r))((i,s)=>{let o;o=this.subscribe(a=>{try{t(a)}catch(u){s(u),null==o||o.unsubscribe()}},s,i)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[z](){return this}pipe(...t){return function(n){return 0===n.length?fe:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=re(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function re(n){var e;return null!==(e=null!=n?n:L.Promise)&&void 0!==e?e:Promise}const Re=f(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ue=(()=>{class n extends G{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Be(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Re}next(t){j(()=>{if(this._throwIfClosed(),!this.isStopped){const r=this.observers.slice();for(const i of r)i.next(t)}})}error(t){j(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){j(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?S:(s.push(t),new b(()=>E(s,t)))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new G;return t.source=this,t}}return n.create=(e,t)=>new Be(e,t),n})();class Be extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:S}}function Ie(n){return l(null==n?void 0:n.lift)}function Ae(n){return e=>{if(Ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}class je extends oe{constructor(e,t,r,i,s){super(e),this.onFinalize=s,this._next=t?function(o){try{t(o)}catch(a){e.error(a)}}:super._next,this._error=i?function(o){try{i(o)}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}function ke(n,e){return Ae((t,r)=>{let i=0;t.subscribe(new je(r,s=>{r.next(n.call(e,s,i++))}))})}function Ss(n){return this instanceof Ss?(this.v=n,this):new Ss(n)}function hp(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(y){return new Promise(function(T,N){s.push([m,y,T,N])>1||a(m,y)})})}function a(m,y){try{!function(m){m.value instanceof Ss?Promise.resolve(m.value.v).then(c,d):h(s[0][2],m)}(r[m](y))}catch(T){h(s[0][3],T)}}function c(m){a("next",m)}function d(m){a("throw",m)}function h(m,y){m(y),s.shift(),s.length&&a(s[0][0],s[0][1])}}function fp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){!function(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=n[s](o)).done,o.value)})}}}const Fl=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ll(n){return l(null==n?void 0:n.then)}function gp(n){return l(n[z])}function Vl(n){return Symbol.asyncIterator&&l(null==n?void 0:n[Symbol.asyncIterator])}function mp(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const yp="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Ul(n){return l(null==n?void 0:n[yp])}function vp(n){return hp(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Ss(t.read());if(i)return yield Ss(void 0);yield yield Ss(r)}}finally{t.releaseLock()}})}function Bl(n){return l(null==n?void 0:n.getReader)}function zr(n){if(n instanceof G)return n;if(null!=n){if(gp(n))return function(n){return new G(e=>{const t=n[z]();if(l(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Fl(n))return function(n){return new G(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ll(n))return function(n){return new G(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ie)})}(n);if(Vl(n))return bp(n);if(Ul(n))return function(n){return new G(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Bl(n))return function(n){return bp(vp(n))}(n)}throw mp(n)}function bp(n){return new G(e=>{(function(n,e){var t,r,i,s;return function(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function u(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=fp(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function qr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Zt(n,e,t=1/0){return l(e)?Zt((r,i)=>ke((s,o)=>e(r,s,i,o))(zr(n(r,i))),t):("number"==typeof e&&(t=e),Ae((r,i)=>function(n,e,t,r,i,s,o,a){const u=[];let c=0,d=0,h=!1;const m=()=>{h&&!u.length&&!c&&e.complete()},y=N=>c<r?T(N):u.push(N),T=N=>{c++;let U=!1;zr(t(N,d++)).subscribe(new je(e,K=>{e.next(K)},()=>{U=!0},void 0,()=>{if(U)try{for(c--;u.length&&c<r;){const K=u.shift();T(K)}m()}catch(K){e.error(K)}}))};return n.subscribe(new je(e,y,()=>{h=!0,m()})),()=>{}}(r,i,n,t)))}function Xi(n=1/0){return Zt(fe,n)}const xi=new G(n=>n.complete());function Ip(n){return n&&l(n.schedule)}function $l(n){return n[n.length-1]}function Tp(n){return l($l(n))?n.pop():void 0}function hi(n){return Ip($l(n))?n.pop():void 0}function oa(n,e=0){return Ae((t,r)=>{t.subscribe(new je(r,i=>qr(r,n,()=>r.next(i),e),()=>qr(r,n,()=>r.complete(),e),i=>qr(r,n,()=>r.error(i),e)))})}function Cu(n,e=0){return Ae((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Sp(n,e){if(!n)throw new Error("Iterable cannot be null");return new G(t=>{qr(t,e,()=>{const r=n[Symbol.asyncIterator]();qr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function en(n,e){return e?function(n,e){if(null!=n){if(gp(n))return function(n,e){return zr(n).pipe(Cu(e),oa(e))}(n,e);if(Fl(n))return function(n,e){return new G(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ll(n))return function(n,e){return zr(n).pipe(Cu(e),oa(e))}(n,e);if(Vl(n))return Sp(n,e);if(Ul(n))return function(n,e){return new G(t=>{let r;return qr(t,e,()=>{r=n[yp](),qr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>l(null==r?void 0:r.return)&&r.return()})}(n,e);if(Bl(n))return function(n,e){return Sp(vp(n),e)}(n,e)}throw mp(n)}(n,e):zr(n)}function Ms(...n){const e=hi(n),t=function(n,e){return"number"==typeof $l(n)?n.pop():1/0}(n),r=n;return r.length?1===r.length?zr(r[0]):Xi(t)(en(r,e)):xi}function Kn(n){return n<=0?()=>xi:Ae((e,t)=>{let r=0;e.subscribe(new je(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gl(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(Kn(1)).subscribe(()=>n())}function mt(n){for(let e in n)if(n[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function Wl(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ft(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ft).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function zl(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ql=mt({__forward_ref__:mt});function Dt(n){return n.__forward_ref__=Dt,n.toString=function(){return ft(this())},n}function nt(n){return Mp(n)?n():n}function Mp(n){return"function"==typeof n&&n.hasOwnProperty(ql)&&n.__forward_ref__===Dt}class ur extends Error{constructor(e,t){super(function(n,e){return`${n?`NG0${n}: `:""}${e}`}(e,t)),this.code=e}}function Je(n){return"string"==typeof n?n:null==n?"":String(n)}function Qn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Je(n)}function Iu(n,e){const t=e?` in ${e}`:"";throw new ur("201",`No provider for ${Qn(n)} found${t}`)}function lr(n,e){null==n&&function(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function D(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function C(n){return{providers:n.providers||[],imports:n.imports||[]}}function _(n){return v(n,M)||v(n,F)}function v(n,e){return n.hasOwnProperty(e)?n[e]:null}function A(n){return n&&(n.hasOwnProperty(R)||n.hasOwnProperty(q))?n[R]:null}const M=mt({\u0275prov:mt}),R=mt({\u0275inj:mt}),F=mt({ngInjectableDef:mt}),q=mt({ngInjectorDef:mt});var W=(()=>((W=W||{})[W.Default=0]="Default",W[W.Host=1]="Host",W[W.Self=2]="Self",W[W.SkipSelf=4]="SkipSelf",W[W.Optional=8]="Optional",W))();let ye;function Oe(n){const e=ye;return ye=n,e}function Ye(n,e,t){const r=_(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&W.Optional?null:void 0!==e?e:void Iu(ft(n),"Injector")}function $e(n){return{toString:n}.toString()}var It=(()=>((It=It||{})[It.OnPush=0]="OnPush",It[It.Default=1]="Default",It))(),dr=(()=>{return(n=dr||(dr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",dr;var n})();const Ov="undefined"!=typeof globalThis&&globalThis,Tz="undefined"!=typeof window&&window,Dz="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At=Ov||"undefined"!=typeof global&&global||Tz||Dz,Du={},Nt=[],kp=mt({\u0275cmp:mt}),Pv=mt({\u0275dir:mt}),Fv=mt({\u0275pipe:mt}),mM=mt({\u0275mod:mt}),Rs=mt({\u0275fac:mt}),Jl=mt({__NG_ELEMENT_ID__:mt});let Sz=0;function Su(n){return $e(()=>{const t={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Nt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||dr.Emulated,id:"c",styles:n.styles||Nt,_:null,setInput:null,schemas:n.schemas||null,tView:null},i=n.directives,s=n.features,o=n.pipes;return r.id+=Sz++,r.inputs=wM(n.inputs,t),r.outputs=wM(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(_M):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(yM):null,r})}function _M(n){return hr(n)||function(n){return n[Pv]||null}(n)}function yM(n){return function(n){return n[Fv]||null}(n)}const vM={};function Nn(n){return $e(()=>{const e={type:n.type,bootstrap:n.bootstrap||Nt,declarations:n.declarations||Nt,imports:n.imports||Nt,exports:n.exports||Nt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(vM[n.id]=n.type),e})}function wM(n,e){if(null==n)return Du;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const qe=Su;function hr(n){return n[kp]||null}function fi(n,e){const t=n[mM]||null;if(!t&&!0===e)throw new Error(`Type ${ft(n)} does not have '\u0275mod' property.`);return t}function Zi(n){return Array.isArray(n)&&"object"==typeof n[1]}function ki(n){return Array.isArray(n)&&!0===n[1]}function Uv(n){return 0!=(8&n.flags)}function Fp(n){return 2==(2&n.flags)}function Lp(n){return 1==(1&n.flags)}function Ni(n){return null!==n.template}function Nz(n){return 0!=(512&n[2])}function ha(n,e){return n.hasOwnProperty(Rs)?n[Rs]:null}class Fz{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Yr(){return bM}function bM(n){return n.type.prototype.ngOnChanges&&(n.setInput=Vz),Lz}function Lz(){const n=IM(this),e=null==n?void 0:n.current;if(e){const t=n.previous;if(t===Du)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Vz(n,e,t,r){const i=IM(n)||function(n,e){return n[CM]=e}(n,{previous:Du,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],u=o[a];s[a]=new Fz(u&&u.currentValue,e,o===Du),n[r]=e}Yr.ngInherit=!0;const CM="__ngSimpleChanges__";function IM(n){return n[CM]||null}let $v;function tn(n){return!!n.listen}const SM={createRenderer:(n,e)=>void 0!==$v?$v:"undefined"!=typeof document?document:void 0};function _n(n){for(;Array.isArray(n);)n=n[0];return n}function Vp(n,e){return _n(e[n])}function mi(n,e){return _n(e[n.index])}function Gv(n,e){return n.data[e]}function Jr(n,e){const t=e[n];return Zi(t)?t:t[0]}function Wv(n){return 128==(128&n[2])}function ho(n,e){return null==e?null:n[e]}function AM(n){n[18]=0}function zv(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const Xe={lFrame:LM(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function MM(){return Xe.bindingsEnabled}function ce(){return Xe.lFrame.lView}function vt(){return Xe.lFrame.tView}function Tn(){let n=RM();for(;null!==n&&64===n.type;)n=n.parent;return n}function RM(){return Xe.lFrame.currentTNode}function es(n,e){const t=Xe.lFrame;t.currentTNode=n,t.isParent=e}function qv(){return Xe.lFrame.isParent}function Up(){return Xe.isInCheckNoChangesMode}function Bp(n){Xe.isInCheckNoChangesMode=n}function Nu(){return Xe.lFrame.bindingIndex++}function Ns(n){const e=Xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function eq(n,e){const t=Xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qv(e)}function Qv(n){Xe.lFrame.currentDirectiveIndex=n}function Jv(n){Xe.lFrame.currentQueryIndex=n}function nq(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function PM(n,e,t){if(t&W.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&W.Host||(i=nq(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Xe.lFrame=FM();return r.currentTNode=e,r.lView=n,!0}function jp(n){const e=FM(),t=n[1];Xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function FM(){const n=Xe.lFrame,e=null===n?null:n.child;return null===e?LM(n):e}function LM(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function VM(){const n=Xe.lFrame;return Xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const UM=VM;function $p(){const n=VM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function br(){return Xe.lFrame.selectedIndex}function fo(n){Xe.lFrame.selectedIndex=n}function nn(){const n=Xe.lFrame;return Gv(n.tView,n.selectedIndex)}function Hp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=d&&(n.destroyHooks||(n.destroyHooks=[])).push(t,d)}}function Gp(n,e,t){BM(n,e,3,t)}function Wp(n,e,t,r){(3&n[2])===t&&BM(n,e,t,r)}function Xv(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function BM(n,e,t,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[18]+=65536),(a<s||-1==s)&&(dq(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function dq(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class nd{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function zp(n,e,t){const r=tn(n);let i=0;for(;i<t.length;){const s=t[i];if("number"==typeof s){if(0!==s)break;i++;const o=t[i++],a=t[i++],u=t[i++];r?n.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=t[++i];ew(o)?r&&n.setProperty(e,o,a):r?n.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function jM(n){return 3===n||4===n||6===n}function ew(n){return 64===n.charCodeAt(0)}function qp(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||$M(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function $M(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function HM(n){return-1!==n}function Ou(n){return 32767&n}function Pu(n,e){let t=function(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let tw=!0;function Kp(n){const e=tw;return tw=n,e}let _q=0;function id(n,e){const t=rw(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,nw(r.data,n),nw(e,null),nw(r.blueprint,null));const i=Qp(n,e),s=n.injectorIndex;if(HM(i)){const o=Ou(i),a=Pu(i,e),u=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function nw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rw(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Yp(n,e,t){!function(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Jl)&&(r=t[Jl]),null==r&&(r=t[Jl]=_q++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function zM(n,e,t){if(t&W.Optional)return n;Iu(e,"NodeInjector")}function qM(n,e,t,r){if(t&W.Optional&&void 0===r&&(r=null),0==(t&(W.Self|W.Host))){const i=n[9],s=Oe(void 0);try{return i?i.get(e,r,t&W.Optional):Ye(e,r,t&W.Optional)}finally{Oe(s)}}return zM(r,e,t)}function KM(n,e,t,r=W.Default,i){if(null!==n){const s=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Jl)?n[Jl]:void 0;return"number"==typeof e?e>=0?255&e:wq:e}(t);if("function"==typeof s){if(!PM(e,n,r))return r&W.Host?zM(i,t,r):qM(e,t,r,i);try{const o=s(r);if(null!=o||r&W.Optional)return o;Iu(t)}finally{UM()}}else if("number"==typeof s){let o=null,a=rw(n,e),u=-1,c=r&W.Host?e[16][6]:null;for((-1===a||r&W.SkipSelf)&&(u=-1===a?Qp(n,e):e[a+8],-1!==u&&JM(r,!1)?(o=e[1],a=Ou(u),e=Pu(u,e)):a=-1);-1!==a;){const d=e[1];if(YM(s,a,d.data)){const h=Eq(a,e,t,o,r,c);if(h!==QM)return h}u=e[a+8],-1!==u&&JM(r,e[1].data[a+8]===c)&&YM(s,a,e)?(o=d,a=Ou(u),e=Pu(u,e)):a=-1}}}return qM(e,t,r,i)}const QM={};function wq(){return new Fu(Tn(),ce())}function Eq(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],d=function(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,d=s>>20,m=i?a+d:n.directiveEnd;for(let y=r?a:a+d;y<m;y++){const T=o[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){const y=o[u];if(y&&Ni(y)&&y.type===t)return u}return null}(a,o,t,null==r?Fp(a)&&tw:r!=o&&0!=(3&a.type),i&W.Host&&s===a);return null!==d?sd(e,o,d,a):QM}function sd(n,e,t,r){let i=n[t];const s=e.data;if(function(n){return n instanceof nd}(i)){const o=i;o.resolving&&function(n,e){throw new ur("200",`Circular dependency in DI detected for ${n}`)}(Qn(s[t]));const a=Kp(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Oe(o.injectImpl):null;PM(n,r,W.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=bM(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==u&&Oe(u),Kp(a),o.resolving=!1,UM()}}return i}function YM(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function JM(n,e){return!(n&W.Self||n&W.Host&&e)}class Fu{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return KM(this._tNode,this._lView,e,r,t)}}function Xr(n){return $e(()=>{const e=n.prototype.constructor,t=e[Rs]||iw(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Rs]||iw(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function iw(n){return Mp(n)?()=>{const e=iw(nt(n));return e&&e()}:ha(n)}const Vu="__parameters__";function Bu(n,e,t){return $e(()=>{const r=function(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,d){const h=u.hasOwnProperty(Vu)?u[Vu]:Object.defineProperty(u,Vu,{value:[]})[Vu];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Ke{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=D({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Iq=new Ke("AnalyzeForEntryComponents");function ts(n,e){n.forEach(t=>Array.isArray(t)?ts(t,e):e(t))}function ZM(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Zr(n,e,t){let r=ju(n,e);return r>=0?n[1|r]=t:(r=~r,function(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function aw(n,e){const t=ju(n,e);if(t>=0)return n[1|t]}function ju(n,e){return function(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ld={},cw="__NG_DI_FLAG__",eg="ngTempTokenPath",Oq=/\n/gm,iR="__source",Fq=mt({provide:String,useValue:mt});let dd;function sR(n){const e=dd;return dd=n,e}function Lq(n,e=W.Default){if(void 0===dd)throw new Error("inject() must be called from an injection context");return null===dd?Ye(n,void 0,e):dd.get(n,e&W.Optional?null:void 0,e)}function Pe(n,e=W.Default){return(ye||Lq)(nt(n),e)}function lw(n){const e=[];for(let t=0;t<n.length;t++){const r=nt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let i,s=W.Default;for(let o=0;o<r.length;o++){const a=r[o],u=Vq(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(Pe(i,s))}else e.push(Pe(r))}return e}function hd(n,e){return n[cw]=e,n.prototype[cw]=e,n}function Vq(n){return n[cw]}const fd=hd(Bu("Inject",n=>({token:n})),-1),St=hd(Bu("Optional"),8),$u=hd(Bu("SkipSelf"),4);class pR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function go(n){return n instanceof pR?n.changingThisBreaksApplicationSecurity:n}const o4=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,a4=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var yn=(()=>((yn=yn||{})[yn.NONE=0]="NONE",yn[yn.HTML=1]="HTML",yn[yn.STYLE=2]="STYLE",yn[yn.SCRIPT=3]="SCRIPT",yn[yn.URL=4]="URL",yn[yn.RESOURCE_URL=5]="RESOURCE_URL",yn))();function og(n){const e=function(){const n=ce();return n&&n[12]}();return e?e.sanitize(yn.URL,n)||"":function(n,e){const t=function(n){return n instanceof pR&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?go(n):function(n){return(n=String(n)).match(o4)||n.match(a4)?n:"unsafe:"+n}(Je(n))}const IR="__ngContext__";function pr(n,e){n[IR]=e}function vw(n){const e=function(n){return n[IR]||null}(n);return e?Array.isArray(e)?e:e.lView:null}function Ew(n){return n.ngOriginalError}function R4(n,...e){n.error(...e)}class Wu{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),r=(n=e)&&n.ngErrorLogger||R4;var n;r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ew(e);for(;t&&Ew(t);)t=Ew(t);return t||null}}const AR=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function rs(n){return n instanceof Function?n():n}var ei=(()=>((ei=ei||{})[ei.Important=1]="Important",ei[ei.DashCase=2]="DashCase",ei))();function Cw(n,e){return undefined(n,e)}function vd(n){const e=n[3];return ki(e)?e[3]:e}function Iw(n){return OR(n[13])}function Tw(n){return OR(n[4])}function OR(n){for(;null!==n&&!ki(n);)n=n[4];return n}function qu(n,e,t,r,i){if(null!=r){let s,o=!1;ki(r)?s=r:Zi(r)&&(o=!0,r=r[0]);const a=_n(r);0===n&&null!==t?null==i?BR(e,t,a):fa(e,t,a,i||null,!0):1===n&&null!==t?fa(e,t,a,i||null,!0):2===n?function(n,e,t){const r=ag(n,e);r&&function(n,e,t,r){tn(n)?n.removeChild(e,t,r):e.removeChild(t)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function(n,e,t,r,i){const s=t[7];s!==_n(t)&&qu(e,n,r,s,i);for(let a=10;a<t.length;a++){const u=t[a];wd(u[1],u,n,e,r,s)}}(e,n,s,t,i)}}function Sw(n,e,t){return tn(n)?n.createElement(e,t):null===t?n.createElement(e):n.createElementNS(t,e)}function FR(n,e){const t=n[9],r=t.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,zv(i,-1)),t.splice(r,1)}function xw(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&FR(i,r),e>0&&(n[t-1][4]=r[4]);const s=Xp(n,10+e);!function(n,e){wd(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function LR(n,e){if(!(256&e[2])){const t=e[11];tn(t)&&t.destroyNode&&wd(n,e,t,3,null,null),function(n){let e=n[13];if(!e)return Aw(n[1],n);for(;e;){let t=null;if(Zi(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Zi(e)&&Aw(e[1],e),e=e[3];null===e&&(e=n),Zi(e)&&Aw(e[1],e),t=e&&e[4]}e=t}}(e)}}function Aw(n,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof nd)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):_n(e[o]),u=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(n,e),1===e[1].type&&tn(e[11])&&e[11].destroy();const t=e[17];if(null!==t&&ki(e[3])){t!==e[3]&&FR(t,e);const r=e[19];null!==r&&r.detachView(n)}}}function VR(n,e,t){return function(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===dr.None||i===dr.Emulated)return null}return mi(r,t)}(n,e.parent,t)}function fa(n,e,t,r,i){tn(n)?n.insertBefore(e,t,r,i):e.insertBefore(t,r,i)}function BR(n,e,t){tn(n)?n.appendChild(e,t):e.appendChild(t)}function jR(n,e,t,r,i){null!==r?fa(n,e,t,r,i):BR(n,e,t)}function ag(n,e){return tn(n)?n.parentNode(e):e.parentNode}let GR=function(n,e,t){return 40&n.type?mi(n,t):null};function ug(n,e,t,r){const i=VR(n,r,e),s=e[11],a=function(n,e,t){return GR(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)jR(s,i,t[u],a,!1);else jR(s,i,t,a,!1)}function cg(n,e){if(null!==e){const t=e.type;if(3&t)return mi(e,n);if(4&t)return Rw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return cg(n,r);{const i=n[e.index];return ki(i)?Rw(-1,i):_n(i)}}if(32&t)return Cw(e,n)()||_n(n[e.index]);{const r=zR(n,e);return null!==r?Array.isArray(r)?r[0]:cg(vd(n[16]),r):cg(n,e.next)}}return null}function zR(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Rw(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return cg(r,i)}return e[7]}function kw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&pr(_n(a),r),t.flags|=4),64!=(64&t.flags))if(8&u)kw(n,e,t.child,r,i,s,!1),qu(e,n,i,a,s);else if(32&u){const c=Cw(t,r);let d;for(;d=c();)qu(e,n,i,d,s);qu(e,n,i,a,s)}else 16&u?KR(n,e,r,t,i,s):qu(e,n,i,a,s);t=o?t.projectionNext:t.next}}function wd(n,e,t,r,i,s){kw(t,r,n.firstChild,e,i,s,!1)}function KR(n,e,t,r,i,s){const o=t[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)qu(e,n,i,u[c],s);else kw(n,e,u,o[3],i,s,!0)}function QR(n,e,t){tn(n)?n.setAttribute(e,"style",t):e.style.cssText=t}function Nw(n,e,t){tn(n)?""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t):e.className=t}function YR(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const JR="ng-template";function s6(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==YR(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function XR(n){return 4===n.type&&n.value!==JR}function o6(n,e,t){return e===(4!==n.type||t?n.value:JR)}function a6(n,e,t){let r=4;const i=n.attrs||[],s=function(n){for(let e=0;e<n.length;e++)if(jM(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!o6(n,u,t)||""===u&&1===e.length){if(Oi(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!s6(n.attrs,c,t)){if(Oi(r))return!1;o=!0}continue}const h=u6(8&r?"class":u,i,XR(n),t);if(-1===h){if(Oi(r))return!1;o=!0;continue}if(""!==c){let m;m=h>s?"":i[h+1].toLowerCase();const y=8&r?m:null;if(y&&-1!==YR(y,c,0)||2&r&&c!==m){if(Oi(r))return!1;o=!0}}}}else{if(!o&&!Oi(r)&&!Oi(u))return!1;if(o&&Oi(u))continue;o=!1,r=u|1&r}}return Oi(r)||o}function Oi(n){return 0==(1&n)}function u6(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ZR(n,e,t=!1){for(let r=0;r<e.length;r++)if(a6(n,e[r],t))return!0;return!1}function ek(n,e){return n?":not("+e.trim()+")":e}function f6(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Oi(o)&&(e+=ek(s,i),i=""),r=o,s=s||!Oi(r);t++}return""!==i&&(e+=ek(s,i)),e}const rt={};function yi(n){tk(vt(),ce(),br()+n,Up())}function tk(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Gp(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Wp(e,s,0,t)}fo(t)}function lg(n,e){return n<<17|e<<2}function Pi(n){return n>>17&32767}function Ow(n){return 2|n}function Os(n){return(131068&n)>>2}function Pw(n,e){return-131069&n|e<<2}function Fw(n){return 1|n}function hk(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];Jv(i),o.contentQueries(2,e[s],s)}}}function Ed(n,e,t,r,i,s,o,a,u,c){const d=e.blueprint.slice();return d[0]=i,d[2]=140|r,AM(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=u||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[16]=2==e.type?n[16]:d,d}function Ku(n,e,t,r,i){let s=n.data[e];if(null===s)s=function(n,e,t,r,i){const s=RM(),o=qv(),u=n.data[e]=function(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(n,e,t,r,i),Xe.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function(){const n=Xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return es(s,!0),s}function Qu(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function bd(n,e,t){jp(e);try{const r=n.viewQuery;null!==r&&e0(1,r,t);const i=n.template;null!==i&&fk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&hk(n,e),n.staticViewQueries&&e0(2,n.viewQuery,t);const s=n.components;null!==s&&function(n,e){for(let t=0;t<e.length;t++)Q6(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,$p()}}function Yu(n,e,t,r){const i=e[2];if(256==(256&i))return;jp(e);const s=Up();try{AM(e),function(n){Xe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&fk(n,e,t,2,r);const o=3==(3&i);if(!s)if(o){const c=n.preOrderCheckHooks;null!==c&&Gp(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Wp(e,c,0,null),Xv(e,0)}if(function(n){for(let e=Iw(n);null!==e;e=Tw(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(1024&i[2])&&zv(s,1),i[2]|=1024}}}(e),function(n){for(let e=Iw(n);null!==e;e=Tw(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Wv(r)&&Yu(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&hk(n,e),!s)if(o){const c=n.contentCheckHooks;null!==c&&Gp(e,c)}else{const c=n.contentHooks;null!==c&&Wp(e,c,1),Xv(e,1)}!function(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)fo(~i);else{const s=i,o=t[++r],a=t[++r];eq(o,s),a(2,e[s])}}}finally{fo(-1)}}(n,e);const a=n.components;null!==a&&function(n,e){for(let t=0;t<e.length;t++)K6(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&e0(2,u,r),!s)if(o){const c=n.viewCheckHooks;null!==c&&Gp(e,c)}else{const c=n.viewHooks;null!==c&&Wp(e,c,2),Xv(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,zv(e[3],-1))}finally{$p()}}function A6(n,e,t,r){const i=e[10],s=!Up(),o=function(n){return 4==(4&n[2])}(e);try{s&&!o&&i.begin&&i.begin(),o&&bd(n,e,r),Yu(n,e,t,r)}finally{s&&!o&&i.end&&i.end()}}function fk(n,e,t,r,i){const s=br(),o=2&r;try{fo(-1),o&&e.length>20&&tk(n,e,20,Up()),t(r,i)}finally{fo(s)}}function zw(n,e,t){!MM()||(function(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||id(t,e),pr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],c=Ni(u);c&&H6(e,t,u);const d=sd(e,n,a,t);pr(d,e),null!==o&&G6(0,a-i,d,u,0,o),c&&(Jr(t.index,e)[8]=d)}}(n,e,t,mi(t,e)),128==(128&t.flags)&&function(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,a=Xe.lFrame.currentDirectiveIndex;try{fo(o);for(let u=r;u<i;u++){const c=n.data[u],d=e[u];Qv(u),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&bk(c,d)}}finally{fo(-1),Qv(a)}}(n,e,t))}function qw(n,e,t=mi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function gk(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=fg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function fg(n,e,t,r,i,s,o,a,u,c){const d=20+r,h=d+i,m=function(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:rt);return t}(d,h),y="function"==typeof c?c():c;return m[1]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:y,incompleteFirstPass:!1}}function vk(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Kw(n,e,t,r){let i=!1;if(MM()){const s=function(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ZR(t,o.selectors,!1)&&(i||(i=[]),Yp(id(t,e),n,o.type),Ni(o)?(Ck(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,Ik(t,n.data.length,s.length);for(let d=0;d<s.length;d++){const h=s[d];h.providersResolver&&h.providersResolver(h)}let a=!1,u=!1,c=Qu(n,e,s.length,null);for(let d=0;d<s.length;d++){const h=s[d];t.mergedAttrs=qp(t.mergedAttrs,h.hostAttrs),Tk(n,t,e,c,h),$6(c,h,o),null!==h.contentQueries&&(t.flags|=8),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=128);const m=h.type.prototype;!a&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),u=!0),c++}!function(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,u=null;for(let c=e.directiveStart;c<r;c++){const d=i[c],h=d.inputs,m=null===s||XR(e)?null:W6(h,s);o.push(m),a=vk(h,c,a),u=vk(d.outputs,c,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=u}(n,t)}o&&function(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new ur("301",`Export of name '${e[i+1]}' not found!`);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=qp(t.mergedAttrs,t.attrs),i}function Ek(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const u=~e.index;(function(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=u&&a.push(u),a.push(r,i,o)}}function bk(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Ck(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function $6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ni(e)&&(t[""]=n)}}function Ik(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Tk(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ha(i.type)),o=new nd(s,Ni(i),null);n.blueprint[r]=o,t[r]=o,Ek(n,e,0,r,Qu(n,t,i.hostVars,rt),i)}function H6(n,e,t){const r=mi(e,n),i=gk(t),s=n[10],o=pg(n,Ed(n,i,null,t.onPush?64:16,r,e,s,s.createRenderer(r,t),null,null));n[e.index]=o}function is(n,e,t,r,i,s){const o=mi(n,e);!function(n,e,t,r,i,s,o){if(null==s)tn(n)?n.removeAttribute(e,i,t):e.removeAttribute(i);else{const a=null==o?Je(s):o(s,r||"",i);tn(n)?n.setAttribute(e,i,a,t):t?e.setAttributeNS(t,i,a):e.setAttribute(i,a)}}(e[11],o,s,n.value,t,r,i)}function G6(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const c=o[u++],d=o[u++],h=o[u++];null!==a?r.setInput(t,h,c,d):t[d]=h}}}function W6(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Dk(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function K6(n,e){const t=Jr(e,n);if(Wv(t)){const r=t[1];80&t[2]?Yu(r,t,r.template,t[8]):t[5]>0&&Yw(t)}}function Yw(n){for(let r=Iw(n);null!==r;r=Tw(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];Yu(o,s,o.template,s[8])}else s[5]>0&&Yw(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Jr(t[r],n);Wv(i)&&i[5]>0&&Yw(i)}}function Q6(n,e){const t=Jr(e,n),r=t[1];(function(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),bd(r,t,t[8])}function pg(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Jw(n){for(;n;){n[2]|=64;const e=vd(n);if(Nz(n)&&!e)return n;n=e}return null}function Zw(n,e,t){const r=e[10];r.begin&&r.begin();try{Yu(n,e,n.template,t)}catch(i){throw Rk(e,i),i}finally{r.end&&r.end()}}function Sk(n){!function(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=vw(t),i=r[1];A6(i,r,i.template,t)}}(n[8])}function e0(n,e,t){Jv(0),e(n,t)}const e8=(()=>Promise.resolve(null))();function xk(n){return n[7]||(n[7]=[])}function Ak(n){return n.cleanup||(n.cleanup=[])}function Rk(n,e){const t=n[9],r=t?t.get(Wu,null):null;r&&r.handleError(e)}function kk(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],u=e[o],c=n.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Ps(n,e,t){const r=Vp(e,n);!function(n,e,t){tn(n)?n.setValue(e,t):e.textContent=t}(n[11],r,t)}function gg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=zl(i,a):2==s&&(r=zl(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}const t0=new Ke("INJECTOR",-1);class Nk{get(e,t=ld){if(t===ld){const r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return t}}const n0=new Ke("Set Injector scope."),Cd={},r8={};let r0;function Ok(){return void 0===r0&&(r0=new Nk),r0}function Pk(n,e=null,t=null,r){const i=Fk(n,e,t,r);return i._resolveInjectorDefTypes(),i}function Fk(n,e=null,t=null,r){return new i8(n,t,e||Ok(),r)}class i8{constructor(e,t,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&ts(t,a=>this.processProvider(a,e,t)),ts([e],a=>this.processInjectorType(a,[],s)),this.records.set(t0,Ju(void 0,this));const o=this.records.get(n0);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:ft(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ld,r=W.Default){this.assertNotDestroyed();const i=sR(this),s=Oe(void 0);try{if(!(r&W.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=("function"==typeof(n=e)||"object"==typeof n&&n instanceof Ke)&&_(e);a=u&&this.injectableDefInScope(u)?Ju(s0(e),Cd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&W.Self?Ok():this.parent).get(e,t=r&W.Optional&&t===ld?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[eg]=o[eg]||[]).unshift(ft(e)),i)throw o;return function(n,e,t,r){const i=n[eg];throw e[iR]&&i.unshift(e[iR]),n.message=function(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ft(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Oq,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[eg]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Oe(s),sR(i)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(ft(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,r){if(!(e=nt(e)))return!1;let i=A(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=A(s)),null==i)return!1;if(null!=i.imports&&!a){let d;r.push(o);try{ts(i.imports,h=>{this.processInjectorType(h,t,r)&&(void 0===d&&(d=[]),d.push(h))})}finally{}if(void 0!==d)for(let h=0;h<d.length;h++){const{ngModule:m,providers:y}=d[h];ts(y,T=>this.processProvider(T,m,y||Nt))}}this.injectorDefTypes.add(o);const u=ha(o)||(()=>new o);this.records.set(o,Ju(u,Cd));const c=i.providers;if(null!=c&&!a){const d=e;ts(c,h=>this.processProvider(h,d,c))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,r){let i=Xu(e=nt(e))?e:nt(e&&e.provide);const s=(n=e,Vk(n)?Ju(void 0,n.useValue):Ju(Lk(n),Cd));var n;if(Xu(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=Ju(void 0,Cd,!0),o.factory=()=>lw(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,t){return t.value===Cd&&(t.value=r8,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=nt(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function s0(n){const e=_(n),t=null!==e?e.factory:ha(n);if(null!==t)return t;if(n instanceof Ke)throw new Error(`Token ${ft(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const e=n.length;if(e>0){const r=function(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?");throw new Error(`Can't resolve all parameters for ${ft(n)}: (${r.join(", ")}).`)}const t=function(n){const e=n&&(n[M]||n[F]);if(e){const t=function(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Error("unreachable")}function Lk(n,e,t){let r;if(Xu(n)){const i=nt(n);return ha(i)||s0(i)}if(Vk(n))r=()=>nt(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...lw(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>Pe(nt(n.useExisting));else{const i=nt(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return ha(i)||s0(i);r=()=>new i(...lw(n.deps))}return r}function Ju(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vk(n){return null!==n&&"object"==typeof n&&Fq in n}function Xu(n){return"function"==typeof n}let Kt=(()=>{class n{static create(t,r){var i;if(Array.isArray(t))return Pk({name:""},r,t,"");{const s=null!==(i=t.name)&&void 0!==i?i:"";return Pk({name:s},t.parent,t.providers,s)}}}return n.THROW_IF_NOT_FOUND=ld,n.NULL=new Nk,n.\u0275prov=D({token:n,providedIn:"any",factory:()=>Pe(t0)}),n.__NG_ELEMENT_ID__=-1,n})();function w8(n,e){Hp(vw(n)[1],Tn())}function Ft(n){let e=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ni(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=u0(n.inputs),o.declaredInputs=u0(n.declaredInputs),o.outputs=u0(n.outputs);const a=i.hostBindings;a&&I8(n,a);const u=i.viewQuery,c=i.contentQueries;if(u&&b8(n,u),c&&C8(n,c),Wl(n.inputs,i.inputs),Wl(n.declaredInputs,i.declaredInputs),Wl(n.outputs,i.outputs),Ni(i)&&i.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ft&&(t=!1)}}e=Object.getPrototypeOf(e)}!function(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qp(i.hostAttrs,t=qp(t,i.hostAttrs))}}(r)}function u0(n){return n===Du?{}:n===Nt?[]:n}function b8(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function C8(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function I8(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let mg=null;function Zu(){if(!mg){const n=At.Symbol;if(n&&n.iterator)mg=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(mg=r)}}}return mg}function Id(n){return!!c0(n)&&(Array.isArray(n)||!(n instanceof Map)&&Zu()in n)}function c0(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function gr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function os(n,e,t,r){const i=ce();return gr(i,Nu(),e)&&(vt(),is(nn(),i,n,e,t,r)),os}function nc(n,e,t,r,i,s){const a=function(n,e,t,r){const i=gr(n,e,t);return gr(n,e+1,r)||i}(n,Xe.lFrame.bindingIndex,t,i);return Ns(2),a?e+Je(t)+r+Je(i)+s:rt}function yo(n,e,t,r,i,s,o,a){const u=ce(),c=vt(),d=n+20,h=c.firstCreatePass?function(n,e,t,r,i,s,o,a,u){const c=e.consts,d=Ku(e,n,4,o||null,ho(c,a));Kw(e,t,d,ho(c,u)),Hp(e,d);const h=d.tViews=fg(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,c,u,e,t,r,i,s,o):c.data[d];es(h,!1);const m=u[11].createComment("");ug(c,u,m,h),pr(m,u),pg(u,u[d]=Dk(m,u,m,h)),Lp(h)&&zw(c,u,h),null!=o&&qw(u,h,a)}function le(n,e=W.Default){const t=ce();return null===t?Pe(n,e):KM(Tn(),t,nt(n),e)}function p0(){throw new Error("invalid")}function Li(n,e,t){const r=ce();return gr(r,Nu(),e)&&function(n,e,t,r,i,s,o,a){const u=mi(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[r])?(kk(n,t,d,r,i),Fp(e)&&function(n,e){const t=Jr(e,n);16&t[2]||(t[2]|=64)}(t,e.index)):3&e.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,tn(s)?s.setProperty(u,r,i):ew(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(vt(),nn(),r,n,e,r[11],t,!1),Li}function g0(n,e,t,r,i){const o=i?"class":"style";kk(n,t,e.inputs[o],o,r)}function ln(n,e,t,r){const i=ce(),s=vt(),o=20+n,a=i[11],u=i[o]=Sw(a,e,Xe.lFrame.currentNamespace),c=s.firstCreatePass?function(n,e,t,r,i,s,o){const a=e.consts,c=Ku(e,n,2,i,ho(a,s));return Kw(e,t,c,ho(a,o)),null!==c.attrs&&gg(c,c.attrs,!1),null!==c.mergedAttrs&&gg(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];es(c,!0);const d=c.mergedAttrs;null!==d&&zp(a,u,d);const h=c.classes;null!==h&&Nw(a,u,h);const m=c.styles;null!==m&&QR(a,u,m),64!=(64&c.flags)&&ug(s,i,u,c),0===Xe.lFrame.elementDepthCount&&pr(u,i),Xe.lFrame.elementDepthCount++,Lp(c)&&(zw(s,i,c),function(n,e,t){if(Uv(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}(s,c,i)),null!==r&&qw(i,c)}function dn(){let n=Tn();qv()?Xe.lFrame.isParent=!1:(n=n.parent,es(n,!1));const e=n;Xe.lFrame.elementDepthCount--;const t=vt();t.firstCreatePass&&(Hp(t,n),Uv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(e)&&g0(t,e,ce(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(e)&&g0(t,e,ce(),e.stylesWithoutHost,!1)}function Dd(n,e,t,r){ln(n,e,t,r),dn()}function Sd(n){return!!n&&"function"==typeof n.then}const m0=function(n){return!!n&&"function"==typeof n.subscribe};function Ir(n,e,t,r){const i=ce(),s=vt(),o=Tn();return function(n,e,t,r,i,s,o,a){const u=Lp(r),d=n.firstCreatePass&&Ak(n),h=e[8],m=xk(e);let y=!0;if(3&r.type||a){const U=mi(r,e),K=a?a(U):U,$=m.length,ae=a?pe=>a(_n(pe[r.index])):r.index;if(tn(t)){let pe=null;if(!a&&u&&(pe=function(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==pe)(pe.__ngLastListenerFn__||pe).__ngNextListenerFn__=s,pe.__ngLastListenerFn__=s,y=!1;else{s=_0(r,e,h,s,!1);const xe=t.listen(K,i,s);m.push(s,xe),d&&d.push(i,ae,$,$+1)}}else s=_0(r,e,h,s,!0),K.addEventListener(i,s,o),m.push(s),d&&d.push(i,ae,$,o)}else s=_0(r,e,h,s,!1);const T=r.outputs;let N;if(y&&null!==T&&(N=T[i])){const U=N.length;if(U)for(let K=0;K<U;K+=2){const ze=e[N[K]][N[K+1]].subscribe(s),kt=m.length;m.push(s,ze),d&&d.push(i,r.index,kt,-(kt+1))}}}(s,i,i[11],o,n,e,!!t,r),Ir}function bN(n,e,t,r){try{return!1!==t(r)}catch(i){return Rk(n,i),!1}}function _0(n,e,t,r,i){return function s(o){if(o===Function)return r;const a=2&n.flags?Jr(n.index,e):e;0==(32&e[2])&&Jw(a);let u=bN(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)u=bN(e,0,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function vg(n=1){return function(n){return(Xe.lFrame.contextLView=function(n,e){for(;n>0;)e=e[15],n--;return e}(n,Xe.lFrame.contextLView))[8]}(n)}function kN(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Pi(s):Os(s),u=!1;for(;0!==a&&(!1===u||o);){const d=n[a+1];u5(n[a],e)&&(u=!0,n[a+1]=r?Fw(d):Ow(d)),a=r?Pi(d):Os(d)}u&&(n[t+1]=r?Ow(s):Fw(s))}function u5(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ju(n,e)>=0}function wg(n,e){return function(n,e,t,r){const i=ce(),s=vt(),o=Ns(2);s.firstUpdatePass&&function(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[br()],o=function(n,e){return e>=n.expandoStartIndex}(n,t);(function(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function(n,e,t,r){const i=function(n){const e=Xe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=xd(t=v0(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=v0(i,n,e,t,r),null===s){let u=function(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Os(r))return n[Pi(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=v0(null,n,e,u[1],r),u=xd(u,e.attrs,r),function(n,e,t,r){n[Pi(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=xd(r,n[s].hostAttrs,t);return xd(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Pi(o),u=Os(o);n[r]=t;let d,c=!1;if(Array.isArray(t)){const h=t;d=h[1],(null===d||ju(h,d)>0)&&(c=!0)}else d=t;if(i)if(0!==u){const m=Pi(n[a+1]);n[r+1]=lg(m,a),0!==m&&(n[m+1]=Pw(n[m+1],r)),n[a+1]=function(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=lg(a,0),0!==a&&(n[a+1]=Pw(n[a+1],r)),a=r;else n[r+1]=lg(u,0),0===a?a=r:n[u+1]=Pw(n[u+1],r),u=r;c&&(n[r+1]=Ow(n[r+1])),kN(n,d,r,!0),kN(n,d,r,!1),function(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ju(s,e)>=0&&(t[r+1]=Fw(t[r+1]))}(e,d,n,r,s),o=lg(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==rt&&gr(i,o,e)&&function(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,c=u[a+1];Eg(function(n){return 1==(1&n)}(c)?GN(u,e,t,i,Os(c),o):void 0)||(Eg(s)||function(n){return 2==(2&n)}(c)&&(s=GN(u,null,t,i,a,o)),function(n,e,t,r,i){const s=tn(n);if(e)i?s?n.addClass(t,r):t.classList.add(r):s?n.removeClass(t,r):t.classList.remove(r);else{let o=-1===r.indexOf("-")?void 0:ei.DashCase;if(null==i)s?n.removeStyle(t,r,o):t.style.removeProperty(r);else{const a="string"==typeof i&&i.endsWith("!important");a&&(i=i.slice(0,-10),o|=ei.Important),s?n.setStyle(t,r,i,o):t.style.setProperty(r,i,a?"important":"")}}}(r,o,Vp(br(),t),i,s))}(s,s.data[br()],i,i[11],n,i[o+1]=function(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ft(go(n)))),n}(e,t),r,o)}(n,e,null,!0),wg}function v0(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=xd(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function xd(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Zr(n,o,!!t||e[++s]))}return void 0===n?null:n}function GN(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),d=c?u[1]:u,h=null===d;let m=t[i+1];m===rt&&(m=h?Nt:void 0);let y=h?aw(m,r):d===r?m:void 0;if(c&&!Eg(y)&&(y=aw(u,r)),Eg(y)&&(a=y,o))return a;const T=n[i+1];i=o?Pi(T):Os(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=aw(u,r))}return a}function Eg(n){return void 0!==n}function wi(n,e=""){const t=ce(),r=vt(),i=n+20,s=r.firstCreatePass?Ku(r,i,1,e,null):r.data[i],o=t[i]=function(n,e){return tn(n)?n.createText(e):n.createTextNode(e)}(t[11],e);ug(r,t,o,s),es(s,!1)}function bg(n){return Ad("",n,""),bg}function Ad(n,e,t){const r=ce(),i=function(n,e,t,r){return gr(n,Nu(),t)?e+Je(t)+r:rt}(r,n,e,t);return i!==rt&&Ps(r,br(),i),Ad}function Cg(n,e,t,r,i){const s=ce(),o=nc(s,n,e,t,r,i);return o!==rt&&Ps(s,br(),o),Cg}const ga=void 0;var H5=["en",[["a","p"],["AM","PM"],ga],[["AM","PM"],ga,ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ga,"{1} 'at' {0}",ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let dc={};function dO(n){return n in dc||(dc[n]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[n]),dc[n]}var Se=(()=>((Se=Se||{})[Se.LocaleId=0]="LocaleId",Se[Se.DayPeriodsFormat=1]="DayPeriodsFormat",Se[Se.DayPeriodsStandalone=2]="DayPeriodsStandalone",Se[Se.DaysFormat=3]="DaysFormat",Se[Se.DaysStandalone=4]="DaysStandalone",Se[Se.MonthsFormat=5]="MonthsFormat",Se[Se.MonthsStandalone=6]="MonthsStandalone",Se[Se.Eras=7]="Eras",Se[Se.FirstDayOfWeek=8]="FirstDayOfWeek",Se[Se.WeekendRange=9]="WeekendRange",Se[Se.DateFormat=10]="DateFormat",Se[Se.TimeFormat=11]="TimeFormat",Se[Se.DateTimeFormat=12]="DateTimeFormat",Se[Se.NumberSymbols=13]="NumberSymbols",Se[Se.NumberFormats=14]="NumberFormats",Se[Se.CurrencyCode=15]="CurrencyCode",Se[Se.CurrencySymbol=16]="CurrencySymbol",Se[Se.CurrencyName=17]="CurrencyName",Se[Se.Currencies=18]="Currencies",Se[Se.Directionality=19]="Directionality",Se[Se.PluralCase=20]="PluralCase",Se[Se.ExtraData=21]="ExtraData",Se))();const Ig="en-US";let hO=Ig;function b0(n,e,t,r,i){if(n=nt(n),Array.isArray(n))for(let s=0;s<n.length;s++)b0(n[s],e,t,r,i);else{const s=vt(),o=ce();let a=Xu(n)?n:nt(n.provide),u=Lk(n);const c=Tn(),d=1048575&c.providerIndexes,h=c.directiveStart,m=c.providerIndexes>>20;if(Xu(n)||!n.multi){const y=new nd(u,i,le),T=I0(a,e,i?d:d+m,h);-1===T?(Yp(id(c,o),s,a),C0(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(y),o.push(y)):(t[T]=y,o[T]=y)}else{const y=I0(a,e,d+m,h),T=I0(a,e,d,d+m),N=y>=0&&t[y],U=T>=0&&t[T];if(i&&!U||!i&&!N){Yp(id(c,o),s,a);const K=function(n,e,t,r,i){const s=new nd(n,t,le);return s.multi=[],s.index=e,s.componentProviders=0,FO(s,i,r&&!t),s}(i?j7:B7,t.length,i,r,u);!i&&U&&(t[T].providerFactory=K),C0(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(K),o.push(K)}else C0(s,n,y>-1?y:T,FO(t[i?T:y],u,!i&&r));!i&&r&&U&&t[T].componentProviders++}}}function C0(n,e,t,r){const i=Xu(e),s=function(n){return!!n.useClass}(e);if(i||s){const u=(s?nt(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[r,u]):c[d+1].push(r,u)}else c.push(t,u)}}}function FO(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function I0(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function B7(n,e,t,r){return T0(this.multi,[])}function j7(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=sd(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),T0(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],T0(i,s);return s}function T0(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Gt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function(n,e,t){const r=vt();if(r.firstCreatePass){const i=Ni(n);b0(t,r.data,r.blueprint,i,!0),b0(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class LO{}class W7{resolveComponentFactory(e){throw function(n){const e=Error(`No component factory found for ${ft(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let fc=(()=>{class n{}return n.NULL=new W7,n})();function z7(){return pc(Tn(),ce())}function pc(n,e){return new ni(mi(n,e))}let ni=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=z7,n})();class UO{}let Fs=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function(){const n=ce(),t=Jr(Tn().index,n);return function(n){return n[11]}(Zi(t)?t:n)}(),n})(),Y7=(()=>{class n{}return n.\u0275prov=D({token:n,providedIn:"root",factory:()=>null}),n})();class gc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const BO=new gc("13.1.1"),D0={};function Ag(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(_n(s)),ki(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1].firstChild;null!==c&&Ag(u[1],u,c,r)}const o=t.type;if(8&o)Ag(n,e,t.child,r);else if(32&o){const a=Cw(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=zR(e,t);if(Array.isArray(a))r.push(...a);else{const u=vd(e[16]);Ag(u[1],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Od{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Ag(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ki(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(xw(e,r),Xp(t,r))}this._attachedToViewContainer=!1}LR(this._lView[1],this._lView)}onDestroy(e){!function(n,e,t,r){const i=xk(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Ak(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Jw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,e,t){Bp(!0);try{Zw(n,e,t)}finally{Bp(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,wd(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class J7 extends Od{constructor(e){super(e),this._view=e}detectChanges(){Sk(this._view)}checkNoChanges(){!function(n){Bp(!0);try{Sk(n)}finally{Bp(!1)}}(this._view)}get context(){return null}}class jO extends fc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=hr(e);return new S0(t,this.ngModule)}}function $O(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}const Z7=new Ke("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>AR});class S0 extends LO{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(f6).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return $O(this.componentDef.inputs)}get outputs(){return $O(this.componentDef.outputs)}create(e,t,r,i){const s=(i=i||this.ngModule)?function(n,e){return{get:(t,r,i)=>{const s=n.get(t,D0,i);return s!==D0||r===D0?s:e.get(t,r,i)}}}(e,i.injector):e,o=s.get(UO,SM),a=s.get(Y7,null),u=o.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function(n,e,t){if(tn(n))return n.selectRootElement(e,t===dr.ShadowDom);let r="string"==typeof e?n.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):Sw(o.createRenderer(null,this.componentDef),c,function(n){const e=n.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(c)),h=this.componentDef.onPush?576:528,m=function(n,e){return{components:[],scheduler:n||AR,clean:e8,playerHandler:e||null,flags:0}}(),y=fg(0,null,null,1,0,null,null,null,null,null),T=Ed(null,y,m,h,null,null,o,u,a,s);let N,U;jp(T);try{const K=function(n,e,t,r,i,s){const o=t[1];t[20]=n;const u=Ku(o,20,2,"#host",null),c=u.mergedAttrs=e.hostAttrs;null!==c&&(gg(u,c,!0),null!==n&&(zp(i,n,c),null!==u.classes&&Nw(i,n,u.classes),null!==u.styles&&QR(i,n,u.styles)));const d=r.createRenderer(n,e),h=Ed(t,gk(e),null,e.onPush?64:16,t[20],u,r,d,s||null,null);return o.firstCreatePass&&(Yp(id(u,t),o,e.type),Ck(o,u),Ik(u,t.length,1)),pg(t,h),t[20]=h}(d,this.componentDef,T,o,u);if(d)if(r)zp(u,d,["ng-version",BO.full]);else{const{attrs:$,classes:ae}=function(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Oi(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);$&&zp(u,d,$),ae&&ae.length>0&&Nw(u,d,ae.join(" "))}if(U=Gv(y,20),void 0!==t){const $=U.projection=[];for(let ae=0;ae<this.ngContentSelectors.length;ae++){const pe=t[ae];$.push(null!=pe?Array.from(pe):null)}}N=function(n,e,t,r,i){const s=t[1],o=function(n,e,t){const r=Tn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Tk(n,r,e,Qu(n,e,1,null),t));const i=sd(e,n,r.directiveStart,r);pr(i,e);const s=mi(r,e);return s&&pr(s,e),i}(s,t,e);if(r.components.push(o),n[8]=o,i&&i.forEach(u=>u(o,e)),e.contentQueries){const u=Tn();e.contentQueries(1,o,u.directiveStart)}const a=Tn();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fo(a.index),Ek(t[1],a,0,a.directiveStart,a.directiveEnd,e),bk(e,o)),o}(K,this.componentDef,T,m,[w8]),bd(y,T,null)}finally{$p()}return new nK(this.componentType,N,pc(U,T),T,U)}}class nK extends class{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new J7(i),this.componentType=e}get injector(){return new Fu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Ls{}class HO{}const mc=new Map;class zO extends Ls{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jO(this);const r=fi(e);this._bootstrapComponents=rs(r.bootstrap),this._r3Injector=Fk(e,t,[{provide:Ls,useValue:this},{provide:fc,useValue:this.componentFactoryResolver}],ft(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Kt.THROW_IF_NOT_FOUND,r=W.Default){return e===Kt||e===Ls||e===t0?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class x0 extends HO{constructor(e){super(),this.moduleType=e,null!==fi(e)&&function(n){const e=new Set;!function t(r){const i=fi(r,!0),s=i.id;null!==s&&(function(n,e,t){if(e&&e!==t)throw new Error(`Duplicate module registered for ${n} - ${ft(e)} vs ${ft(e.name)}`)}(s,mc.get(s),r),mc.set(s,r));const o=rs(i.imports);for(const a of o)e.has(a)||(e.add(a),t(a))}(n)}(e)}create(e){return new zO(this.moduleType,e)}}function A0(n){return e=>{setTimeout(n,void 0,e)}}const sn=class extends Ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){var i,s,o;let a=e,u=t||(()=>null),c=r;if(e&&"object"==typeof e){const h=e;a=null===(i=h.next)||void 0===i?void 0:i.bind(h),u=null===(s=h.error)||void 0===s?void 0:s.bind(h),c=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}this.__isAsync&&(u=A0(u),a&&(a=A0(a)),c&&(c=A0(c)));const d=super.subscribe({next:a,error:u,complete:c});return e instanceof b&&e.add(d),d}};Symbol;let Vs=(()=>{class n{}return n.__NG_ELEMENT_ID__=DK,n})();const IK=Vs,TK=class extends IK{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e){const t=this._declarationTContainer.tViews,r=Ed(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(t)),bd(t,r,e),new Od(r)}};function DK(){return Mg(Tn(),ce())}function Mg(n,e){return 4&n.type?new TK(e,n,pc(n,e)):null}let Bi=(()=>{class n{}return n.__NG_ELEMENT_ID__=SK,n})();function SK(){return function(n,e){let t;const r=e[n.index];if(ki(r))t=r;else{let i;if(8&n.type)i=_n(r);else{const s=e[11];i=s.createComment("");const o=mi(n,e);fa(s,ag(s,o),i,function(n,e){return tn(n)?n.nextSibling(e):e.nextSibling}(s,o),!1)}e[n.index]=t=Dk(r,e,i,n),pg(e,t)}return new XO(t,n,e)}(Tn(),ce())}const xK=Bi,XO=class extends xK{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return pc(this._hostTNode,this._hostLView)}get injector(){return new Fu(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qp(this._hostTNode,this._hostLView);if(HM(e)){const t=Pu(e,this._hostLView),r=Ou(e);return new Fu(t[1].data[r+8],t)}return new Fu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=ZO(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){const i=e.createEmbeddedView(t||{});return this.insert(i,r),i}createComponent(e,t,r,i,s){const o=e&&!("function"==typeof e);let a;if(o)a=t;else{const h=t||{};a=h.index,r=h.injector,i=h.projectableNodes,s=h.ngModuleRef}const u=o?e:new S0(hr(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule&&c){const h=c.get(Ls,null);h&&(s=h)}const d=u.create(c,i,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const r=e._lView,i=r[1];if(ki(r[3])){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const h=r[3],m=new XO(h,h[6],h[3]);m.detach(m.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],ZM(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=128}(i,r,o,s);const a=Rw(s,o),u=r[11],c=ag(u,o[7]);return null!==c&&function(n,e,t,r,i,s){r[0]=i,r[6]=e,wd(n,r,t,1,i,s)}(i,o[6],u,r,c,a),e.attachToViewContainerRef(),ZM(R0(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=ZO(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=xw(this._lContainer,t);r&&(Xp(R0(this._lContainer),t),LR(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=xw(this._lContainer,t);return r&&null!=Xp(R0(this._lContainer),t)?new Od(r):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function ZO(n){return n[8]}function R0(n){return n[8]||(n[8]=[])}function oP(n,e){return Mg(n,e)}function Ng(...n){}const Vd=new Ke("Application Initializer");let yc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ng,this.reject=Ng,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Sd(s))t.push(s);else if(m0(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Pe(Vd,8))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const Ud=new Ke("AppId"),t9={provide:Ud,useFactory:function(){return`${W0()}${W0()}${W0()}`},deps:[]};function W0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const CP=new Ke("Platform Initializer"),vo=new Ke("Platform ID"),IP=new Ke("appBootstrapListener");let TP=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const wo=new Ke("LocaleId"),DP=new Ke("DefaultCurrencyCode");class n9{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Og=(()=>{class n{compileModuleSync(t){return new x0(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=rs(fi(t).declarations).reduce((o,a)=>{const u=hr(a);return u&&o.push(new S0(u)),o},[]);return new n9(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const i9=(()=>Promise.resolve(0))();function z0(n){"undefined"==typeof Zone?i9.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Lt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sn(!1),this.onMicrotaskEmpty=new sn(!1),this.onStable=new sn(!1),this.onError=new sn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let n=At.requestAnimationFrame,e=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(n){const e=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(At,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,K0(n),n.isCheckStableRunning=!0,q0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),K0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return SP(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),xP(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return SP(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),xP(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,K0(n),q0(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Lt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,o9,Ng,Ng);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const o9={};function q0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function K0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function SP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xP(n){n._nesting--,q0(n)}class c9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sn,this.onMicrotaskEmpty=new sn,this.onStable=new sn,this.onError=new sn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}let Q0=(()=>{class n{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),z0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())z0(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Pe(Lt))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),AP=(()=>{class n{constructor(){this._applications=new Map,Y0.addToWindow(this)}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Y0.findTestabilityInTree(this,t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();class l9{addToWindow(e){}findTestabilityInTree(e,t,r){return null}}let ji,Y0=new l9;const MP=new Ke("AllowMultipleToken");class RP{constructor(e,t){this.name=e,this.token=t}}function kP(n,e,t=[]){const r=`Platform: ${e}`,i=new Ke(r);return(s=[])=>{let o=NP();if(!o||o.injector.get(MP,!1))if(n)n(t.concat(s).concat({provide:i,useValue:!0}));else{const a=t.concat(s).concat({provide:i,useValue:!0},{provide:n0,useValue:"platform"});!function(n){if(ji&&!ji.destroyed&&!ji.injector.get(MP,!1))throw new ur("400","");ji=n.get(OP);const e=n.get(CP,null);e&&e.forEach(t=>t())}(Kt.create({providers:a,name:r}))}return function(n){const e=NP();if(!e)throw new ur("401","");return e}()}}function NP(){return ji&&!ji.destroyed?ji:null}let OP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const a=function(n,e){let t;return t="noop"===n?new c9:("zone.js"===n?void 0:n)||new Lt({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),t}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),u=[{provide:Lt,useValue:a}];return a.run(()=>{const c=Kt.create({providers:u,parent:this.injector,name:t.moduleType.name}),d=t.create(c),h=d.injector.get(Wu,null);if(!h)throw new ur("402","");return a.runOutsideAngular(()=>{const m=a.onError.subscribe({next:y=>{h.handleError(y)}});d.onDestroy(()=>{J0(this._modules,d),m.unsubscribe()})}),function(n,e,t){try{const r=t();return Sd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(h,a,()=>{const m=d.injector.get(yc);return m.runInitializers(),m.donePromise.then(()=>(function(n){lr(n,"Expected localeId to be defined"),"string"==typeof n&&(hO=n.toLowerCase().replace(/_/g,"-"))}(d.injector.get(wo,Ig)||Ig),this._moduleDoBootstrap(d),d))})})}bootstrapModule(t,r=[]){const i=PP({},r);return function(n,e,t){const r=new x0(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(vc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new ur("403","");t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ur("404","");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kt))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function PP(n,e){return Array.isArray(e)?e.reduce(PP,n):Object.assign(Object.assign({},n),e)}let vc=(()=>{class n{constructor(t,r,i,s,o){this._zone=t,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=s,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new G(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),u=new G(c=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),z0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const h=this._zone.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{d.unsubscribe(),h.unsubscribe()}});this.isStable=Ms(a,u.pipe(function(n={}){const{connector:e=(()=>new Ue),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o=null,a=null,u=null,c=0,d=!1,h=!1;const m=()=>{null==a||a.unsubscribe(),a=null},y=()=>{m(),o=u=null,d=h=!1},T=()=>{const N=o;y(),null==N||N.unsubscribe()};return Ae((N,U)=>{c++,!h&&!d&&m();const K=u=null!=u?u:e();U.add(()=>{c--,0===c&&!h&&!d&&(a=Gl(T,i))}),K.subscribe(U),o||(o=new Ee({next:$=>K.next($),error:$=>{h=!0,m(),a=Gl(y,t,$),K.error($)},complete:()=>{d=!0,m(),a=Gl(y,r),K.complete()}}),en(N).subscribe(o))})(s)}}()))}bootstrap(t,r){if(!this._initStatus.done)throw new ur("405","");let i;i=t instanceof LO?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(i.componentType);const s=function(n){return n.isBoundToModule}(i)?void 0:this._injector.get(Ls),a=i.create(Kt.NULL,[],r||i.selector,s),u=a.location.nativeElement,c=a.injector.get(Q0,null),d=c&&a.injector.get(AP);return c&&d&&d.registerApplication(u,c),a.onDestroy(()=>{this.detachView(a.hostView),J0(this.components,a),d&&d.unregisterApplication(u)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new ur("101","");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;J0(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(IP,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(t){return new(t||n)(Pe(Lt),Pe(Kt),Pe(Wu),Pe(fc),Pe(yc))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function J0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let LP=!0,Pg=(()=>{class n{}return n.__NG_ELEMENT_ID__=E9,n})();function E9(n){return function(n,e,t){if(Fp(n)&&!t){const r=Jr(n.index,e);return new Od(r,r)}return 47&n.type?new Od(e[16],e):null}(Tn(),ce(),16==(16&n))}class GP{constructor(){}supports(e){return Id(e)}create(e){return new x9(e)}}const S9=(n,e)=>e;class x9{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||S9}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<zP(r,i,s)?t:r,a=zP(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,d=u-i;if(c!=d){for(let m=0;m<c;m++){const y=m<s.length?s[m]:s[m]=0,T=y+m;d<=T&&T<c&&(s[m]=y+1)}s[o.previousIndex]=d-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Id(e))throw new Error(`Error trying to diff '${ft(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Zu()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new A9(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new WP),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class A9{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M9{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class WP{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new M9,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zP(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class qP{constructor(){}supports(e){return e instanceof Map||c0(e)}create(){return new R9}}class R9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||c0(e)))throw new Error(`Error trying to diff '${ft(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new k9(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class k9{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KP(){return new Bd([new GP])}let Bd=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||KP()),deps:[[n,new $u,new St]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'`)}}return n.\u0275prov=D({token:n,providedIn:"root",factory:KP}),n})();function QP(){return new wc([new qP])}let wc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||QP()),deps:[[n,new $u,new St]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return n.\u0275prov=D({token:n,providedIn:"root",factory:QP}),n})();const O9=[new qP],F9=new Bd([new GP]),L9=new wc(O9),V9=kP(null,"core",[{provide:vo,useValue:"unknown"},{provide:OP,deps:[Kt]},{provide:AP,deps:[]},{provide:TP,deps:[]}]),H9=[{provide:vc,useClass:vc,deps:[Lt,Kt,Wu,fc,yc]},{provide:Z7,deps:[Lt],useFactory:function(n){let e=[];return n.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:yc,useClass:yc,deps:[[new St,Vd]]},{provide:Og,useClass:Og,deps:[]},t9,{provide:Bd,useFactory:function(){return F9},deps:[]},{provide:wc,useFactory:function(){return L9},deps:[]},{provide:wo,useFactory:function(n){return n||"undefined"!=typeof $localize&&$localize.locale||Ig},deps:[[new fd(wo),new St,new $u]]},{provide:DP,useValue:"USD"}];let W9=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Pe(vc))},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:H9}),n})(),Lg=null;function cs(){return Lg}const ri=new Ke("DocumentToken");let _a=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:function(){return Pe(YP)},providedIn:"platform"}),n})();const Y9=new Ke("Location Initialized");let YP=(()=>{class n extends _a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cs().getBaseHref(this._doc)}onPopState(t){const r=cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){JP()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){JP()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Pe(ri))},n.\u0275prov=D({token:n,factory:function(){return new YP(Pe(ri))},providedIn:"platform"}),n})();function JP(){return!!window.history.pushState}function nE(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function XP(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Us(n){return n&&"?"!==n[0]?"?"+n:n}let Ec=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:function(){return function(n){const e=Pe(ri).location;return new ZP(Pe(_a),e&&e.origin||"")}()},providedIn:"root"}),n})();const rE=new Ke("appBaseHref");let ZP=(()=>{class n extends Ec{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return nE(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Us(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Us(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Us(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(_a),Pe(rE,8))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),Z9=(()=>{class n extends Ec{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=nE(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Us(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Us(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(_a),Pe(rE,8))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),iE=(()=>{class n{constructor(t,r){this._subject=new sn,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=XP(eF(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Us(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,eF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Us(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Us(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Us,n.joinWithSlash=nE,n.stripTrailingSlash=XP,n.\u0275fac=function(t){return new(t||n)(Pe(Ec),Pe(_a))},n.\u0275prov=D({token:n,factory:function(){return new iE(Pe(Ec),Pe(_a))},providedIn:"root"}),n})();function eF(n){return n.replace(/\/index.html$/,"")}var vn=(()=>((vn=vn||{})[vn.Zero=0]="Zero",vn[vn.One=1]="One",vn[vn.Two=2]="Two",vn[vn.Few=3]="Few",vn[vn.Many=4]="Many",vn[vn.Other=5]="Other",vn))();const uQ=function(n){return function(n){const e=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=dO(e);if(t)return t;const r=e.split("-")[0];if(t=dO(r),t)return t;if("en"===r)return H5;throw new Error(`Missing locale data for the locale "${n}".`)}(n)[Se.PluralCase]};class qg{}let LQ=(()=>{class n extends qg{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(uQ(r||this.locale)(t)){case vn.Zero:return"zero";case vn.One:return"one";case vn.Two:return"two";case vn.Few:return"few";case vn.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(Pe(wo))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function cF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class BQ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lF=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new BQ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),dF(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{dF(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(le(Bi),le(Vs),le(Bd))},n.\u0275dir=qe({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function dF(n,e){n.context.$implicit=e.item}let fE=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jQ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(le(Bi),le(Vs))},n.\u0275dir=qe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class jQ{constructor(){this.$implicit=null,this.ngIf=null}}function hF(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ft(e)}'.`)}let pY=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[{provide:qg,useClass:LQ}]}),n})();const gF="browser";function mF(n){return n===gF}let yY=(()=>{class n{}return n.\u0275prov=D({token:n,providedIn:"root",factory:()=>new vY(Pe(ri),window)}),n})();class vY{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_F(this.window.history)||_F(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function _F(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class yF{}class yE extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new yE,Lg||(Lg=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Hd=Hd||document.querySelector("base"),Hd?Hd.getAttribute("href"):null);return null==t?null:function(n){Kg=Kg||document.createElement("a"),Kg.setAttribute("href",n);const e=Kg.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cF(document.cookie,e)}}let Kg,Hd=null;const vF=new Ke("TRANSITION_ID"),TY=[{provide:Vd,useFactory:function(n,e,t){return()=>{t.get(yc).donePromise.then(()=>{const r=cs(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[vF,ri,Kt],multi:!0}];class vE{static init(){var n;n=new vE,Y0=n}addToWindow(e){At.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},At.getAllAngularTestabilities=()=>e.getAllTestabilities(),At.getAllAngularRootElements=()=>e.getAllRootElements(),At.frameworkStabilizers||(At.frameworkStabilizers=[]),At.frameworkStabilizers.push(r=>{const i=At.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?cs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let DY=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const Qg=new Ke("EventManagerPlugins");let Yg=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Pe(Qg),Pe(Lt))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();class wF{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=cs().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let EF=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),Gd=(()=>{class n extends EF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bF))}}return n.\u0275fac=function(t){return new(t||n)(Pe(ri))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function bF(n){cs().remove(n)}const wE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},EE=/%COMP%/g;function Jg(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Jg(n,i,t):(i=i.replace(EE,n),t.push(i))}return t}function TF(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bE=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new CE(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case dr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new kY(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case dr.ShadowDom:return new NY(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Jg(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Pe(Yg),Pe(Gd),Pe(Ud))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();class CE{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wE[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=wE[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=wE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ei.DashCase|ei.Important)?e.style.setProperty(t,r,i&ei.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ei.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,TF(r)):this.eventManager.addEventListener(e,t,TF(r))}}class kY extends CE{constructor(e,t,r,i){super(e),this.component=r;const s=Jg(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(EE,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(EE,i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class NY extends CE{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Jg(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let OY=(()=>{class n extends wF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Pe(ri))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const SF=["alt","control","meta","shift"],FY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},LY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let VY=(()=>{class n extends wF{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="";if(SF.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&xF.hasOwnProperty(e)&&(e=xF[e]))}return FY[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),SF.forEach(s=>{s!=i&&LY[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Pe(ri))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const HY=kP(V9,"browser",[{provide:vo,useValue:gF},{provide:CP,useValue:function(){yE.makeCurrent(),vE.init()},multi:!0},{provide:ri,useFactory:function(){return n=document,$v=n,document;var n},deps:[]}]),GY=[{provide:n0,useValue:"root"},{provide:Wu,useFactory:function(){return new Wu},deps:[]},{provide:Qg,useClass:OY,multi:!0,deps:[ri,Lt,vo]},{provide:Qg,useClass:VY,multi:!0,deps:[ri]},{provide:bE,useClass:bE,deps:[Yg,Gd,Ud]},{provide:UO,useExisting:bE},{provide:EF,useExisting:Gd},{provide:Gd,useClass:Gd,deps:[ri]},{provide:Q0,useClass:Q0,deps:[Lt]},{provide:Yg,useClass:Yg,deps:[Qg,Lt]},{provide:yF,useClass:DY,deps:[]}];let WY=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:Ud,useValue:t.appId},{provide:vF,useExisting:Ud},TY]}}}return n.\u0275fac=function(t){return new(t||n)(Pe(n,12))},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:GY,imports:[pY,W9]}),n})();"undefined"!=typeof window&&window;const{isArray:nJ}=Array,{getPrototypeOf:rJ,prototype:iJ,keys:sJ}=Object;function RF(n){if(1===n.length){const e=n[0];if(nJ(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&rJ(n)===iJ}(e)){const t=sJ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:aJ}=Array;function TE(n){return ke(e=>function(n,e){return aJ(e)?n(...e):n(e)}(n,e))}function kF(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let NF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(le(Fs),le(ni))},n.\u0275dir=qe({type:n}),n})(),ya=(()=>{class n extends NF{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xr(n)))(r||n)}}(),n.\u0275dir=qe({type:n,features:[Ft]}),n})();const ls=new Ke("NgValueAccessor"),lJ={provide:ls,useExisting:Dt(()=>DE),multi:!0};let DE=(()=>{class n extends ya{writeValue(t){this.setProperty("checked",t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xr(n)))(r||n)}}(),n.\u0275dir=qe({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,r){1&t&&Ir("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},features:[Gt([lJ]),Ft]}),n})();const dJ={provide:ls,useExisting:Dt(()=>SE),multi:!0},fJ=new Ke("CompositionEventMode");let SE=(()=>{class n extends NF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=cs()?cs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(le(Fs),le(ni),le(fJ,8))},n.\u0275dir=qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Ir("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Gt([dJ]),Ft]}),n})();const mr=new Ke("NgValidators"),Co=new Ke("NgAsyncValidators");function HF(n){return null!=n}function GF(n){const e=Sd(n)?en(n):n;return m0(e),e}function WF(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zF(n,e){return e.map(t=>t(n))}function qF(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function xE(n){return null!=n?function(n){if(!n)return null;const e=n.filter(HF);return 0==e.length?null:function(t){return WF(zF(t,e))}}(qF(n)):null}function AE(n){return null!=n?function(n){if(!n)return null;const e=n.filter(HF);return 0==e.length?null:function(t){return function(...n){const e=Tp(n),{args:t,keys:r}=RF(n),i=new G(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let d=0;d<o;d++){let h=!1;zr(t[d]).subscribe(new je(s,m=>{h||(h=!0,c--),a[d]=m},()=>u--,void 0,()=>{(!u||!h)&&(c||s.next(r?kF(r,a):a),s.complete())}))}});return e?i.pipe(TE(e)):i}(zF(t,e).map(GF)).pipe(ke(WF))}}(qF(n)):null}function YF(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ME(n){return n?Array.isArray(n)?n:[n]:[]}function Xg(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZF(n,e){const t=ME(e);return ME(n).forEach(i=>{Xg(t,i)||t.push(i)}),t}function eL(n,e){return ME(e).filter(t=>!Xg(n,t))}class tL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Io extends tL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Sr extends tL{get formDirective(){return null}get path(){return null}}class nL{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let rL=(()=>{class n extends nL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(le(Io,2))},n.\u0275dir=qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&wg("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[Ft]}),n})(),iL=(()=>{class n extends nL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(le(Sr,10))},n.\u0275dir=qe({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&wg("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[Ft]}),n})();function zd(n,e){NE(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sL(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NE(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(YF(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(YF(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();nm(e._rawValidators,i),nm(e._rawAsyncValidators,i)}function sL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function im(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qd="VALID",sm="INVALID",bc="PENDING",Kd="DISABLED";function FE(n){return(VE(n)?n.validators:n)||null}function uL(n){return Array.isArray(n)?xE(n):n||null}function LE(n,e){return(VE(e)?e.asyncValidators:n)||null}function cL(n){return Array.isArray(n)?AE(n):n||null}function VE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class UE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uL(this._rawValidators),this._composedAsyncValidatorFn=cL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qd}get invalid(){return this.status===sm}get pending(){return this.status==bc}get disabled(){return this.status===Kd}get enabled(){return this.status!==Kd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uL(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cL(e)}addValidators(e){this.setValidators(ZF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eL(e,this._rawAsyncValidators))}hasValidator(e){return Xg(this._rawValidators,e)}hasAsyncValidator(e){return Xg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=bc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qd||this.status===bc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kd:qd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=bc,this._hasOwnPendingAsyncValidator=!0;const t=GF(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof BE?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof SJ&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new sn,this.statusChanges=new sn}_calculateStatus(){return this._allControlsDisabled()?Kd:this.errors?sm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bc)?bc:this._anyControlsHaveStatus(sm)?sm:qd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){VE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class om extends UE{constructor(e=null,t,r){super(FE(t),LE(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){im(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){im(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class BE extends UE{constructor(e,t,r){super(FE(t),LE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof om?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class SJ extends UE{constructor(e,t,r){super(FE(t),LE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof om?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const xJ={provide:Sr,useExisting:Dt(()=>am)},Qd=(()=>Promise.resolve(null))();let am=(()=>{class n extends Sr{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new sn,this.form=new BE({},xE(t),AE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Qd.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),zd(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Qd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),im(this._directives,t)})}addFormGroup(t){Qd.then(()=>{const r=this._findContainer(t.path),i=new BE({});(function(n,e){NE(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Qd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Qd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(le(mr,10),le(Co,10))},n.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Ir("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Gt([xJ]),Ft]}),n})();const MJ={provide:Io,useExisting:Dt(()=>jE)},hL=(()=>Promise.resolve(null))();let jE=(()=>{class n extends Io{constructor(t,r,i,s){super(),this.control=new om,this._registered=!1,this.update=new sn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===SE?t=s:function(n){return Object.getPrototypeOf(n.constructor)===ya}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){hL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;hL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(le(Sr,9),le(mr,10),le(Co,10),le(ls,10))},n.\u0275dir=qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gt([MJ]),Ft,Yr]}),n})(),fL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qe({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),gL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({}),n})();const KJ={provide:mr,useExisting:Dt(()=>qE),multi:!0},QJ={provide:mr,useExisting:Dt(()=>KE),multi:!0};let qE=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=qe({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&os("required",r.required?"":null)},inputs:{required:"required"},features:[Gt([KJ])]}),n})(),KE=(()=>{class n extends qE{validate(t){return this.required?function(n){return!0===n.value?null:{required:!0}}(t):null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Xr(n)))(r||n)}}(),n.\u0275dir=qe({type:n,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&os("required",r.required?"":null)},features:[Gt([QJ]),Ft]}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({imports:[[gL]]}),n})(),tX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({imports:[eX]}),n})();function cm(n){return new G(e=>{zr(n()).subscribe(e)})}function kL(n,e){const t=l(n)?n:()=>n,r=i=>i.error(t());return new G(e?i=>e.schedule(r,0,i):r)}const nX=["addListener","removeListener"],rX=["addEventListener","removeEventListener"],iX=["on","off"];function lm(n,e,t,r){if(l(t)&&(r=t,t=void 0),r)return lm(n,e,t).pipe(TE(r));const[i,s]=function(n){return l(n.addEventListener)&&l(n.removeEventListener)}(n)?rX.map(o=>a=>n[o](e,a,t)):function(n){return l(n.addListener)&&l(n.removeListener)}(n)?nX.map(NL(n,e)):function(n){return l(n.on)&&l(n.off)}(n)?iX.map(NL(n,e)):[];if(!i&&Fl(n))return Zt(o=>lm(o,e,t))(zr(n));if(!i)throw new TypeError("Invalid event target");return new G(o=>{const a=(...u)=>o.next(1<u.length?u:u[0]);return i(a),()=>s(a)})}function NL(n,e){return t=>r=>n[t](e,r)}function Ze(...n){return en(n,hi(n))}function Yd(...n){return Xi(1)(en(n,hi(n)))}const To=new G(ue);function ii(n,e){return Ae((t,r)=>{let i=0;t.subscribe(new je(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Gi(n,e){return Ae((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(new je(r,u=>{null==i||i.unsubscribe();let c=0;const d=s++;zr(n(u,d)).subscribe(i=new je(r,h=>r.next(e?e(u,h,d,c++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function OL(){return Ae((n,e)=>{let t=null;n._refCount++;const r=new je(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class PL extends G{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new b;const t=this.getSubject();e.add(this.source.subscribe(new je(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=b.EMPTY)}return e}refCount(){return OL()(this)}}const lX={connector:()=>new Ue};function FL(n,e=lX){const{connector:t}=e;return Ae((r,i)=>{const s=t();en(n(function(n){return new G(e=>n.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}function xr(n,e,t){const r=l(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ae((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(new je(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):fe}class fX extends b{constructor(e,t){super()}schedule(e,t=0){return this}}const dm={setInterval(...n){const{delegate:e}=dm;return((null==e?void 0:e.setInterval)||setInterval)(...n)},clearInterval(n){const{delegate:e}=dm;return((null==e?void 0:e.clearInterval)||clearInterval)(n)},delegate:void 0};class LL extends fX{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return dm.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;dm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,E(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const VL={now:()=>(VL.delegate||Date).now(),delegate:void 0};class Jd{constructor(e,t=Jd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Jd.now=VL.now;class UL extends Jd{constructor(e,t=Jd.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const QE=new UL(LL),pX=QE;function BL(n,e){return e?t=>Yd(e.pipe(Kn(1),Ae((n,e)=>{n.subscribe(new je(e,ue))})),t.pipe(BL(n))):Zt((t,r)=>n(t,r).pipe(Kn(1),function(n){return ke(()=>n)}(t)))}const Xd="Service workers are disabled or not supported by this browser";class hm{constructor(e){if(this.serviceWorker=e,e){const r=lm(e,"controllerchange").pipe(ke(()=>e.controller)),s=Yd(cm(()=>Ze(e.controller)),r);this.worker=s.pipe(ii(d=>!!d)),this.registration=this.worker.pipe(Gi(()=>e.getRegistration()));const c=lm(e,"message").pipe(ke(d=>d.data)).pipe(ii(d=>d&&d.type)).pipe(function(n){return n?e=>FL(n)(e):e=>function(n,e){const t=l(n)?n:()=>n;return l(e)?FL(e,{connector:t}):r=>new PL(r,t)}(new Ue)(e)}());c.connect(),this.events=c}else this.worker=this.events=this.registration=(Xd,cm(()=>kL(new Error("Service workers are disabled or not supported by this browser"))))}postMessage(e,t){return this.worker.pipe(Kn(1),xr(r=>{r.postMessage(Object.assign({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,t);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(ii(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Kn(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(ii(t=>t.nonce===e),Kn(1),ke(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let EX=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new Ue,!t.isEnabled)return this.messages=To,this.notificationClicks=To,void(this.subscription=To);this.messages=this.sw.eventsOfType("PUSH").pipe(ke(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ke(i=>i.data)),this.pushManager=this.sw.registration.pipe(ke(i=>i.pushManager));const r=this.pushManager.pipe(Gi(i=>i.getSubscription()));this.subscription=Ms(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(Xd));const r={userVisibleOnly:!0};let i=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(Gi(o=>o.subscribe(r)),Kn(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Kn(1),Gi(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Xd))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(hm))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),jL=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=To,this.available=To,this.activated=To,void(this.unrecoverable=To);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(ii(r=>"VERSION_READY"===r.type),ke(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Xd));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Xd));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(hm))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();class fm{}const $L=new Ke("NGSW_REGISTER_SCRIPT");function bX(n,e,t,r){return()=>{if(!mF(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)s=t.registrationStrategy();else{const[a,...u]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=Ze(null);break;case"registerWithDelay":s=HL(+u[0]||0);break;case"registerWhenStable":s=u[0]?Ms(GL(n),HL(+u[0])):GL(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(Lt).runOutsideAngular(()=>s.pipe(Kn(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function HL(n){return Ze(null).pipe(function(n,e=QE){const t=function(n=0,e,t=pX){let r=-1;return null!=e&&(Ip(e)?t=e:r=e),new G(i=>{let s=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return BL(()=>t)}(n))}function GL(n){return n.get(vc).isStable.pipe(ii(t=>t))}function CX(n,e){return new hm(mF(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let IX=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:$L,useValue:t},{provide:fm,useValue:r},{provide:hm,useFactory:CX,deps:[fm,vo]},{provide:Vd,useFactory:bX,deps:[Kt,$L,fm,vo],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[EX,jL]}),n})();var TX=x(896),pm=x.n(TX);class WL{constructor(){this.items=new Map}addArticle(e){var t;const r=null!==(t=this.items.get(e))&&void 0!==t?t:0;this.items.set(e,0!==r?r+1:1)}clear(){this.items.clear()}get isEmpty(){return 0===this.items.size}get totalPrice(){let e=0;for(const t of this.items.entries())e+=t[0].price*t[1];return e}get contents(){let e=[];for(const t of this.items.entries())e.push(t);return e}}const Zd_firebase={projectId:"pwa-gabi",appId:"1:378634587111:web:0ac92eccbc08d1416e0b42",databaseURL:"https://pwa-gabi-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"pwa-gabi.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBDLFa6VLYrkSZ5kmBKIGEK8McImOA0XLM",authDomain:"pwa-gabi.firebaseapp.com",messagingSenderId:"378634587111",measurementId:"G-SV95K1103F"},DX=["rear","back","r\xfcck","arri\xe8re","trasera","tr\xe1s","traseira","posteriore","\u540e\u9762","\u5f8c\u9762","\u80cc\u9762","\u540e\u7f6e","\u5f8c\u7f6e","\u80cc\u7f6e","\u0437\u0430\u0434\u043d\u0435\u0439","\u0627\u0644\u062e\u0644\u0641\u064a\u0629","\ud6c4","arka","achterzijde","\u0e2b\u0e25\u0e31\u0e07","baksidan","bagside","sau","bak","tylny","takakamera","belakang","\u05d0\u05d7\u05d5\u05e8\u05d9\u05ea","\u03c0\u03af\u03c3\u03c9","spate","h\xe1ts\xf3","zadn\xed","darrere","zadn\xe1","\u0437\u0430\u0434\u043d\u044f","stra\u017enja","belakang","\u092c\u0948\u0915"];function js(n){return Ae((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new je(t,void 0,void 0,o=>{s=zr(n(o,js(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Cc(n,e){return l(e)?Zt(n,e,1):Zt(n,1)}class zL{}class qL{}class $s{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof $s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new $s;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof $s?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class AX{encodeKey(e){return KL(e)}encodeValue(e){return KL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const RX=/%(\d[a-f0-9])/gi,kX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function KL(n){return encodeURIComponent(n).replace(RX,(e,t)=>{var r;return null!==(r=kX[t])&&void 0!==r?r:e})}function QL(n){return`${n}`}class Do{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new AX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Do({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(QL(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(QL(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class NX{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function YL(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function JL(n){return"undefined"!=typeof Blob&&n instanceof Blob}function XL(n){return"undefined"!=typeof FormData&&n instanceof FormData}class eh{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new $s),this.context||(this.context=new NX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Do,this.urlWithParams=t}serializeBody(){return null===this.body?null:YL(this.body)||JL(this.body)||XL(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Do?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XL(this.body)?null:JL(this.body)?this.body.type||null:YL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Do?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,u=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,d=e.params||this.params;const h=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),d)),new eh(r,i,o,{params:d,headers:c,context:h,reportProgress:u,responseType:s,withCredentials:a})}}var En=(()=>((En=En||{})[En.Sent=0]="Sent",En[En.UploadProgress=1]="UploadProgress",En[En.ResponseHeader=2]="ResponseHeader",En[En.DownloadProgress=3]="DownloadProgress",En[En.Response=4]="Response",En[En.User=5]="User",En))();class YE{constructor(e,t=200,r="OK"){this.headers=e.headers||new $s,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class JE extends YE{constructor(e={}){super(e),this.type=En.ResponseHeader}clone(e={}){return new JE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gm extends YE{constructor(e={}){super(e),this.type=En.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gm({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ZL extends YE{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function XE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let e2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof eh)s=t;else{let u,c;u=i.headers instanceof $s?i.headers:new $s(i.headers),i.params&&(c=i.params instanceof Do?i.params:new Do({fromObject:i.params})),s=new eh(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Ze(s).pipe(Cc(u=>this.handler.handle(u)));if(t instanceof eh||"events"===i.observe)return o;const a=o.pipe(ii(u=>u instanceof gm));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ke(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ke(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Do).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,XE(i,r))}post(t,r,i={}){return this.request("POST",t,XE(i,r))}put(t,r,i={}){return this.request("PUT",t,XE(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Pe(zL))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();class t2{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const n2=new Ke("HTTP_INTERCEPTORS");let FX=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const LX=/^\)\]\}',?\n/;let r2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new G(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((y,T)=>i.setRequestHeader(y,T.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const y=t.detectContentTypeHeader();null!==y&&i.setRequestHeader("Content-Type",y)}if(t.responseType){const y=t.responseType.toLowerCase();i.responseType="json"!==y?y:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const y=1223===i.status?204:i.status,T=i.statusText||"OK",N=new $s(i.getAllResponseHeaders()),U=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new JE({headers:N,status:y,statusText:T,url:U}),o},u=()=>{let{headers:y,status:T,statusText:N,url:U}=a(),K=null;204!==T&&(K=void 0===i.response?i.responseText:i.response),0===T&&(T=K?200:0);let $=T>=200&&T<300;if("json"===t.responseType&&"string"==typeof K){const ae=K;K=K.replace(LX,"");try{K=""!==K?JSON.parse(K):null}catch(pe){K=ae,$&&($=!1,K={error:pe,text:K})}}$?(r.next(new gm({body:K,headers:y,status:T,statusText:N,url:U||void 0})),r.complete()):r.error(new ZL({error:K,headers:y,status:T,statusText:N,url:U||void 0}))},c=y=>{const{url:T}=a(),N=new ZL({error:y,status:i.status||0,statusText:i.statusText||"Unknown Error",url:T||void 0});r.error(N)};let d=!1;const h=y=>{d||(r.next(a()),d=!0);let T={type:En.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(T.total=y.total),"text"===t.responseType&&!!i.responseText&&(T.partialText=i.responseText),r.next(T)},m=y=>{let T={type:En.UploadProgress,loaded:y.loaded};y.lengthComputable&&(T.total=y.total),r.next(T)};return i.addEventListener("load",u),i.addEventListener("error",c),i.addEventListener("timeout",c),i.addEventListener("abort",c),t.reportProgress&&(i.addEventListener("progress",h),null!==s&&i.upload&&i.upload.addEventListener("progress",m)),i.send(s),r.next({type:En.Sent}),()=>{i.removeEventListener("error",c),i.removeEventListener("abort",c),i.removeEventListener("load",u),i.removeEventListener("timeout",c),t.reportProgress&&(i.removeEventListener("progress",h),null!==s&&i.upload&&i.upload.removeEventListener("progress",m)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Pe(yF))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const ZE=new Ke("XSRF_COOKIE_NAME"),eb=new Ke("XSRF_HEADER_NAME");class i2{}let UX=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=cF(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Pe(ri),Pe(vo),Pe(ZE))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),tb=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(i2),Pe(eb))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),BX=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(n2,[]);this.chain=r.reduceRight((i,s)=>new t2(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Pe(qL),Pe(Kt))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),jX=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:tb,useClass:FX}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ZE,useValue:t.cookieName}:[],t.headerName?{provide:eb,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[tb,{provide:n2,useExisting:tb,multi:!0},{provide:i2,useClass:UX},{provide:ZE,useValue:"XSRF-TOKEN"},{provide:eb,useValue:"X-XSRF-TOKEN"}]}),n})(),$X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[e2,{provide:zL,useClass:BX},r2,{provide:qL,useExisting:r2}],imports:[[jX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),HX=(()=>{class n{constructor(t){this.http=t}beep(){const t=new Audio;t.src="assets/beep.wav",t.load(),t.play()}getDocs(){const t="http://localhost:4000/business";return console.log(t),this.http.get(t).pipe(ke(r=>(console.warn("Mongo DB:",r),r)),js(r=>kL(r)))}}return n.\u0275fac=function(t){return new(t||n)(Pe(e2))},n.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),GX=(()=>{class n{constructor(t){this.swUpdate=t,t.available.subscribe(r=>{window.confirm("A new update is available. Would you like to load the latest version?")&&t.activateUpdate().then(()=>document.location.reload())})}checkForUpdates(){this.swUpdate.checkForUpdate()}}return n.\u0275fac=function(t){return new(t||n)(Pe(jL))},n.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function s2(n,e,t,r,i,s,o){try{var a=n[s](o),u=a.value}catch(c){return void t(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function P(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(u){s2(s,r,i,o,a,"next",u)}function a(u){s2(s,r,i,o,a,"throw",u)}o(void 0)})}}const Ce=function(n,e){if(!n)throw Ic(e)},Ic=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},o2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},mm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0;let m=(15&a)<<2|c>>6,y=63&c;u||(y=64,o||(m=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==h)throw Error();r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},a2=function(n){const e=o2(n);return mm.encodeByteArray(e,!0)},_m=function(n){return a2(n).replace(/\./g,"")},rb=function(n){try{return mm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zX(n){return u2(void 0,n)}function u2(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!qX(t)||(n[t]=u2(n[t],e[t]));return n}function qX(n){return"__proto__"!==n}class Tc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function Pn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ym(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function vm(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function ib(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function c2(){const n=Pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function va(){return"object"==typeof indexedDB}function th(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}function sb(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ci extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ds.prototype.create)}}class ds{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function(n,e){return n.replace(ZX,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Ci(i,`${this.serviceName}: ${o} (${i}).`,r)}}const ZX=/\{\$([^}]+)}/g;function nh(n){return JSON.parse(n)}function Yn(n){return JSON.stringify(n)}const wm=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=nh(rb(s[0])||""),t=nh(rb(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch(s){}return{header:e,claims:t,data:r,signature:i}};function Gs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Dc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ob(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Em(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function bm(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(l2(s)&&l2(o)){if(!bm(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function l2(n){return null!==n&&"object"==typeof n}function rh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class nZ{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let h=0;h<16;h++)r[h]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let h=0;h<16;h++)r[h]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let h=16;h<80;h++){const m=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=4294967295&(m<<1|m>>>31)}let c,d,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let h=0;h<80;h++){h<40?h<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):h<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const m=(i<<5|i>>>27)+c+u+d+r[h]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class iZ{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function(n,e){if("object"!=typeof n||null===n)return!1;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(e)?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=ab),void 0===i.error&&(i.error=ab),void 0===i.complete&&(i.complete=ab);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(o){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ab(){}const Im=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};function ub(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function Jn(n){return n&&n._delegate?n._delegate:n}class Fn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wa="[DEFAULT]";class hZ{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Tc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:wa})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return P(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=wa){return this.instances.has(e)}getOptions(e=wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===wa?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=wa){return this.component?this.component.multipleInstances?e:wa:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class gZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hZ(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cb=[];var yt=(()=>{return(n=yt||(yt={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",yt;var n})();const d2={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},mZ=yt.INFO,_Z={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},yZ=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=_Z[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Ea{constructor(e){this.name=e,this._logLevel=mZ,this._logHandler=yZ,this._userLogHandler=null,cb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?d2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}let h2,f2;const p2=new WeakMap,lb=new WeakMap,g2=new WeakMap,db=new WeakMap,hb=new WeakMap;let fb={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return lb.get(n);if("objectStoreNames"===e)return n.objectStoreNames||g2.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function DZ(n){return"function"==typeof n?function(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(f2||(f2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(n)?function(...e){return n.apply(pb(this),e),Ws(p2.get(this))}:function(...e){return Ws(n.apply(pb(this),e))}:function(e,...t){const r=n.call(pb(this),e,...t);return g2.set(r,e.sort?e.sort():[e]),Ws(r)}}(n):(n instanceof IDBTransaction&&function(n){if(lb.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});lb.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,h2||(h2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,fb):n)}function Ws(n){if(n instanceof IDBRequest)return function(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Ws(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&p2.set(t,n)}).catch(()=>{}),hb.set(e,n),e}(n);if(db.has(n))return db.get(n);const e=DZ(n);return e!==n&&(db.set(n,e),hb.set(e,n)),e}const pb=n=>hb.get(n);function Tm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ws(o.result),u.oldVersion,u.newVersion,Ws(o.transaction))}),t&&o.addEventListener("blocked",()=>t()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function gb(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",()=>e()),Ws(t).then(()=>{})}const SZ=["get","getKey","getAll","getAllKeys","count"],xZ=["put","add","delete","clear"],mb=new Map;function m2(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(mb.get(e))return mb.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=xZ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!SZ.includes(t))return;const s=function(){var o=P(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return mb.set(e,s),s}var n;fb=Iz(Cz({},n=fb),{get:(e,t,r)=>m2(e,t)||n.get(e,t,r),has:(e,t)=>!!m2(e,t)||n.has(e,t)});class AZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const _b="@firebase/app",ba=new Ea("@firebase/app"),yb="[DEFAULT]",nee={[_b]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ca=new Map,Dm=new Map;function ree(n,e){try{n.container.addComponent(e)}catch(t){ba.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xn(n){const e=n.name;if(Dm.has(e))return ba.debug(`There were multiple attempts to register component ${e}.`),!1;Dm.set(e,n);for(const t of Ca.values())ree(t,n);return!0}function So(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const xo=new ds("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class see{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xo.create("app-deleted",{appName:this._name})}}const Ia="9.9.3";function oee(n,e={}){"object"!=typeof e&&(e={name:e});const t=Object.assign({name:yb,automaticDataCollectionEnabled:!1},e),r=t.name;if("string"!=typeof r||!r)throw xo.create("bad-app-name",{appName:String(r)});const i=Ca.get(r);if(i){if(bm(n,i.options)&&bm(t,i.config))return i;throw xo.create("duplicate-app",{appName:r})}const s=new gZ(r);for(const a of Dm.values())s.addComponent(a);const o=new see(n,t,s);return Ca.set(r,o),o}function ih(n=yb){const e=Ca.get(n);if(!e)throw xo.create("no-app",{appName:n});return e}function y2(){return Array.from(Ca.values())}function Mt(n,e,t){var r;let i=null!==(r=nee[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ba.warn(a.join(" "))}Xn(new Fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const sh="firebase-heartbeat-store";let wb=null;function v2(){return wb||(wb=Tm("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(sh)}}).catch(n=>{throw xo.create("idb-open",{originalErrorMessage:n.message})})),wb}function Eb(){return Eb=P(function*(n){var e;try{return(yield v2()).transaction(sh).objectStore(sh).get(E2(n))}catch(t){if(t instanceof Ci)ba.warn(t.message);else{const r=xo.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});ba.warn(r.message)}}}),Eb.apply(this,arguments)}function w2(n,e){return bb.apply(this,arguments)}function bb(){return bb=P(function*(n,e){var t;try{const i=(yield v2()).transaction(sh,"readwrite");return yield i.objectStore(sh).put(e,E2(n)),i.done}catch(r){if(r instanceof Ci)ba.warn(r.message);else{const i=xo.create("idb-set",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message});ba.warn(i.message)}}}),bb.apply(this,arguments)}function E2(n){return`${n.name}!${n.options.appId}`}class hee{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pee(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return P(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b2();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return P(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=b2(),{heartbeatsToSend:r,unsentEntries:i}=function(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),C2(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),C2(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=_m(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function b2(){return(new Date).toISOString().substring(0,10)}class pee{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return P(function*(){return!!va()&&th().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return P(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function(n){return Eb.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return P(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return w2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return P(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return w2(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function C2(n){return _m(JSON.stringify({version:2,heartbeats:n})).length}Xn(new Fn("platform-logger",e=>new AZ(e),"PRIVATE")),Xn(new Fn("heartbeat",e=>new hee(e),"PRIVATE")),Mt(_b,"0.7.31",""),Mt(_b,"0.7.31","esm2017"),Mt("fire-js","");var Ne,mee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zs={},Cb=Cb||{},et=mee||self;function Sm(){}function Ib(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function oh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Tb="closure_uid_"+(1e9*Math.random()>>>0),yee=0;function vee(n,e,t){return n.call.apply(n.bind,arguments)}function wee(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zn(n,e,t){return(Zn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vee:wee).apply(null,arguments)}function xm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function er(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ao(){this.s=this.s,this.o=this.o}var bee={};Ao.prototype.s=!1,Ao.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Tb)&&n[Tb]||(n[Tb]=++yee)}(this);delete bee[n]}},Ao.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const I2=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},T2=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function D2(n){return Array.prototype.concat.apply([],arguments)}function Db(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Am(n){return/^[\s\xa0]*$/.test(n)}var Mr,S2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ar(n,e){return-1!=n.indexOf(e)}function Sb(n,e){return n<e?-1:n>e?1:0}e:{var x2=et.navigator;if(x2){var A2=x2.userAgent;if(A2){Mr=A2;break e}}Mr=""}function xb(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function M2(n){const e={};for(const t in n)e[t]=n[t];return e}var R2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k2(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<R2.length;s++)t=R2[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ab(n){return Ab[" "](n),n}Ab[" "]=Sm;var Mm,Tee=Ar(Mr,"Opera"),Sc=Ar(Mr,"Trident")||Ar(Mr,"MSIE"),N2=Ar(Mr,"Edge"),Mb=N2||Sc,O2=Ar(Mr,"Gecko")&&!(Ar(Mr.toLowerCase(),"webkit")&&!Ar(Mr,"Edge"))&&!(Ar(Mr,"Trident")||Ar(Mr,"MSIE"))&&!Ar(Mr,"Edge"),Dee=Ar(Mr.toLowerCase(),"webkit")&&!Ar(Mr,"Edge");function P2(){var n=et.document;return n?n.documentMode:void 0}e:{var Rb="",kb=function(){var n=Mr;return O2?/rv:([^\);]+)(\)|;)/.exec(n):N2?/Edge\/([\d\.]+)/.exec(n):Sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Dee?/WebKit\/(\S+)/.exec(n):Tee?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(kb&&(Rb=kb?kb[1]:""),Sc){var Nb=P2();if(null!=Nb&&Nb>parseFloat(Rb)){Mm=String(Nb);break e}}Mm=Rb}var See={};function xee(){return e=See,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=S2(String(Mm)).split("."),t=S2("9").split("."),r=Math.max(e.length,t.length);for(let o=0;0==n&&o<r;o++){var i=e[o]||"",s=t[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Sb(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Sb(0==i[2].length,0==s[2].length)||Sb(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n}();var e}var Aee=et.document&&Sc&&(P2()||parseInt(Mm,10))||void 0,Mee=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{et.addEventListener("test",Sm,e),et.removeEventListener("test",Sm,e)}catch(t){}return n}();function _r(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ah(n,e){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(O2){e:{try{Ab(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ree[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ah.Z.h.call(this)}}_r.prototype.h=function(){this.defaultPrevented=!0},er(ah,_r);var Ree={2:"touch",3:"pen",4:"mouse"};ah.prototype.h=function(){ah.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var uh="closure_listenable_"+(1e6*Math.random()|0),kee=0;function Nee(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++kee,this.ca=this.fa=!1}function Rm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function km(n){this.src=n,this.g={},this.h=0}function Pb(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=I2(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Rm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fb(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}km.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=Fb(n,e,r,i);return-1<o?(e=n[o],t||(e.fa=!1)):((e=new Nee(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var Lb="closure_lm_"+(1e6*Math.random()|0),Vb={};function L2(n,e,t,r,i){if(r&&r.once)return U2(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)L2(n,e[s],t,r,i);return null}return t=$b(t),n&&n[uh]?n.N(e,t,oh(r)?!!r.capture:!!r,i):V2(n,e,t,!1,r,i)}function V2(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=oh(i)?!!i.capture:!!i,a=Bb(n);if(a||(n[Lb]=a=new km(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function(){var e=Pee;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mee||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(j2(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function U2(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)U2(n,e[s],t,r,i);return null}return t=$b(t),n&&n[uh]?n.O(e,t,oh(r)?!!r.capture:!!r,i):V2(n,e,t,!0,r,i)}function B2(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)B2(n,e[s],t,r,i);else r=oh(r)?!!r.capture:!!r,t=$b(t),n&&n[uh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fb(s=n.g[e],t,r,i))&&(Rm(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Bb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fb(e,t,r,i)),(t=-1<n?e[n]:null)&&Ub(t))}function Ub(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[uh])Pb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(j2(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bb(e))?(Pb(t,n),0==t.h&&(t.src=null,e[Lb]=null)):Rm(n)}}}function j2(n){return n in Vb?Vb[n]:Vb[n]="on"+n}function Pee(n,e){if(n.ca)n=!0;else{e=new ah(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ub(n),n=t.call(r,e)}return n}function Bb(n){return(n=n[Lb])instanceof km?n:null}var jb="__closure_events_fn_"+(1e9*Math.random()>>>0);function $b(n){return"function"==typeof n?n:(n[jb]||(n[jb]=function(e){return n.handleEvent(e)}),n[jb])}function Ln(){Ao.call(this),this.i=new km(this),this.P=this,this.I=null}function tr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new _r(e,n);else if(e instanceof _r)e.target=e.target||n;else{var i=e;k2(e=new _r(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=Nm(o,r,!0,e)&&i}if(i=Nm(o=e.g=n,r,!0,e)&&i,i=Nm(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Nm(o=e.g=t[s],r,!1,e)&&i}function Nm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==t){var a=o.listener,u=o.ia||o.src;o.fa&&Pb(n.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}er(Ln,Ao),Ln.prototype[uh]=!0,Ln.prototype.removeEventListener=function(n,e,t,r){B2(this,n,e,t,r)},Ln.prototype.M=function(){if(Ln.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Rm(t[r]);delete n.g[e],n.h--}}this.I=null},Ln.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ln.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Hb=et.JSON.stringify;function Fee(){var n=H2;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Wb,$2=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Vee,n=>n.reset());class Vee{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Uee(n){et.setTimeout(()=>{throw n},0)}function Gb(n,e){Wb||function(){var n=et.Promise.resolve(void 0);Wb=function(){n.then(jee)}}(),zb||(Wb(),zb=!0),H2.add(n,e)}var zb=!1,H2=new class{constructor(){this.h=this.g=null}add(e,t){const r=$2.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jee(){for(var n;n=Fee();){try{n.h.call(n.g)}catch(t){Uee(t)}var e=$2;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zb=!1}function Om(n,e){Ln.call(this),this.h=n||1,this.g=e||et,this.j=Zn(this.kb,this),this.l=Date.now()}function qb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Kb(n,e,t){if("function"==typeof n)t&&(n=Zn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zn(n.handleEvent,n)}return 2147483647<Number(e)?-1:et.setTimeout(n,e||0)}function G2(n){n.g=Kb(()=>{n.g=null,n.i&&(n.i=!1,G2(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}er(Om,Ln),(Ne=Om.prototype).da=!1,Ne.S=null,Ne.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),tr(this,"tick"),this.da&&(qb(this),this.start()))}},Ne.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ne.M=function(){Om.Z.M.call(this),qb(this),delete this.g};class $ee extends Ao{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:G2(this)}M(){super.M(),this.g&&(et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ch(n){Ao.call(this),this.h=n,this.g={}}er(ch,Ao);var W2=[];function z2(n,e,t,r){Array.isArray(t)||(t&&(W2[0]=t.toString()),t=W2);for(var i=0;i<t.length;i++){var s=L2(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function q2(n){xb(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ub(e)},n),n.g={}}function Pm(){this.g=!0}function xc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Hb(t)}catch(a){return e}}(n,t)+(r?" "+r:"")})}ch.prototype.M=function(){ch.Z.M.call(this),q2(this)},ch.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pm.prototype.Aa=function(){this.g=!1},Pm.prototype.info=function(){};var Ta={},K2=null;function Fm(){return K2=K2||new Ln}function Q2(n){_r.call(this,Ta.Ma,n)}function lh(n){const e=Fm();tr(e,new Q2(e,n))}function Y2(n,e){_r.call(this,Ta.STAT_EVENT,n),this.stat=e}function Rr(n){const e=Fm();tr(e,new Y2(e,n))}function J2(n,e){_r.call(this,Ta.Na,n),this.size=e}function dh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return et.setTimeout(function(){n()},e)}Ta.Ma="serverreachability",er(Q2,_r),Ta.STAT_EVENT="statevent",er(Y2,_r),Ta.Na="timingevent",er(J2,_r);var Lm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},X2={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qb(){}function eV(){}Qb.prototype.h=null;var Xb,hh={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Yb(){_r.call(this,"d")}function Jb(){_r.call(this,"c")}function Vm(){}function fh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new ch(this),this.P=qee,this.W=new Om(n=Mb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tV}function tV(){this.i=null,this.g="",this.h=!1}er(Yb,_r),er(Jb,_r),er(Vm,Qb),Vm.prototype.g=function(){return new XMLHttpRequest},Vm.prototype.i=function(){return{}},Xb=new Vm;var qee=45e3,Zb={},Um={};function eC(n,e,t){n.K=1,n.v=Gm(qs(e)),n.s=t,n.U=!0,nV(n,null)}function nV(n,e){n.F=Date.now(),ph(n),n.A=qs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),dV(t.h,"t",r),n.C=0,t=n.l.H,n.h=new tV,n.g=OV(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $ee(Zn(n.Ia,n,n.g),n.O)),z2(n.V,n.g,"readystatechange",n.gb),e=n.H?M2(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),lh(1),function(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var d=c[0];c=c[1];var h=d.split("_");o=2<=h.length&&"type"==h[1]?o+(d+"=")+c+"&":o+(d+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function iV(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Kee(n,t),i==Um){4==e&&(n.o=4,Rr(14),r=!1),xc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Zb){n.o=4,Rr(15),xc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xc(n.j,n.m,i,null),tC(n,i)}rV(n)&&i!=Um&&i!=Zb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Rr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),hC(e),e.L=!0,Rr(11))):(xc(n.j,n.m,t,"[Invalid Chunked Response]"),Da(n),gh(n))}function Kee(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Um:(t=Number(e.substring(t,r)),isNaN(t)?Zb:(r+=1)+t>e.length?Um:(e=e.substr(r,t),n.C=r+t,e))}function ph(n){n.Y=Date.now()+n.P,sV(n,n.P)}function sV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dh(Zn(n.eb,n),e)}function Bm(n){n.B&&(et.clearTimeout(n.B),n.B=null)}function gh(n){0==n.l.G||n.I||MV(n.l,n)}function Da(n){Bm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qb(n.W),q2(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function tC(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||iC(t.i,n)))if(t.I=n.N,!n.J&&iC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=dh(Zn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Ym(t),Km(t)}dC(t),Rr(18)}if(1>=pV(t.i)&&t.ka){try{t.ka()}catch(c){}t.ka=void 0}}else Aa(t,11)}else if((n.J||t.g==n)&&Ym(t),!Am(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.U=c[0],c=c[1],2==t.G)if("c"==c[0]){t.J=c[1],t.la=c[2];const d=c[3];null!=d&&(t.ma=d,t.h.info("VER="+t.ma));const h=c[4];null!=h&&(t.za=h,t.h.info("SVER="+t.za));const m=c[5];null!=m&&"number"==typeof m&&0<m&&(t.K=r=1.5*m,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const y=n.g;if(y){const T=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var s=r.i;!s.g&&(Ar(T,"spdy")||Ar(T,"quic")||Ar(T,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(sC(s,s.h),s.h=null))}if(r.D){const N=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;N&&(r.sa=N,Wt(r.F,r.D,N))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var o=n;if((r=t).oa=NV(r,r.H?r.la:null,r.W),o.J){gV(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Bm(a),ph(a)),r.g=o}else xV(r);0<t.l.length&&Qm(t)}else"stop"!=c[0]&&"close"!=c[0]||Aa(t,7);else 3==t.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Aa(t,7):cC(t):"noop"!=c[0]&&t.j&&t.j.wa(c),t.A=0)}lh(4)}catch(c){}}function nC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ib(n)||"string"==typeof n)T2(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ib(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ib(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function Ac(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ac)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function rC(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Sa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Sa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Sa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ne=fh.prototype).setTimeout=function(n){this.P=n},Ne.gb=function(n){n=n.target;const e=this.L;e&&3==Ks(n)?e.l():this.Ia(n)},Ne.Ia=function(n){try{if(n==this.g)e:{const d=Ks(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>d)&&(3!=d||Mb||this.g&&(this.h.h||this.g.ga()||CV(this.g)))){this.I||4!=d||7==e||lh(8==e||0>=h?3:2),Bm(this);var t=this.g.ba();this.N=t;t:if(rV(this)){var r=CV(this.g);n="";var i=r.length,s=4==Ks(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Da(this),gh(this);var o="";break t}this.h.i=new et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,d,t),this.i){if(this.$&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Am(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.o=3,Rr(12),Da(this),gh(this);break e}xc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,tC(this,t)}this.U?(iV(this,d,o),Mb&&this.i&&3==d&&(z2(this.V,this.W,"tick",this.fb),this.W.start())):(xc(this.j,this.m,o,null),tC(this,o)),4==d&&Da(this),this.i&&!this.I&&(4==d?MV(this.l,this):(this.i=!1,ph(this)))}else 400==t&&0<o.indexOf("Unknown SID")?(this.o=3,Rr(12)):(this.o=0,Rr(13)),Da(this),gh(this)}}}catch(d){}},Ne.fb=function(){if(this.g){var n=Ks(this.g),e=this.g.ga();this.C<e.length&&(Bm(this),iV(this,n,e),this.i&&4!=n&&ph(this))}},Ne.cancel=function(){this.I=!0,Da(this)},Ne.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lh(3),Rr(17)),Da(this),this.o=2,gh(this)):sV(this,this.Y-n)},(Ne=Ac.prototype).R=function(){rC(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ne.T=function(){return rC(this),this.g.concat()},Ne.get=function(n,e){return Sa(this.h,n)?this.h[n]:e},Ne.set=function(n,e){Sa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ne.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var oV=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xa(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof xa){this.g=void 0!==e?e:n.g,jm(this,n.j),this.s=n.s,$m(this,n.i),Hm(this,n.m),this.l=n.l,e=n.h;var t=new yh;t.i=e.i,e.g&&(t.g=new Ac(e.g),t.h=e.h),aV(this,t),this.o=n.o}else n&&(t=String(n).match(oV))?(this.g=!!e,jm(this,t[1]||"",!0),this.s=mh(t[2]||""),$m(this,t[3]||"",!0),Hm(this,t[4]),this.l=mh(t[5]||"",!0),aV(this,t[6]||"",!0),this.o=mh(t[7]||"")):(this.g=!!e,this.h=new yh(null,this.g))}function qs(n){return new xa(n)}function jm(n,e,t){n.j=t?mh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $m(n,e,t){n.i=t?mh(e,!0):e}function Hm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aV(n,e,t){e instanceof yh?(n.h=e,function(n,e){e&&!n.j&&(Mo(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(cV(this,r),dV(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=_h(e,nte)),n.h=new yh(e,n.g))}function Wt(n,e,t){n.h.set(e,t)}function Gm(n){return Wt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _h(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zee),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zee(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}xa.prototype.toString=function(){var n=[],e=this.j;e&&n.push(_h(e,uV,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(_h(e,uV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(_h(t,"/"==t.charAt(0)?tte:ete,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",_h(t,rte)),n.join("")};var uV=/[#\/\?@]/g,ete=/[#\?:]/g,tte=/[#\?]/g,nte=/[#\?@]/g,rte=/#/g;function yh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mo(n){n.g||(n.g=new Ac,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cV(n,e){Mo(n),e=Mc(n,e),Sa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Sa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&rC(n)))}function lV(n,e){return Mo(n),e=Mc(n,e),Sa(n.g.h,e)}function dV(n,e,t){cV(n,e),0<t.length&&(n.i=null,n.g.set(Mc(n,e),Db(t)),n.h+=t.length)}function Mc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hV(n){this.l=n||ote,n=et.PerformanceNavigationTiming?0<(n=et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(et.g&&et.g.Ea&&et.g.Ea()&&et.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ne=yh.prototype).add=function(n,e){Mo(this),this.i=null,n=Mc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ne.forEach=function(n,e){Mo(this),this.g.forEach(function(t,r){T2(t,function(i){n.call(e,i,r,this)},this)},this)},Ne.T=function(){Mo(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},Ne.R=function(n){Mo(this);var e=[];if("string"==typeof n)lV(this,n)&&(e=D2(e,this.g.get(Mc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=D2(e,n[t])}return e},Ne.set=function(n,e){return Mo(this),this.i=null,lV(this,n=Mc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ne.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),n.push(o)}}return this.i=n.join("&")};var ote=10;function fV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pV(n){return n.h?1:n.g?n.g.size:0}function iC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function sC(n,e){n.g?n.g.add(e):n.h=e}function gV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Db(n.i)}function oC(){}function ate(){this.g=new oC}function ute(n,e,t){const r=t||"";try{nC(n,function(i,s){let o=i;oh(i)&&(o=Hb(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function vh(n){this.l=n.$b||null,this.j=n.ib||!1}function zm(n,e){Ln.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=aC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hV.prototype.cancel=function(){if(this.i=mV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},oC.prototype.stringify=function(n){return et.JSON.stringify(n,void 0)},oC.prototype.parse=function(n){return et.JSON.parse(n,void 0)},er(vh,Qb),vh.prototype.g=function(){return new zm(this.l,this.j)},vh.prototype.i=function(n){return function(){return n}}({}),er(zm,Ln);var aC=0;function _V(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function wh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Eh(n)}function Eh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ne=zm.prototype).open=function(n,e){if(this.readyState!=aC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Eh(this)},Ne.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wh(this)),this.readyState=aC},Ne.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Eh(this)),this.g&&(this.readyState=3,Eh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==et.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_V(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ne.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?wh(this):Eh(this),3==this.readyState&&_V(this)}},Ne.Ua=function(n){this.g&&(this.response=this.responseText=n,wh(this))},Ne.Ta=function(n){this.g&&(this.response=n,wh(this))},Ne.ha=function(){this.g&&wh(this)},Ne.setRequestHeader=function(n,e){this.v.append(n,e)},Ne.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ne.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lte=et.JSON.parse;function bn(n){Ln.call(this),this.headers=new Ac,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yV,this.K=this.L=!1}er(bn,Ln);var yV="",dte=/^https?$/i,hte=["POST","PUT"];function pte(n){return"content-type"==n.toLowerCase()}function vV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wV(n),qm(n)}function wV(n){n.D||(n.D=!0,tr(n,"complete"),tr(n,"error"))}function EV(n){if(n.h&&void 0!==Cb&&(!n.C[1]||4!=Ks(n)||2!=n.ba()))if(n.v&&4==Ks(n))Kb(n.Fa,0,n);else if(tr(n,"readystatechange"),4==Ks(n)){n.h=!1;try{const a=n.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===a){var i=String(n.H).match(oV)[1]||null;if(!i&&et.self&&et.self.location){var s=et.self.location.protocol;i=s.substr(0,s.length-1)}r=!dte.test(i?i.toLowerCase():"")}t=r}if(t)tr(n,"complete"),tr(n,"success");else{n.m=6;try{var o=2<Ks(n)?n.g.statusText:""}catch(u){o=""}n.j=o+" ["+n.ba()+"]",wV(n)}}finally{qm(n)}}}function qm(n,e){if(n.g){bV(n);const t=n.g,r=n.C[0]?Sm:null;n.g=null,n.C=null,e||tr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function bV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(et.clearTimeout(n.A),n.A=null)}function Ks(n){return n.g?n.g.readyState:0}function CV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function uC(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return xb(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Wt(n,e,t))}function bh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function IV(n){this.za=0,this.l=[],this.h=new Pm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bh("baseRetryDelayMs",5e3,n),this.$a=bh("retryDelaySeedMs",1e4,n),this.Ya=bh("forwardChannelMaxRetries",2,n),this.ra=bh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new hV(n&&n.concurrentRequestLimit),this.Ca=new ate,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function cC(n){if(TV(n),3==n.G){var e=n.V++,t=qs(n.F);Wt(t,"SID",n.J),Wt(t,"RID",e),Wt(t,"TYPE","terminate"),Ch(n,t),(e=new fh(n,n.h,e,void 0)).K=2,e.v=Gm(qs(t)),t=!1,et.navigator&&et.navigator.sendBeacon&&(t=et.navigator.sendBeacon(e.v.toString(),"")),!t&&et.Image&&((new Image).src=e.v,t=!0),t||(e.g=OV(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ph(e)}kV(n)}function Km(n){n.g&&(hC(n),n.g.cancel(),n.g=null)}function TV(n){Km(n),n.u&&(et.clearTimeout(n.u),n.u=null),Ym(n),n.i.cancel(),n.m&&("number"==typeof n.m&&et.clearTimeout(n.m),n.m=null)}function lC(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Qm(n)}function Qm(n){fV(n.i)||n.m||(n.m=!0,Gb(n.Ha,n),n.C=0)}function DV(n,e){var t;t=e?e.m:n.V++;const r=qs(n.F);Wt(r,"SID",n.J),Wt(r,"RID",t),Wt(r,"AID",n.U),Ch(n,r),n.o&&n.s&&uC(r,n.o,n.s),t=new fh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=SV(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),sC(n.i,t),eC(t,r,e)}function Ch(n,e){n.j&&nC({},function(t,r){Wt(e,r,t)})}function SV(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zn(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<t;u++){let c=i[u].h;const d=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{ute(d,o,"req"+c+"_")}catch(h){r&&r(d)}}if(a){r=o.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function xV(n){n.g||n.u||(n.Y=1,Gb(n.Ga,n),n.A=0)}function dC(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=dh(Zn(n.Ga,n),RV(n,n.A)),n.A++,0))}function hC(n){null!=n.B&&(et.clearTimeout(n.B),n.B=null)}function AV(n){n.g=new fh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=qs(n.oa);Wt(e,"RID","rpc"),Wt(e,"SID",n.J),Wt(e,"CI",n.N?"0":"1"),Wt(e,"AID",n.U),Ch(n,e),Wt(e,"TYPE","xmlhttp"),n.o&&n.s&&uC(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Gm(qs(e)),t.s=null,t.U=!0,nV(t,n)}function Ym(n){null!=n.v&&(et.clearTimeout(n.v),n.v=null)}function MV(n,e){var t=null;if(n.g==e){Ym(n),hC(n),n.g=null;var r=2}else{if(!iC(n.i,e))return;t=e.D,gV(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;tr(r=Fm(),new J2(r,t,e,i)),Qm(n)}else xV(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(pV(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=dh(Zn(n.Ha,n,e),RV(n,n.C)),n.C++,0)))}(n,e)||2==r&&dC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Aa(n,5);break;case 4:Aa(n,10);break;case 3:Aa(n,6);break;default:Aa(n,2)}}function RV(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Aa(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zn(n.jb,n);t||(t=new xa("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||jm(t,"https"),Gm(t)),function(n,e){const t=new Pm;if(et.Image){const r=new Image;r.onload=xm(Wm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=xm(Wm,t,r,"TestLoadImage: error",!1,e),r.onabort=xm(Wm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=xm(Wm,t,r,"TestLoadImage: timeout",!1,e),et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Rr(2);n.G=0,n.j&&n.j.va(e),kV(n),TV(n)}function kV(n){n.G=0,n.I=-1,n.j&&((0!=mV(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Db(n.l),n.l.length=0),n.j.ua())}function NV(n,e,t){let r=function(n){return n instanceof xa?qs(n):new xa(n,void 0)}(t);if(""!=r.i)e&&$m(r,e+"."+r.i),Hm(r,r.m);else{const i=et.location;r=function(n,e,t,r){var i=new xa(null,void 0);return n&&jm(i,n),e&&$m(i,e),t&&Hm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&xb(n.aa,function(i,s){Wt(r,s,i)}),t=n.sa,(e=n.D)&&t&&Wt(r,e,t),Wt(r,"VER",n.ma),Ch(n,r),r}function OV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t&&n.Ba&&!n.qa?new vh({ib:!0}):n.qa)).L=n.H,e}function PV(){}function Jm(){if(Sc&&!(10<=Number(Aee)))throw Error("Environmental error: no available transport.")}function si(n,e){Ln.call(this),this.g=new IV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Am(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Am(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rc(this)}function FV(n){Yb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LV(){Jb.call(this),this.status=1}function Rc(n){this.g=n}(Ne=bn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Xb),this.g.onreadystatechange=Zn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void vV(this,s)}n=t||"";const i=new Ac(this.headers);r&&nC(r,function(s,o){i.set(o,s)}),r=function(n){e:{var e=pte;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=et.FormData&&n instanceof et.FormData,!(0<=I2(hte,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,o){this.g.setRequestHeader(o,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bV(this),0<this.B&&((this.K=function(n){return Sc&&xee()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zn(this.pa,this)):this.A=Kb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){vV(this,s)}},Ne.pa=function(){void 0!==Cb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,tr(this,"timeout"),this.abort(8))},Ne.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,tr(this,"complete"),tr(this,"abort"),qm(this))},Ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qm(this,!0)),bn.Z.M.call(this)},Ne.Fa=function(){this.s||(this.F||this.v||this.l?EV(this):this.cb())},Ne.cb=function(){EV(this)},Ne.ba=function(){try{return 2<Ks(this)?this.g.status:-1}catch(n){return-1}},Ne.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ne.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lte(e)}},Ne.Da=function(){return this.m},Ne.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ne=IV.prototype).ma=8,Ne.G=1,Ne.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ne.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new fh(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=M2(s),k2(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=SV(this,i,e),Wt(t=qs(this.F),"RID",n),Wt(t,"CVER",22),this.D&&Wt(t,"X-HTTP-Session-Id",this.D),Ch(this,t),this.o&&s&&uC(t,this.o,s),sC(this.i,i),this.Ra&&Wt(t,"TYPE","init"),this.ja?(Wt(t,"$req",e),Wt(t,"SID","null"),i.$=!0,eC(i,t,null)):eC(i,t,e),this.G=2}}else 3==this.G&&(n?DV(this,n):0==this.l.length||fV(this.i)||DV(this))},Ne.Ga=function(){if(this.u=null,AV(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=dh(Zn(this.bb,this),n)}},Ne.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Rr(10),Km(this),AV(this))},Ne.ab=function(){null!=this.v&&(this.v=null,Km(this),dC(this),Rr(19))},Ne.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Rr(2)):(this.h.info("Failed to ping google.com"),Rr(1))},(Ne=PV.prototype).xa=function(){},Ne.wa=function(){},Ne.va=function(){},Ne.ua=function(){},Ne.Oa=function(){},Jm.prototype.g=function(n,e){return new si(n,e)},er(si,Ln),si.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Gb(Zn(n.hb,n,e))),Rr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=NV(n,null,n.W),Qm(n)},si.prototype.close=function(){cC(this.g)},si.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,lC(this.g,e)}else this.v?((e={}).__data__=Hb(n),lC(this.g,e)):lC(this.g,n)},si.prototype.M=function(){this.g.j=null,delete this.j,cC(this.g),delete this.g,si.Z.M.call(this)},er(FV,Yb),er(LV,Jb),er(Rc,PV),Rc.prototype.xa=function(){tr(this.g,"a")},Rc.prototype.wa=function(n){tr(this.g,new FV(n))},Rc.prototype.va=function(n){tr(this.g,new LV(n))},Rc.prototype.ua=function(){tr(this.g,"b")},Jm.prototype.createWebChannel=Jm.prototype.g,si.prototype.send=si.prototype.u,si.prototype.open=si.prototype.m,si.prototype.close=si.prototype.close,Lm.NO_ERROR=0,Lm.TIMEOUT=8,Lm.HTTP_ERROR=6,X2.COMPLETE="complete",eV.EventType=hh,hh.OPEN="a",hh.CLOSE="b",hh.ERROR="c",hh.MESSAGE="d",Ln.prototype.listen=Ln.prototype.N,bn.prototype.listenOnce=bn.prototype.O,bn.prototype.getLastError=bn.prototype.La,bn.prototype.getLastErrorCode=bn.prototype.Da,bn.prototype.getStatus=bn.prototype.ba,bn.prototype.getResponseJson=bn.prototype.Qa,bn.prototype.getResponseText=bn.prototype.ga,bn.prototype.send=bn.prototype.ea;var _te=zs.createWebChannelTransport=function(){return new Jm},yte=zs.getStatEventTarget=function(){return Fm()},fC=zs.ErrorCode=Lm,vte=zs.EventType=X2,wte=zs.Event=Ta,VV=zs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ete=zs.FetchXmlHttpFactory=vh,Xm=zs.WebChannel=eV,bte=zs.XhrIo=bn;const UV="@firebase/firestore";class Vn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");let kc="9.9.2";const Ro=new Ea("@firebase/firestore");function pC(){return Ro.logLevel}function he(n,...e){if(Ro.logLevel<=yt.DEBUG){const t=e.map(gC);Ro.debug(`Firestore (${kc}): ${n}`,...t)}}function fn(n,...e){if(Ro.logLevel<=yt.ERROR){const t=e.map(gC);Ro.error(`Firestore (${kc}): ${n}`,...t)}}function Nc(n,...e){if(Ro.logLevel<=yt.WARN){const t=e.map(gC);Ro.warn(`Firestore (${kc}): ${n}`,...t)}}function gC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Fe(n="Unexpected state"){const e=`FIRESTORE (${kc}) INTERNAL ASSERTION FAILED: `+n;throw fn(e),new Error(e)}function Qe(n,e){n||Fe()}function Te(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Un{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BV{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vn.UNAUTHENTICATED))}shutdown(){}}class Tte{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(P(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Un)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe("string"==typeof r.accessToken),new BV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qe(null===e||"string"==typeof e),new Vn(e)}}class Dte{constructor(e,t,r){this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Ste{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Dte(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xte{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.p;return this.p=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe("string"==typeof t.token),this.p=t.token,new jV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ate(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class $V{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ate(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function tt(n,e){return n<e?-1:n>e?1:0}function Oc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Yt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new Yt(0,0))}static max(){return new We(new Yt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ih{constructor(e,t,r){void 0===t?t=0:t>e.length&&Fe(),void 0===r?r=e.length-t:r>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ih.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ih?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wt extends Ih{construct(e,t,r){return new wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wt(t)}static emptyPath(){return new wt([])}}const Mte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Ih{construct(e,t,r){return new pn(e,t,r)}static isValidIdentifier(e){return Mte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(wt.fromString(e))}static fromName(e){return new be(wt.fromString(e).popFirst(5))}static empty(){return new be(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new wt(e.slice()))}}function WV(n){return new oi(n.readTime,n.key,-1)}class oi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new oi(We.min(),be.empty(),-1)}static max(){return new oi(We.max(),be.empty(),-1)}}function _C(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=be.comparator(n.documentKey,e.documentKey),0!==t?t:tt(n.largestBatchId,e.largestBatchId))}const zV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";function ko(n){return yC.apply(this,arguments)}function yC(){return yC=P(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==zV)throw n;he("LocalStore","Unexpectedly lost primary lease")}),yC.apply(this,arguments)}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next(i=>i?Q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new Q((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}function No(n){return"IndexedDbTransactionError"===n.name}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function KV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ka(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vr.ot=-1;class on{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new on(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n_(this.root,e,this.comparator,!1)}getReverseIterator(){return new n_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n_(this.root,e,this.comparator,!0)}}class n_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:nr.RED,this.left=null!=i?i:nr.EMPTY,this.right=null!=s?s:nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new nr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1,nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new nr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rt{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new YV(this.data.getIterator())}getIteratorFrom(e){return new YV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rt(this.comparator);return t.data=e,t}}class YV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ai{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new ai([])}unionWith(e){let t=new Rt(pn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class An{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new An(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new An(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const Vte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(n){if(Qe(!!n),"string"==typeof n){let e=0;const t=Vte.exec(n);if(Qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:an(n.seconds),nanos:an(n.nanos)}}function an(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Na(n){return"string"==typeof n?An.fromBase64String(n):An.fromUint8Array(n)}function wC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JV(n){const e=n.mapValue.fields.__previous_value__;return wC(e)?JV(e):e}function Sh(n){const e=Oo(n.mapValue.fields.__local_write_time__.timestampValue);return new Yt(e.seconds,e.nanos)}class Ute{constructor(e,t,r,i,s,o,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class Po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}function xh(n){return null==n}function Ah(n){return 0===n&&1/n==-1/0}const Fo_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wC(n)?4:nU(n)?9007199254740991:10:Fe()}function hs(n,e){if(n===e)return!0;const t=Oa(n);if(t!==Oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sh(n).isEqual(Sh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Oo(r.timestampValue),o=Oo(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Na(n.bytesValue).isEqual(Na(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return an(r.geoPointValue.latitude)===an(i.geoPointValue.latitude)&&an(r.geoPointValue.longitude)===an(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return an(r.integerValue)===an(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=an(r.doubleValue),o=an(i.doubleValue);return s===o?Ah(s)===Ah(o):isNaN(s)&&isNaN(o)}return!1}(n,e);case 9:return Oc(n.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(KV(s)!==KV(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!hs(s[a],o[a])))return!1;return!0}(n,e);default:return Fe()}var i}function Mh(n,e){return void 0!==(n.values||[]).find(t=>hs(t,e))}function Lo(n,e){if(n===e)return 0;const t=Oa(n),r=Oa(e);if(t!==r)return tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const o=an(i.integerValue||i.doubleValue),a=an(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(n,e);case 3:return ZV(n.timestampValue,e.timestampValue);case 4:return ZV(Sh(n),Sh(e));case 5:return tt(n.stringValue,e.stringValue);case 6:return function(i,s){const o=Na(i),a=Na(s);return o.compareTo(a)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=tt(o[u],a[u]);if(0!==c)return c}return tt(o.length,a.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const o=tt(an(i.latitude),an(s.latitude));return 0!==o?o:tt(an(i.longitude),an(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=Lo(o[u],a[u]);if(c)return c}return tt(o.length,a.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Fo_mapValue&&s===Fo_mapValue)return 0;if(i===Fo_mapValue)return 1;if(s===Fo_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let d=0;d<a.length&&d<c.length;++d){const h=tt(a[d],c[d]);if(0!==h)return h;const m=Lo(o[a[d]],u[c[d]]);if(0!==m)return m}return tt(a.length,c.length)}(n.mapValue,e.mapValue);default:throw Fe()}}function ZV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tt(n,e);const t=Oo(n),r=Oo(e),i=tt(t.seconds,r.seconds);return 0!==i?i:tt(t.nanos,r.nanos)}function Fc(n){return EC(n)}function EC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Oo(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Na(n.bytesValue).toBase64():"referenceValue"in n?be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=EC(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${EC(r.fields[a])}`;return s+"}"}(n.mapValue):Fe();var e}function bC(n){return!!n&&"integerValue"in n}function Rh(n){return!!n&&"arrayValue"in n}function eU(n){return!!n&&"nullValue"in n}function tU(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function i_(n){return!!n&&"mapValue"in n}function kh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ka(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function nU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class rr{constructor(e){this.value=e}static empty(){return new rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!i_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kh(t)}setAll(e){let t=pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=kh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());i_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];i_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ka(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new rr(kh(this.value))}}function sU(n){const e=[];return ka(n.fields,(t,r)=>{const i=new pn([t]);if(i_(r)){const s=sU(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ai(e)}class Ut{constructor(e,t,r,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ut(e,0,We.min(),We.min(),rr.empty(),0)}static newFoundDocument(e,t,r){return new Ut(e,1,t,We.min(),r,0)}static newNoDocument(e,t){return new Ut(e,2,t,We.min(),rr.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,We.min(),rr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $te{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ut=null}}function oU(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $te(n,e,t,r,i,s,o)}function Fa(n){const e=Te(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Fc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fc(r)).join(",")),e.ut=t}return e.ut}function Nh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Jte(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!hs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dU(n.startAt,e.startAt)&&dU(n.endAt,e.endAt)}function s_(n){return be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ir extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new Gte(e,t,r):"array-contains"===t?new qte(e,r):"in"===t?new Kte(e,r):"not-in"===t?new Qte(e,r):"array-contains-any"===t?new Yte(e,r):new ir(e,t,r)}static ct(e,t,r){return"in"===t?new Wte(e,r):new zte(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Lo(t,this.value)):null!==t&&Oa(this.value)===Oa(t)&&this.at(Lo(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fe()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gte extends ir{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.at(t)}}class Wte extends ir{constructor(e,t){super(e,"in",t),this.keys=cU(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zte extends ir{constructor(e,t){super(e,"not-in",t),this.keys=cU(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cU(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>be.fromName(r.referenceValue))}class qte extends ir{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rh(t)&&Mh(t.arrayValue,this.value)}}class Kte extends ir{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mh(this.value.arrayValue,t)}}class Qte extends ir{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mh(this.value.arrayValue,t)}}class Yte extends ir{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mh(this.value.arrayValue,r))}}class Vo{constructor(e,t){this.position=e,this.inclusive=t}}class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Jte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function lU(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?be.comparator(be.fromName(o.referenceValue),t.key):Lo(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function dU(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hs(n.position[t],e.position[t]))return!1;return!0}class Qs{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.lt=null,this.ft=null}}function Vc(n){return new Qs(n)}function fU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Uc(n){const e=Te(n);if(null===e.lt){e.lt=[];const t=function(n){for(const e of n.filters)if(e.ht())return e.field;return null}(e),r=function(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Lc(t)),e.lt.push(new Lc(pn.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Lc(pn.keyField(),s))}}}return e.lt}function Ur(n){const e=Te(n);if(!e.ft)if("F"===e.limitType)e.ft=oU(e.path,e.collectionGroup,Uc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Uc(e))t.push(new Lc(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Vo(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Vo(e.startAt.position,e.startAt.inclusive):null;e.ft=oU(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function a_(n,e,t){return new Qs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Oh(n,e){return Nh(Ur(n),Ur(e))&&n.limitType===e.limitType}function pU(n){return`${Fa(Ur(n))}|lt:${n.limitType}`}function DC(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Fc(r.value)}`;var r}).join(", ")}]`),xh(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Fc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Fc(t)).join(",")),`Target(${e})`}(Ur(n))}; limitType=${n.limitType})`}function SC(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):be.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,o){const a=lU(i,s,o);return i.inclusive?a<=0:a<0}(t.startAt,Uc(t),r)||t.endAt&&!function(i,s,o){const a=lU(i,s,o);return i.inclusive?a>=0:a>0}(t.endAt,Uc(t),r)));var t,r}function mU(n){return(e,t)=>{let r=!1;for(const i of Uc(n)){const s=Xte(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Xte(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?Lo(a,u):Fe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}function _U(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function yU(n){return{integerValue:""+n}}function vU(n,e){return function(n){return"number"==typeof n&&Number.isInteger(n)&&!Ah(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?yU(e):_U(n,e)}class u_{constructor(){this._=void 0}}function Zte(n,e,t){return n instanceof Bc?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof La?EU(n,e):n instanceof Va?bU(n,e):function(r,i){const s=wU(r,i),o=CU(s)+CU(r._t);return bC(s)&&bC(r._t)?yU(o):_U(r.wt,o)}(n,e)}function ene(n,e,t){return n instanceof La?EU(n,e):n instanceof Va?bU(n,e):t}function wU(n,e){return n instanceof jc?bC(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bc extends u_{}class La extends u_{constructor(e){super(),this.elements=e}}function EU(n,e){const t=IU(e);for(const r of n.elements)t.some(i=>hs(i,r))||t.push(r);return{arrayValue:{values:t}}}class Va extends u_{constructor(e){super(),this.elements=e}}function bU(n,e){let t=IU(e);for(const r of n.elements)t=t.filter(i=>!hs(i,r));return{arrayValue:{values:t}}}class jc extends u_{constructor(e,t){super(),this.wt=e,this._t=t}}function CU(n){return an(n.integerValue||n.doubleValue)}function IU(n){return Rh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nne{constructor(e,t){this.version=e,this.transformResults=t}}class Jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class l_{}function TU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hc(n.key,Jt.none()):new $c(n.key,n.data,Jt.none());{const t=n.data,r=rr.empty();let i=new Rt(pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ys(n.key,r,new ai(i.toArray()),Jt.none())}}function rne(n,e,t){n instanceof $c?function(r,i,s){const o=r.value.clone(),a=xU(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(n,e,t):n instanceof Ys?function(r,i,s){if(!c_(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=xU(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(SU(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fh(n,e,t,r){return n instanceof $c?function(i,s,o,a){if(!c_(i.precondition,s))return o;const u=i.value.clone(),c=AU(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ys?function(i,s,o,a){if(!c_(i.precondition,s))return o;const u=AU(i.fieldTransforms,a,s),c=s.data;return c.setAll(SU(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(n,e,t,r):(o=t,c_(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function ine(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=wU(r.transform,i||null);null!=s&&(null===t&&(t=rr.empty()),t.set(r.field,s))}return t||null}function DU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Oc(t,r,(i,s)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof La&&r instanceof La||t instanceof Va&&r instanceof Va?Oc(t.elements,r.elements,hs):t instanceof jc&&r instanceof jc?hs(t._t,r._t):t instanceof Bc&&r instanceof Bc);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class $c extends l_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ys extends l_{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function SU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xU(n,e,t){const r=new Map;Qe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ene(o,a,t[i]))}return r}function AU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Zte(s,o,e))}return r}class Hc extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xC extends l_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sne{constructor(e){this.count=e}}var Cn,Et;function MU(n){switch(n){default:return Fe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function RU(n){if(void 0===n)return fn("GRPC error has no .code"),J.UNKNOWN;switch(n){case Cn.OK:return J.OK;case Cn.CANCELLED:return J.CANCELLED;case Cn.UNKNOWN:return J.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return J.INTERNAL;case Cn.UNAVAILABLE:return J.UNAVAILABLE;case Cn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Cn.NOT_FOUND:return J.NOT_FOUND;case Cn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Cn.ABORTED:return J.ABORTED;case Cn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Cn.DATA_LOSS:return J.DATA_LOSS;default:return Fe()}}(Et=Cn||(Cn={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return QV(this.inner)}size(){return this.innerSize}}const one=new on(be.comparator);function Br(){return one}const kU=new on(be.comparator);function Lh(...n){let e=kU;for(const t of n)e=e.insert(t.key,t);return e}function NU(n){let e=kU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fs(){return Vh()}function OU(){return Vh()}function Vh(){return new Uo(n=>n.toString(),(n,e)=>n.isEqual(e))}const ane=new on(be.comparator),une=new Rt(be.comparator);function st(...n){let e=une;for(const t of n)e=e.add(t);return e}const cne=new Rt(tt);function d_(){return cne}class Uh{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Bh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Uh(We.min(),r,d_(),Br(),st())}}class Bh{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Bh(An.EMPTY_BYTE_STRING,t,st(),st(),st())}}class h_{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class PU{constructor(e,t){this.targetId=e,this.It=t}}class FU{constructor(e,t,r=An.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class LU{constructor(){this.Tt=0,this.Et=UU(),this.At=An.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=st(),t=st(),r=st();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe()}}),new Bh(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=UU()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class lne{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Br(),this.Bt=VU(),this.Lt=new Rt(tt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:Fe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const s=i.target;if(s_(s))if(0===r){const o=new be(s.path);this.Kt(t,o,Ut.newNoDocument(o,We.min()))}else Qe(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((s,o)=>{const a=this.Ht(o);if(a){if(s.current&&s_(a.target)){const u=new be(a.target.path);null!==this.$t.get(u)||this.Xt(o,u)||this.Kt(o,u,Ut.newNoDocument(u,e))}s.vt&&(t.set(o,s.St()),s.Dt())}});let r=st();this.Bt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Ht(u);return!c||2===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.$t.forEach((s,o)=>o.setReadTime(e));const i=new Uh(e,t,this.Lt,this.$t,r);return this.$t=Br(),this.Bt=VU(),this.Lt=new Rt(tt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new LU,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Rt(tt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||he("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new LU),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function VU(){return new on(be.comparator)}function UU(){return new on(be.comparator)}const dne={asc:"ASCENDING",desc:"DESCENDING"},hne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fne{constructor(e,t){this.databaseId=e,this.dt=t}}function jh(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BU(n,e){return n.dt?e.toBase64():e.toUint8Array()}function pne(n,e){return jh(n,e.toTimestamp())}function Bn(n){return Qe(!!n),We.fromTimestamp(function(e){const t=Oo(e);return new Yt(t.seconds,t.nanos)}(n))}function AC(n,e){return(t=n,new wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jU(n){const e=wt.fromString(n);return Qe(YU(e)),e}function $h(n,e){return AC(n.databaseId,e.path)}function ps(n,e){const t=jU(e);if(t.get(1)!==n.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(HU(t))}function MC(n,e){return AC(n.databaseId,e)}function Hh(n){return new wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HU(n){return Qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function GU(n,e,t){return{name:$h(n,e),fields:t.value.mapValue.fields}}function zU(n,e){return{documents:[MC(n,e.path)]}}function qU(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=MC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=MC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0===u.length)return;const c=u.map(d=>function(h){if("=="===h.op){if(tU(h.value))return{unaryFilter:{field:Gc(h.field),op:"IS_NAN"}};if(eU(h.value))return{unaryFilter:{field:Gc(h.field),op:"IS_NULL"}}}else if("!="===h.op){if(tU(h.value))return{unaryFilter:{field:Gc(h.field),op:"IS_NOT_NAN"}};if(eU(h.value))return{unaryFilter:{field:Gc(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gc(h.field),op:wne(h.op),value:h.value}}}(d));return 1===c.length?c[0]:{compositeFilter:{op:"AND",filters:c}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:Gc((d=c).field),direction:vne(d.dir)};var d})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const o=(c=e.limit,n.dt||xh(c)?c:{value:c});var c,a,u;return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(t.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),t}function KU(n){let e=function(n){const e=jU(n);return 4===e.length?wt.emptyPath():HU(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Qe(1===r);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=QU(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(d=>{return new Lc(Wc((h=d).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction));var h}));let a=null;t.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,xh(h)?null:h}(t.limit));let u=null;var d;t.startAt&&(u=new Vo((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new Vo(d.values||[],!d.before)}(t.endAt)),function(n,e,t,r,i,s,o,a){return new Qs(n,e,t,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function QU(n){return n?void 0!==n.unaryFilter?[bne(n)]:void 0!==n.fieldFilter?[Ene(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>QU(e)).reduce((e,t)=>e.concat(t)):Fe():[]}function vne(n){return dne[n]}function wne(n){return hne[n]}function Gc(n){return{fieldPath:n.canonicalString()}}function Wc(n){return pn.fromServerFormat(n.fieldPath)}function Ene(n){return ir.create(Wc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(n.fieldFilter.op),n.fieldFilter.value)}function bne(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Wc(n.unaryFilter.field);return ir.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Wc(n.unaryFilter.field);return ir.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Wc(n.unaryFilter.field);return ir.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Wc(n.unaryFilter.field);return ir.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}function Cne(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class NC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&rne(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=TU(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&Oc(this.mutations,e.mutations,(t,r)=>DU(t,r))&&Oc(this.baseMutations,e.baseMutations,(t,r)=>DU(t,r))}}class OC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length);let i=ane;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new OC(e,t,r,i)}}class PC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bo{constructor(e,t,r,i,s=We.min(),o=We.min(),a=An.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rB{constructor(e){this.ne=e}}function FC(n){const e=KU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?a_(e,e.limit,"L"):e}class $a{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(an(e.integerValue));else if("doubleValue"in e){const r=an(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Ah(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Na(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?nU(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):Fe()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),be.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}$a.ye=new $a;class Qne{constructor(){this.ze=new VC}addToCollectionParentIndex(e,t){return this.ze.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(oi.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class VC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rt(wt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(wt.comparator)).toArray()}}new Uint8Array(0);class jr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new jr(e,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(41943040,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);class Wa{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Wa(0)}static Rn(){return new Wa(-1)}}class sre{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class IB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Fh(r.mutation,i,ai.empty(),Yt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,t,r=st()){const i=fs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Lh();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=fs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,st()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Br();const o=Vh(),a=Vh();return t.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(void 0===d||d.mutation instanceof Ys)?s=s.insert(c.key,c):void 0!==d&&(o.set(c.key,d.mutation.getFieldMask()),Fh(d.mutation,c,d.mutation.getFieldMask(),Yt.now()))}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var h;return a.set(c,new sre(d,null!==(h=o.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Vh();let i=new on((o,a)=>o-a),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let d=r.get(u)||ai.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||st()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=OU();d.forEach(m=>{if(!s.has(m)){const y=TU(t.get(m),r.get(m));null!==y&&h.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return be.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):function(n){return null!==n.collectionGroup}(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Q.resolve(fs());let a=-1,u=s;return o.next(c=>Q.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?Q.resolve():this.getBaseDocument(e,d,h).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,st())).next(d=>({batchId:a,changes:NU(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next(r=>{let i=Lh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Lh();return this.indexManager.getCollectionParents(e,i).next(o=>Q.forEach(o,a=>{const u=(c=t,d=a.child(i),new Qs(d,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,d;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const c=u.getKey();null===i.get(c)&&(i=i.insert(c,Ut.newInvalidDocument(c)))});let o=Lh();return i.forEach((a,u)=>{const c=s.get(a);void 0!==c&&Fh(c.mutation,u,ai.empty(),Yt.now()),SC(t,u)&&(o=o.insert(a,u))}),o})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):Q.resolve(Ut.newInvalidDocument(t))}}class ore{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Q.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Bn(r.createTime)}),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:FC(r.bundledQuery),readTime:Bn(r.readTime)}),Q.resolve();var r}}class are{constructor(){this.overlays=new on(be.comparator),this.Xn=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fs();return Q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ie(e,t,s)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const i=fs(),s=t.length+1,o=new be(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new on((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);null===d&&(d=fs(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=fs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return Q.resolve(a)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PC(t,r));let s=this.Xn.get(t);void 0===s&&(s=st(),this.Xn.set(t,s)),this.Xn.set(t,s.add(r.key))}}class UC{constructor(){this.Zn=new Rt($n.ts),this.es=new Rt($n.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new $n(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new $n(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new be(new wt([])),r=new $n(t,e),i=new $n(t,e+1),s=[];return this.es.forEachInRange([r,i],o=>{this.rs(o),s.push(o.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new be(new wt([])),r=new $n(t,e),i=new $n(t,e+1);let s=st();return this.es.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new $n(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class $n{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return be.comparator(e.key,t.key)||tt(e.ls,t.ls)}static ns(e,t){return tt(e.ls,t.ls)||be.comparator(e.key,t.key)}}class ure{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Rt($n.ts)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.fs;this.fs++;const o=new NC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.ds=this.ds.add(new $n(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,t){return Q.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $n(t,0),i=new $n(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],o=>{const a=this._s(o.ls);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rt(tt);return t.forEach(i=>{const s=new $n(i,0),o=new $n(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,o],a=>{r=r.add(a.ls)})}),Q.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new $n(new be(s),0);let a=new Rt(tt);return this.ds.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.ls)),!0)},o),Q.resolve(this.gs(a))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Qe(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return Q.forEach(t.mutations,i=>{const s=new $n(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new $n(t,0),i=this.ds.firstAfterOrEqual(r);return Q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Q.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cre{constructor(e){this.ps=e,this.docs=new on(be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=Br();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),Q.resolve(r)}getAllFromCollection(e,t,r){let i=Br();const s=new be(t.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!t.isPrefixOf(a.path))break;a.path.length>t.length+1||_C(WV(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,t,r,i){Fe()}Is(e,t){return Q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lre(this)}getSize(e){return Q.resolve(this.size)}}class lre extends class{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class dre{constructor(e){this.persistence=e,this.Ts=new Uo(t=>Fa(t),Nh),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Es=0,this.As=new UC,this.targetCount=0,this.Rs=Wa.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),Q.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Wa(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.vn(t),Q.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Ts.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Ts.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.As.containsKey(t))}}class TB{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Vr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new dre(this),this.indexManager=new Qne,this.remoteDocumentCache=new cre(r=>this.referenceDelegate.Ss(r)),this.wt=new rB(t),this.Ds=new ore(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new are,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new ure(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new hre(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,t){return Q.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class hre extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}{constructor(e){super(),this.currentSequenceNumber=e}}class E_{constructor(e){this.persistence=e,this.ks=new UC,this.Ms=null}static Os(e){return new E_(e)}get Fs(){if(this.Ms)return this.Ms;throw Fe()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Q.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Fs,r=>{const i=be.fromPath(r);return this.$s(e,i).next(s=>{s||t.removeEntry(i,We.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Q.or([()=>Q.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class HC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=st(),i=st();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new HC(e,t.fromCache,r,i)}}class SB{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(s=>s||this.xi(e,t,i,r)).next(s=>s||this.Ni(e,t))}Ci(e,t){if(fU(t))return Q.resolve(null);let r=Ur(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=a_(t,null,"F"),r=Ur(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=st(...s);return this.Di.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ki(t,a);return this.Mi(t,c,o,u.readTime)?this.Ci(e,a_(t,null,"F")):this.Oi(e,c,t,u)}))})))}xi(e,t,r,i){return fU(t)||i.isEqual(We.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(s=>{const o=this.ki(t,s);return this.Mi(t,o,r,i)?this.Ni(e,t):(pC()<=yt.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),DC(t)),this.Oi(e,o,t,function(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new Yt(t+1,0):new Yt(t,r));return new oi(i,be.empty(),e)}(i,-1)))})}ki(e,t){let r=new Rt(mU(e));return t.forEach((i,s)=>{SC(e,s)&&(r=r.add(s))}),r}Mi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,t){return pC()<=yt.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",DC(t)),this.Di.getDocumentsMatchingQuery(e,t,oi.min())}Oi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class pre{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new on(tt),this.Bi=new Uo(s=>Fa(s),Nh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IB(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function AB(n,e){return GC.apply(this,arguments)}function GC(){return GC=P(function*(n,e){const t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=st();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(c=>({Ki:c,removedBatchIds:o,addedBatchIds:a}))})})}),GC.apply(this,arguments)}function gre(n,e){const t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Ui.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const d=u.batch,h=d.keys();let m=Q.resolve();return h.forEach(y=>{m=m.next(()=>c.getEntry(a,y)).next(T=>{const N=u.docVersions.get(y);Qe(null!==N),T.version.compareTo(N)<0&&(d.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),c.addEntry(T)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=st();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MB(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function mre(n,e){const t=Te(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const a=[];e.targetChanges.forEach((d,h)=>{const m=i.get(h);if(!m)return;a.push(t.Vs.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Vs.addMatchingKeys(s,d.addedDocuments,h)));let y=m.withSequenceNumber(s.currentSequenceNumber);var T,N,U;e.targetMismatches.has(h)?y=y.withResumeToken(An.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),N=y,U=d,(0===(T=m).resumeToken.approximateByteSize()||N.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&a.push(t.Vs.updateTargetData(s,y))});let u=Br(),c=st();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(function(n,e,t){let r=st(),i=st();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Br();return t.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(We.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Gi:o,Qi:i}})}(s,o,e.documentUpdates).next(d=>{u=d.Gi,c=d.Qi})),!r.isEqual(We.min())){const d=t.Vs.getLastRemoteSnapshotVersion(s).next(h=>t.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(t.$i=i,s))}function _re(n,e){const t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kc(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):t.Vs.allocateTargetId(r).next(o=>(i=new Bo(e,o,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Qc(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=P(function*(n,e,t){const r=Te(n),i=r.$i.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!No(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),WC.apply(this,arguments)}function C_(n,e,t){const r=Te(n);let i=We.min(),s=st();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const d=Te(a),h=d.Bi.get(c);return void 0!==h?Q.resolve(d.$i.get(h)):d.Vs.getTargetData(u,c)}(r,o,Ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fi.getDocumentsMatchingQuery(o,e,t?i:We.min(),t?s:st())).next(a=>(function(n,e,t){let r=We.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Li.set(e,r)}(r,function(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,ji:s})))}class YC{constructor(){this.activeTargetIds=d_()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LB{constructor(){this.Fr=new YC,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new YC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wre{Br(e){}shutdown(){}}class VB{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ere={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class bre{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Cre extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,s){const o=this.oo(e,t);he("RestConnection","Sending: ",o,r);const a={};return this.uo(a,i,s),this.co(e,o,a,r).then(u=>(he("RestConnection","Received: ",u),u),u=>{throw Nc("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}ao(e,t,r,i,s,o){return this.ro(e,t,r,i,s)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+kc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,t){return`${this.so}/v1/${t}:${Ere[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((s,o)=>{const a=new bte;a.listenOnce(vte.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case fC.NO_ERROR:const c=a.getResponseJson();he("Connection","XHR received:",JSON.stringify(c)),s(c);break;case fC.TIMEOUT:he("Connection",'RPC "'+e+'" timed out'),o(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case fC.HTTP_ERROR:const d=a.getStatus();if(he("Connection",'RPC "'+e+'" failed with status:',d,"response text:",a.getResponseText()),d>0){const h=a.getResponseJson().error;if(h&&h.status&&h.message){const m=function(y){const T=y.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(T)>=0?T:J.UNKNOWN}(h.status);o(new de(m,h.message))}else o(new de(J.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new de(J.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{he("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(t,"POST",u,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_te(),o=yte(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Ete({})),this.uo(a.initMessageHeaders,t,r),ym()||ib()||Pn().indexOf("Electron/")>=0||c2()||Pn().indexOf("MSAppHost/")>=0||vm()||(a.httpHeadersOverwriteParam="$httpHeaders");const u=i.join("");he("Connection","Creating WebChannel: "+u,a);const c=s.createWebChannel(u,a);let d=!1,h=!1;const m=new bre({jr:T=>{h?he("Connection","Not sending because WebChannel is closed:",T):(d||(he("Connection","Opening WebChannel transport."),c.open(),d=!0),he("Connection","WebChannel sending:",T),c.send(T))},Wr:()=>c.close()}),y=(T,N,U)=>{T.listen(N,K=>{try{U(K)}catch($){setTimeout(()=>{throw $},0)}})};return y(c,Xm.EventType.OPEN,()=>{h||he("Connection","WebChannel transport opened.")}),y(c,Xm.EventType.CLOSE,()=>{h||(h=!0,he("Connection","WebChannel transport closed"),m.eo())}),y(c,Xm.EventType.ERROR,T=>{h||(h=!0,Nc("Connection","WebChannel transport errored:",T),m.eo(new de(J.UNAVAILABLE,"The operation could not be completed")))}),y(c,Xm.EventType.MESSAGE,T=>{var N;if(!h){const U=T.data[0];Qe(!!U);const K=U,$=K.error||(null===(N=K[0])||void 0===N?void 0:N.error);if($){he("Connection","WebChannel received error:",$);const ae=$.status;let pe=function(ze){const kt=Cn[ze];if(void 0!==kt)return RU(kt)}(ae),xe=$.message;void 0===pe&&(pe=J.INTERNAL,xe="Unknown error status: "+ae+" with message "+$.message),h=!0,m.eo(new de(pe,xe)),c.close()}else he("Connection","WebChannel received:",U),m.no(U)}}),y(o,wte.STAT_EVENT,T=>{T.stat===VV.PROXY?he("Connection","Detected buffering proxy"):T.stat===VV.NOPROXY&&he("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.Zr()},0),m}}function D_(){return"undefined"!=typeof document?document:null}function Zh(n){return new fne(n,!0)}class XC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class BB{constructor(e,t,r,i,s,o,a,u){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new XC(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return P(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return P(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return P(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io(P(function*(){e.state=0,e.start()}))}qo(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ire extends BB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.wt=s}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:Fe(),i=e.targetChange.targetIds||[],s=function(u,c){return u.dt?(Qe(void 0===c||"string"==typeof c),An.fromBase64String(c||"")):(Qe(void 0===c||c instanceof Uint8Array),An.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?J.UNKNOWN:RU(u.code);return new de(c,u.message||"")}(o);t=new FU(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ps(n,r.document.name),s=Bn(r.document.updateTime),o=new rr({mapValue:{fields:r.document.fields}}),a=Ut.newFoundDocument(i,s,o);t=new h_(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=ps(n,r.document),s=r.readTime?Bn(r.readTime):We.min(),o=Ut.newNoDocument(i,s);t=new h_([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ps(n,r.document);t=new h_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Fe();{const r=e.filter,s=new sne(r.count||0);t=new PU(r.targetId,s)}}var u;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return We.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?Bn(s.readTime):We.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Hh(this.wt),t.addTarget=function(i,s){let o;const a=s.target;return o=s_(a)?{documents:zU(i,a)}:{query:qU(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=BU(i,s.resumeToken):s.snapshotVersion.compareTo(We.min())>0&&(o.readTime=jh(i,s.snapshotVersion.toTimestamp())),o}(this.wt,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Fe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Hh(this.wt),t.removeTarget=e,this.Oo(t)}}class Tre extends BB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(n,e){return n&&n.length>0?(Qe(void 0!==e),n.map(t=>function(r,i){let s=Bn(r.updateTime?r.updateTime:i);return s.isEqual(We.min())&&(s=Bn(i)),new nne(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.Jo(r,t)}return Qe(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Hh(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function(n,e){let t;if(e instanceof $c)t={update:GU(n,e.key,e.value)};else if(e instanceof Hc)t={delete:$h(n,e.key)};else if(e instanceof Ys)t={update:GU(n,e.key,e.data),updateMask:Cne(e.fieldMask)};else{if(!(e instanceof xC))return Fe();t={verify:$h(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Bc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof La)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Va)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof jc)return{fieldPath:s.field.canonicalString(),increment:o._t};throw Fe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:pne(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Fe()),t;var i}(this.wt,r))};this.Oo(t)}}class Dre extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(J.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.bo.ao(e,t,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(J.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class Sre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(fn(t),this.su=!1):he("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class xre{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(a=>{r.enqueueAndForget(P(function*(){var u;Ho(o)&&(he("RemoteStore","Restarting streams for network reachability change."),yield(u=P(function*(c){const d=Te(c);d.lu.add(4),yield Yc(d),d._u.set("Unknown"),d.lu.delete(4),yield ef(d)}),function(c){return u.apply(this,arguments)})(o))}))}),this._u=new Sre(r,i)}}function ef(n){return ZC.apply(this,arguments)}function ZC(){return ZC=P(function*(n){if(Ho(n))for(const e of n.fu)yield e(!0)}),ZC.apply(this,arguments)}function Yc(n){return eI.apply(this,arguments)}function eI(){return eI=P(function*(n){for(const e of n.fu)yield e(!1)}),eI.apply(this,arguments)}function S_(n,e){const t=Te(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),rI(t)?nI(t):Xc(t).Co()&&tI(t,e))}function tf(n,e){const t=Te(n),r=Xc(t);t.hu.delete(e),r.Co()&&jB(t,e),0===t.hu.size&&(r.Co()?r.ko():Ho(t)&&t._u.set("Unknown"))}function tI(n,e){n.wu.Nt(e.targetId),Xc(n).Qo(e)}function jB(n,e){n.wu.Nt(e),Xc(n).jo(e)}function nI(n){n.wu=new lne({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Xc(n).start(),n._u.iu()}function rI(n){return Ho(n)&&!Xc(n).Do()&&n.hu.size>0}function Ho(n){return 0===Te(n).lu.size}function $B(n){n.wu=void 0}function Are(n){return iI.apply(this,arguments)}function iI(){return iI=P(function*(n){n.hu.forEach((e,t)=>{tI(n,e)})}),iI.apply(this,arguments)}function Mre(n,e){return sI.apply(this,arguments)}function sI(){return sI=P(function*(n,e){$B(n),rI(n)?(n._u.uu(e),nI(n)):n._u.set("Unknown")}),sI.apply(this,arguments)}function Rre(n,e,t){return oI.apply(this,arguments)}function oI(){return oI=P(function*(n,e,t){if(n._u.set("Online"),e instanceof FU&&2===e.state&&e.cause)try{yield(r=P(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.hu.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.hu.delete(a),i.wu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield x_(n,r)}else if(e instanceof h_?n.wu.Ut(e):e instanceof PU?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(We.min()))try{const r=yield MB(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const o=i.wu.Yt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.hu.get(u);c&&i.hu.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.hu.get(a);if(!u)return;i.hu.set(a,u.withResumeToken(An.EMPTY_BYTE_STRING,u.snapshotVersion)),jB(i,a);const c=new Bo(u.target,a,1,u.sequenceNumber);tI(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(n,t))}catch(r){he("RemoteStore","Failed to raise snapshot:",r),yield x_(n,r)}var r}),oI.apply(this,arguments)}function x_(n,e,t){return aI.apply(this,arguments)}function aI(){return aI=P(function*(n,e,t){if(!No(e))throw e;n.lu.add(1),yield Yc(n),n._u.set("Offline"),t||(t=()=>MB(n.localStore)),n.asyncQueue.enqueueRetryable(P(function*(){he("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield ef(n)}))}),aI.apply(this,arguments)}function HB(n,e){return e().catch(t=>x_(n,t,e))}function Jc(n){return uI.apply(this,arguments)}function uI(){return uI=P(function*(n){const e=Te(n),t=Go(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;kre(e);)try{const i=yield _re(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,Nre(e,i)}catch(i){yield x_(e,i)}GB(e)&&WB(e)}),uI.apply(this,arguments)}function kre(n){return Ho(n)&&n.au.length<10}function Nre(n,e){n.au.push(e);const t=Go(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function GB(n){return Ho(n)&&!Go(n).Do()&&n.au.length>0}function WB(n){Go(n).start()}function Ore(n){return cI.apply(this,arguments)}function cI(){return cI=P(function*(n){Go(n).Xo()}),cI.apply(this,arguments)}function Pre(n){return lI.apply(this,arguments)}function lI(){return lI=P(function*(n){const e=Go(n);for(const t of n.au)e.Ho(t.mutations)}),lI.apply(this,arguments)}function Fre(n,e,t){return dI.apply(this,arguments)}function dI(){return dI=P(function*(n,e,t){const r=n.au.shift(),i=OC.from(r,e,t);yield HB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Jc(n)}),dI.apply(this,arguments)}function Lre(n,e){return hI.apply(this,arguments)}function hI(){return hI=P(function*(n,e){var t;e&&Go(n).zo&&(yield(t=P(function*(r,i){if(MU(s=i.code)&&s!==J.ABORTED){const o=r.au.shift();Go(r).No(),yield HB(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Jc(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),GB(n)&&WB(n)}),hI.apply(this,arguments)}function zB(n,e){return fI.apply(this,arguments)}function fI(){return fI=P(function*(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Ho(t);t.lu.add(3),yield Yc(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield ef(t)}),fI.apply(this,arguments)}function gI(){return gI=P(function*(n,e){const t=Te(n);e?(t.lu.delete(2),yield ef(t)):e||(t.lu.add(2),yield Yc(t),t._u.set("Unknown"))}),gI.apply(this,arguments)}function Xc(n){return n.mu||(n.mu=function(e,t,r){const i=Te(e);return i.tu(),new Ire(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:Are.bind(null,n),Jr:Mre.bind(null,n),Go:Rre.bind(null,n)}),n.fu.push(function(){var e=P(function*(t){t?(n.mu.No(),rI(n)?nI(n):n._u.set("Unknown")):(yield n.mu.stop(),$B(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Go(n){return n.gu||(n.gu=function(e,t,r){const i=Te(e);return i.tu(),new Tre(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:Ore.bind(null,n),Jr:Lre.bind(null,n),Yo:Pre.bind(null,n),Jo:Fre.bind(null,n)}),n.fu.push(function(){var e=P(function*(t){t?(n.gu.No(),yield Jc(n)):(yield n.gu.stop(),n.au.length>0&&(he("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class mI{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new mI(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zc(n,e){if(fn("AsyncQueue",`${e}: ${n}`),No(n))return new de(J.UNAVAILABLE,`${e}: ${n}`);throw n}class el{constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=Lh(),this.sortedSet=new on(this.comparator)}static emptySet(e){return new el(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof el)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new el;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class qB{constructor(){this.yu=new on(be.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Fe():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class tl{constructor(e,t,r,i,s,o,a,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(o=>{s.push({type:0,doc:o})}),new tl(e,t,el.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Vre{constructor(){this.Iu=void 0,this.listeners=[]}}class Ure{constructor(){this.queries=new Uo(e=>pU(e),Oh),this.onlineState="Unknown",this.Tu=new Set}}function yI(){return yI=P(function*(n,e){const t=Te(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Vre),i)try{s.Iu=yield t.onListen(r)}catch(o){const a=Zc(o,`Initialization of query '${DC(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.listeners.push(e),e.Eu(t.onlineState),s.Iu&&e.Au(s.Iu)&&EI(t)}),yI.apply(this,arguments)}function wI(){return wI=P(function*(n,e){const t=Te(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),wI.apply(this,arguments)}function Bre(n,e){const t=Te(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.listeners)a.Au(i)&&(r=!0);o.Iu=i}}r&&EI(t)}function jre(n,e,t){const r=Te(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function EI(n){n.Tu.forEach(e=>{e.next()})}class bI{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class YB{constructor(e){this.key=e}}class JB{constructor(e){this.key=e}}class XB{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=st(),this.mutatedKeys=st(),this.Lu=mU(e),this.Uu=new el(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new qB,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const m=i.get(d),y=SC(this.query,h)?h:null,T=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let U=!1;m&&y?m.data.isEqual(y.data)?T!==N&&(r.track({type:3,doc:y}),U=!0):this.Qu(m,y)||(r.track({type:2,doc:y}),U=!0,(u&&this.Lu(y,u)>0||c&&this.Lu(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),U=!0):m&&!y&&(r.track({type:1,doc:m}),U=!0,(u||c)&&(a=!0)),U&&(y?(o=o.add(y),s=N?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const d="F"===this.query.limitType?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Uu:o,Gu:r,Mi:a,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((c,d)=>function(h,m){const y=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return y(h)-y(m)}(c.type,d.type)||this.Lu(c.doc,d.doc)),this.ju(r);const o=t?this.Wu():[],a=0===this.Bu.size&&this.current?1:0,u=a!==this.$u;return this.$u=a,0!==s.length||u?{snapshot:new tl(this.query,e.Uu,i,s,e.mutatedKeys,0===a,u,!1),zu:o}:{zu:o}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new qB,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=st(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new JB(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new YB(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=st();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return tl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Gre{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Wre{constructor(e){this.key=e,this.Xu=!1}}class zre{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Uo(a=>pU(a),Oh),this.ec=new Map,this.nc=new Set,this.sc=new on(be.comparator),this.ic=new Map,this.rc=new UC,this.oc={},this.uc=new Map,this.cc=Wa.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function qre(n,e){return CI.apply(this,arguments)}function CI(){return CI=P(function*(n,e){const t=zI(n);let r,i;const s=t.tc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const o=yield Kc(t.localStore,Ur(e));t.isPrimaryClient&&S_(t.remoteStore,o);const a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield II(t,e,r,"current"===a)}return i}),CI.apply(this,arguments)}function II(n,e,t,r){return TI.apply(this,arguments)}function TI(){return TI=P(function*(n,e,t,r){n.hc=(d,h,m)=>{return(y=P(function*(T,N,U,K){let $=N.view.Ku(U);$.Mi&&($=yield C_(T.localStore,N.query,!1).then(({documents:xe})=>N.view.Ku(xe,$)));const ae=K&&K.targetChanges.get(N.targetId),pe=N.view.applyChanges($,T.isPrimaryClient,ae);return PI(T,N.targetId,pe.zu),pe.snapshot}),function(T,N,U,K){return y.apply(this,arguments)})(n,d,h,m);var y};const i=yield C_(n.localStore,e,!0),s=new XB(e,i.ji),o=s.Ku(i.documents),a=Bh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),u=s.applyChanges(o,n.isPrimaryClient,a);PI(n,t,u.zu);const c=new Gre(e,t,s);return n.tc.set(e,c),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),u.snapshot}),TI.apply(this,arguments)}function Kre(n,e){return DI.apply(this,arguments)}function DI(){return DI=P(function*(n,e){const t=Te(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(s=>!Oh(s,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),tf(t.remoteStore,r.targetId),nl(t,r.targetId)}).catch(ko))):(nl(t,r.targetId),yield Qc(t.localStore,r.targetId,!0))}),DI.apply(this,arguments)}function SI(){return SI=P(function*(n,e,t){const r=qI(n);try{const i=yield function(s,o){const a=Te(s),u=Yt.now(),c=o.reduce((m,y)=>m.add(y.key),st());let d,h;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Br(),T=st();return a.Ui.getEntries(m,c).next(N=>{y=N,y.forEach((U,K)=>{K.isValidDocument()||(T=T.add(U))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,y)).next(N=>{d=N;const U=[];for(const K of o){const $=ine(K,d.get(K.key).overlayedDocument);null!=$&&U.push(new Ys(K.key,$,sU($.value.mapValue),Jt.exists(!0)))}return a.mutationQueue.addMutationBatch(m,u,U,o)}).next(N=>{h=N;const U=N.applyToLocalDocumentSet(d,T);return a.documentOverlayCache.saveOverlays(m,N.batchId,U)})}).then(()=>({batchId:h.batchId,changes:NU(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.oc[s.currentUser.toKey()];u||(u=new on(tt)),u=u.insert(o,a),s.oc[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Js(r,i.changes),yield Jc(r.remoteStore)}catch(i){const s=Zc(i,"Failed to persist write");t.reject(s)}}),SI.apply(this,arguments)}function ZB(n,e){return xI.apply(this,arguments)}function xI(){return xI=P(function*(n,e){const t=Te(n);try{const r=yield mre(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.ic.get(s);o&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Xu=!0:i.modifiedDocuments.size>0?Qe(o.Xu):i.removedDocuments.size>0&&(Qe(o.Xu),o.Xu=!1))}),yield Js(t,r,e)}catch(r){yield ko(r)}}),xI.apply(this,arguments)}function ej(n,e,t){const r=Te(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((s,o)=>{const a=o.view.Eu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=Te(s);a.onlineState=o;let u=!1;a.queries.forEach((c,d)=>{for(const h of d.listeners)h.Eu(o)&&(u=!0)}),u&&EI(a)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Yre(n,e,t){return AI.apply(this,arguments)}function AI(){return AI=P(function*(n,e,t){const r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),s=i&&i.key;if(s){let o=new on(be.comparator);o=o.insert(s,Ut.newNoDocument(s,We.min()));const a=st().add(s),u=new Uh(We.min(),new Map,new Rt(tt),o,a);yield ZB(r,u),r.sc=r.sc.remove(s),r.ic.delete(e),FI(r)}else yield Qc(r.localStore,e,!1).then(()=>nl(r,e,t)).catch(ko)}),AI.apply(this,arguments)}function Jre(n,e){return MI.apply(this,arguments)}function MI(){return MI=P(function*(n,e){const t=Te(n),r=e.batch.batchId;try{const i=yield gre(t.localStore,e);OI(t,r,null),NI(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Js(t,i)}catch(i){yield ko(i)}}),MI.apply(this,arguments)}function Xre(n,e,t){return RI.apply(this,arguments)}function RI(){return RI=P(function*(n,e,t){const r=Te(n);try{const i=yield function(s,o){const a=Te(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(d=>(Qe(null!==d),c=d.keys(),a.mutationQueue.removeMutationBatch(u,d))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);OI(r,e,t),NI(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Js(r,i)}catch(i){yield ko(i)}}),RI.apply(this,arguments)}function NI(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function OI(n,e,t){const r=Te(n);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function nl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||tj(n,r)})}function tj(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(tf(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),FI(n))}function PI(n,e,t){for(const r of t)r instanceof YB?(n.rc.addReference(r.key,e),eie(n,r)):r instanceof JB?(he("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||tj(n,r.key)):Fe()}function eie(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(he("SyncEngine","New document in limbo: "+t),n.nc.add(r),FI(n))}function FI(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new be(wt.fromString(e)),r=n.cc.next();n.ic.set(r,new Wre(t)),n.sc=n.sc.insert(t,r),S_(n.remoteStore,new Bo(Ur(Vc(t.path)),r,2,Vr.ot))}}function Js(n,e,t){return LI.apply(this,arguments)}function LI(){return LI=P(function*(n,e,t){const r=Te(n),i=[],s=[],o=[];var a;r.tc.isEmpty()||(r.tc.forEach((a,u)=>{o.push(r.hc(u,e,t).then(c=>{if(c){r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c.fromCache?"not-current":"current"),i.push(c);const d=HC.Vi(u.targetId,c);s.push(d)}}))}),yield Promise.all(o),r.Zu.Go(i),yield(a=P(function*(u,c){const d=Te(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Q.forEach(c,m=>Q.forEach(m.Pi,y=>d.persistence.referenceDelegate.addReference(h,m.targetId,y)).next(()=>Q.forEach(m.vi,y=>d.persistence.referenceDelegate.removeReference(h,m.targetId,y)))))}catch(h){if(!No(h))throw h;he("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const m=h.targetId;if(!h.fromCache){const y=d.$i.get(m),N=y.withLastLimboFreeSnapshotVersion(y.snapshotVersion);d.$i=d.$i.insert(m,N)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),LI.apply(this,arguments)}function tie(n,e){return VI.apply(this,arguments)}function VI(){return VI=P(function*(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=yield AB(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(o=>{o.forEach(a=>{a.reject(new de(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Js(t,r.Ki)}var i}),VI.apply(this,arguments)}function nie(n,e){const t=Te(n),r=t.ic.get(e);if(r&&r.Xu)return st().add(r.key);{let i=st();const s=t.ec.get(e);if(!s)return i;for(const o of s){const a=t.tc.get(o);i=i.unionWith(a.view.qu)}return i}}function zI(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yre.bind(null,e),e.Zu.Go=Bre.bind(null,e.eventManager),e.Zu.lc=jre.bind(null,e.eventManager),e}function qI(n){const e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xre.bind(null,e),e}class die{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return P(function*(){t.wt=Zh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return function(n,e,t,r){return new pre(n,e,t,r)}(this.persistence,new SB,e.initialUser,this.wt)}_c(e){return new TB(E_.Os,this.wt)}dc(e){return new LB}terminate(){var e=this;return P(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KI{initialize(e,t){var r=this;return P(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>ej(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tie.bind(null,r.syncEngine),yield function(n,e){return gI.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Ure}createDatastore(e){const t=Zh(e.databaseInfo.databaseId),r=new Cre(e.databaseInfo);return new Dre(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>ej(this.syncEngine,a,0),o=VB.V()?new VB:new wre,new xre(t,r,i,s,o);var t,r,i,s,o}createSyncEngine(e,t){return function(r,i,s,o,a,u,c){const d=new zre(r,i,s,o,a,u);return c&&(d.ac=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=P(function*(t){const r=Te(t);he("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Yc(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class _ie{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vn.UNAUTHENTICATED,this.clientId=$V.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=P(function*(a){he("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(he("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return P(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(P(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zc(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function sj(n,e){return QI.apply(this,arguments)}function QI(){return QI=P(function*(n,e){n.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=P(function*(s){r.isEqual(s)||(yield AB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),QI.apply(this,arguments)}function oj(n,e){return YI.apply(this,arguments)}function YI(){return YI=P(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JI(n);he("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>zB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>zB(e.remoteStore,s)),n.onlineComponents=e}),YI.apply(this,arguments)}function JI(n){return XI.apply(this,arguments)}function XI(){return XI=P(function*(n){return n.offlineComponents||(he("FirestoreClient","Using default OfflineComponentProvider"),yield sj(n,new die)),n.offlineComponents}),XI.apply(this,arguments)}function M_(n){return ZI.apply(this,arguments)}function ZI(){return ZI=P(function*(n){return n.onlineComponents||(he("FirestoreClient","Using default OnlineComponentProvider"),yield oj(n,new KI)),n.onlineComponents}),ZI.apply(this,arguments)}function rl(n){return tT.apply(this,arguments)}function tT(){return tT=P(function*(n){const e=yield M_(n),t=e.eventManager;return t.onListen=qre.bind(null,e.syncEngine),t.onUnlisten=Kre.bind(null,e.syncEngine),t}),tT.apply(this,arguments)}const dj=new Map;function nT(n,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hj(n){if(!be.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fj(n){if(be.isDocumentKey(n))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function k_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Fe()}function bt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=k_(n);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class gj{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(n,e,t,r){if(!0===e&&!0===r)throw new de(J.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gj({}),this._settingsFrozen=!1,e instanceof Po?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(i.options.projectId)}(e))}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gj(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Cte;switch(t.type){case"gapi":const r=t.client;return Qe(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Ste(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dj.get(e);t&&(he("ComponentProvider","Removing Datastore"),dj.delete(e),t.terminate())}(this),Promise.resolve()}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class yr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class ms extends yr{constructor(e,t,r){super(e,t,Vc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new be(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function N_(n,e,...t){if(n=Jn(n),1===arguments.length&&(e=$V.I()),nT("doc","path",e),n instanceof nf){const r=wt.fromString(e,...t);return hj(r),new gn(n,null,new be(r))}{if(!(n instanceof gn||n instanceof ms))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return hj(r),new gn(n.firestore,n instanceof ms?n.converter:null,new be(r))}}class Aie{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new XC(this,"async_queue_retry"),this.Kc=()=>{const t=D_();t&&he("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=D_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=D_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Un;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return P(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!No(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,fn("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=mI.createAndSchedule(this,e,t,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&Fe()}verifyOperationInProgress(){}zc(){var e=this;return P(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function rT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class zt extends nf{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Aie,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||mj(this),this._firestoreClient.terminate()}}function Rie(n=ih()){return So(n,"firestore").getImmediate()}function Mn(n){return n._firestoreClient||mj(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mj(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ute(n._databaseId,s,n._persistenceKey,(a=t).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;n._firestoreClient=new _ie(n._authCredentials,n._appCheckCredentials,n._queue,r)}class il{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(An.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class iT{constructor(e){this._methodName=e}}class sT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}const kie=/^__.*__$/;class Nie{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms):new $c(e,this.data,t,this.fieldTransforms)}}class vj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ys(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class O_{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new O_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return F_(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(wj(this.Zc)&&kie.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Oie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Zh(e)}aa(e,t,r,i=!1){return new O_({Zc:e,methodName:t,ca:r,path:pn.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function sl(n){const e=n._freezeSettings(),t=Zh(n._databaseId);return new Oie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oT(n,e,t,r,i,s={}){const o=n.aa(s.merge||s.mergeFields?2:0,e,t,i);uT("Data must be an object, but it was:",o,r);const a=Tj(r,o);let u,c;if(s.merge)u=new ai(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const m=cT(e,h,t);if(!o.contains(m))throw new de(J.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Sj(d,m)||d.push(m)}u=new ai(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new Nie(new rr(a),u,c)}class rf extends iT{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}function Ka(n,e){if(Dj(n=Jn(n)))return uT("Unsupported field value:",e,n),Tj(n,e);if(n instanceof iT)return function(t,r){if(!wj(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const o of t){let a=Ka(o,r.ra(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=Jn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vU(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Yt.fromDate(t);return{timestampValue:jh(r.wt,i)}}if(t instanceof Yt){const i=new Yt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jh(r.wt,i)}}if(t instanceof sT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qa)return{bytesValue:BU(r.wt,t._byteString)};if(t instanceof gn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:AC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${k_(t)}`)}(n,e)}function Tj(n,e){const t={};return QV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(n,(r,i)=>{const s=Ka(i,e.ea(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Dj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yt||n instanceof sT||n instanceof qa||n instanceof gn||n instanceof iT)}function uT(n,e,t){if(!Dj(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=k_(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function cT(n,e,t){if((e=Jn(e))instanceof il)return e._internalPath;if("string"==typeof e)return P_(n,e);throw F_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Vie=new RegExp("[~\\*/\\[\\]]");function P_(n,e,t){if(e.search(Vie)>=0)throw F_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new il(...e.split("."))._internalPath}catch(r){throw F_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function F_(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new de(J.INVALID_ARGUMENT,a+n+u)}function Sj(n,e){return n.some(t=>t.isEqual(e))}class lT{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(L_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uie extends lT{data(){return super.data()}}function L_(n,e){return"string"==typeof e?P_(n,e):e instanceof il?e._internalPath:e._delegate._internalPath}class Qa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ol extends lT{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new V_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(L_("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class V_ extends ol{data(e={}){return super.data(e)}}class al{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new V_(this._firestore,this._userDataWriter,r.key,r,new Qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new V_(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Qa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new V_(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Qa(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Bie(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Bie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}class Ya extends class{convertValue(e,t="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Na(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fe()}}convertObject(e,t){const r={};return ka(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new sT(an(e.latitude),an(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JV(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sh(e));default:return null}}convertTimestamp(e){const t=Oo(e);return new Yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wt.fromString(e);Qe(YU(r));const i=new Po(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(t)||fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function sf(n,e){return function(t,r){const i=new Un;return t.asyncQueue.enqueueAndForget(P(function*(){return function(n,e,t){return SI.apply(this,arguments)}(yield function(n){return M_(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(Mn(n),e)}!function(n,e=!0){kc="9.9.3",Xn(new Fn("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new zt(i,new Tte(t.getProvider("auth-internal")),new xte(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),Mt(UV,"3.4.14",n),Mt(UV,"3.4.14","esm2017")}(),Mt("firebase","9.9.3","app");const Lj="@firebase/installations",fT="0.5.12",Uj=`w:${fT}`,Bj="FIS_v2",Xs=new ds("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function jj(n){return n instanceof Ci&&n.code.includes("request-failed")}function pT({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function $j(n){return{token:n.token,requestStatus:2,expiresIn:ise(n.expiresIn),creationTime:Date.now()}}function gT(n,e){return mT.apply(this,arguments)}function mT(){return mT=P(function*(n,e){const r=(yield e.json()).error;return Xs.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}),mT.apply(this,arguments)}function Hj({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Gj(n,{refreshToken:e}){const t=Hj(n);return t.append("Authorization",function(n){return`${Bj} ${n}`}(e)),t}function _T(n){return yT.apply(this,arguments)}function yT(){return yT=P(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e}),yT.apply(this,arguments)}function ise(n){return Number(n.replace("s","000"))}function ose(n,e){return vT.apply(this,arguments)}function vT(){return vT=P(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=pT(n),i=Hj(n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Bj,appId:n.appId,sdkVersion:Uj})},u=yield _T(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:$j(c.authToken)}}throw yield gT("Create Installation",u)}),vT.apply(this,arguments)}function Wj(n){return new Promise(e=>{setTimeout(e,n)})}const use=/^[cdef][\w-]{21}$/;function cse(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function(n){return function(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return use.test(t)?t:""}catch(n){return""}}function ul(n){return`${n.appName}!${n.appId}`}const cl=new Map;function zj(n,e){const t=ul(n);qj(t,e),function(n,e){const t=(!Ja&&"BroadcastChannel"in self&&(Ja=new BroadcastChannel("[Firebase] FID Change"),Ja.onmessage=n=>{qj(n.data.key,n.data.fid)}),Ja);t&&t.postMessage({key:n,fid:e}),0===cl.size&&Ja&&(Ja.close(),Ja=null)}(t,e)}function qj(n,e){const t=cl.get(n);if(t)for(const r of t)r(e)}let Ja=null;const Xa="firebase-installations-store";let ET=null;function bT(){return ET||(ET=Tm("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Xa)}})),ET}function B_(n,e){return CT.apply(this,arguments)}function CT(){return CT=P(function*(n,e){const t=ul(n),i=(yield bT()).transaction(Xa,"readwrite"),s=i.objectStore(Xa),o=yield s.get(t);return yield s.put(e,t),yield i.done,(!o||o.fid!==e.fid)&&zj(n,e.fid),e}),CT.apply(this,arguments)}function IT(n){return TT.apply(this,arguments)}function TT(){return TT=P(function*(n){const e=ul(n),r=(yield bT()).transaction(Xa,"readwrite");yield r.objectStore(Xa).delete(e),yield r.done}),TT.apply(this,arguments)}function of(n,e){return DT.apply(this,arguments)}function DT(){return DT=P(function*(n,e){const t=ul(n),i=(yield bT()).transaction(Xa,"readwrite"),s=i.objectStore(Xa),o=yield s.get(t),a=e(o);return void 0===a?yield s.delete(t):yield s.put(a,t),yield i.done,a&&(!o||o.fid!==a.fid)&&zj(n,a.fid),a}),DT.apply(this,arguments)}function ST(n){return xT.apply(this,arguments)}function xT(){return xT=P(function*(n){let e;const t=yield of(n.appConfig,r=>{const i=mse(r),s=_se(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}}),xT.apply(this,arguments)}function mse(n){return Jj(n||{fid:cse(),registrationStatus:0})}function _se(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Xs.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(n,e){return AT.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:vse(n)}:{installationEntry:e}}function AT(){return AT=P(function*(n,e){try{const t=yield ose(n,e);return B_(n.appConfig,t)}catch(t){throw jj(t)&&409===t.customData.serverCode?yield IT(n.appConfig):yield B_(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}),AT.apply(this,arguments)}function vse(n){return MT.apply(this,arguments)}function MT(){return MT=P(function*(n){let e=yield Yj(n.appConfig);for(;1===e.registrationStatus;)yield Wj(100),e=yield Yj(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield ST(n);return r||t}return e}),MT.apply(this,arguments)}function Yj(n){return of(n,e=>{if(!e)throw Xs.create("installation-not-found");return Jj(e)})}function Jj(n){return function(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function Ese(n,e){return RT.apply(this,arguments)}function RT(){return RT=P(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=bse(n,t),i=Gj(n,t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Uj,appId:n.appId}})},u=yield _T(()=>fetch(r,a));if(u.ok)return $j(yield u.json());throw yield gT("Generate Auth Token",u)}),RT.apply(this,arguments)}function bse(n,{fid:e}){return`${pT(n)}/${e}/authTokens:generate`}function kT(n){return NT.apply(this,arguments)}function NT(){return NT=P(function*(n,e=!1){let t;const r=yield of(n.appConfig,s=>{if(!Zj(s))throw Xs.create("not-registered");const o=s.authToken;if(!e&&Tse(o))return s;if(1===o.requestStatus)return t=Cse(n,e),s;{if(!navigator.onLine)throw Xs.create("app-offline");const a=Sse(s);return t=Ise(n,a),a}});return t?yield t:r.authToken}),NT.apply(this,arguments)}function Cse(n,e){return OT.apply(this,arguments)}function OT(){return OT=P(function*(n,e){let t=yield Xj(n.appConfig);for(;1===t.authToken.requestStatus;)yield Wj(100),t=yield Xj(n.appConfig);const r=t.authToken;return 0===r.requestStatus?kT(n,e):r}),OT.apply(this,arguments)}function Xj(n){return of(n,e=>{if(!Zj(e))throw Xs.create("not-registered");return function(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Ise(n,e){return PT.apply(this,arguments)}function PT(){return PT=P(function*(n,e){try{const t=yield Ese(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield B_(n.appConfig,r),t}catch(t){if(!jj(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield B_(n.appConfig,r)}else yield IT(n.appConfig);throw t}}),PT.apply(this,arguments)}function Zj(n){return void 0!==n&&2===n.registrationStatus}function Tse(n){return 2===n.requestStatus&&!function(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Sse(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function FT(){return FT=P(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield ST(e);return r?r.catch(console.error):kT(e).catch(console.error),t.fid}),FT.apply(this,arguments)}function LT(){return LT=P(function*(n,e=!1){const t=n;return yield Rse(t),(yield kT(t,e)).token}),LT.apply(this,arguments)}function Rse(n){return VT.apply(this,arguments)}function VT(){return VT=P(function*(n){const{registrationPromise:e}=yield ST(n);e&&(yield e)}),VT.apply(this,arguments)}function jT(n){return Xs.create("missing-app-config-values",{valueName:n})}const e$="installations";Xn(new Fn(e$,n=>{const e=n.getProvider("app").getImmediate(),t=function(n){if(!n||!n.options)throw jT("App Configuration");if(!n.name)throw jT("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw jT(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:So(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),Xn(new Fn("installations-internal",n=>{const t=So(n.getProvider("app").getImmediate(),e$).getImmediate();return{getId:()=>function(n){return FT.apply(this,arguments)}(t),getToken:i=>function(n){return LT.apply(this,arguments)}(t,i)}},"PRIVATE")),Mt(Lj,fT),Mt(Lj,fT,"esm2017");const $T="@firebase/remote-config",$r=new ds("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Qse{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return P(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),o=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function Yse(n=navigator){return n.languages&&n.languages[0]||n.language}class Jse{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var t=this;return P(function*(){var r,i,s;const[o,a]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),c=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,d={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},h={sdk_version:t.sdkVersion,app_instance_id:o,app_instance_id_token:a,app_id:t.appId,language_code:Yse()},m={method:"POST",headers:d,body:JSON.stringify(h)},y=fetch(c,m),T=new Promise((pe,xe)=>{e.signal.addEventListener(()=>{const ze=new Error("The operation was aborted.");ze.name="AbortError",xe(ze)})});let N;try{yield Promise.race([y,T]),N=yield y}catch(pe){let xe="fetch-client-network";throw"AbortError"===(null===(r=pe)||void 0===r?void 0:r.name)&&(xe="fetch-timeout"),$r.create(xe,{originalErrorMessage:null===(i=pe)||void 0===i?void 0:i.message})}let U=N.status;const K=N.headers.get("ETag")||void 0;let $,ae;if(200===N.status){let pe;try{pe=yield N.json()}catch(xe){throw $r.create("fetch-client-parse",{originalErrorMessage:null===(s=xe)||void 0===s?void 0:s.message})}$=pe.entries,ae=pe.state}if("INSTANCE_STATE_UNSPECIFIED"===ae?U=500:"NO_CHANGE"===ae?U=304:("NO_TEMPLATE"===ae||"EMPTY_CONFIG"===ae)&&($={}),304!==U&&200!==U)throw $r.create("fetch-status",{httpStatus:U});return{status:U,eTag:K,config:$}})()}}class eoe{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return P(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return P(function*(){yield function(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r($r.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+ub(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class roe{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function $_(n,e){var t;const r=n.target.error||void 0;return $r.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const Za="app_namespace_store";class aoe{constructor(e,t,r,i=function(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e($_(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Za,{keyPath:"compositeKey"})}}catch(r){e($r.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return P(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([Za],"readonly").objectStore(Za),c=t.createCompositeKey(e);try{const d=u.get(c);d.onerror=h=>{s($_(h,"storage-get"))},d.onsuccess=h=>{const m=h.target.result;i(m?m.value:void 0)}}catch(d){s($r.create("storage-get",{originalErrorMessage:null===(o=d)||void 0===o?void 0:o.message}))}})})()}set(e,t){var r=this;return P(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{var a;const c=i.transaction([Za],"readwrite").objectStore(Za),d=r.createCompositeKey(e);try{const h=c.put({compositeKey:d,value:t});h.onerror=m=>{o($_(m,"storage-set"))},h.onsuccess=()=>{s()}}catch(h){o($r.create("storage-set",{originalErrorMessage:null===(a=h)||void 0===a?void 0:a.message}))}})})()}delete(e){var t=this;return P(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var o;const u=r.transaction([Za],"readwrite").objectStore(Za),c=t.createCompositeKey(e);try{const d=u.delete(c);d.onerror=h=>{s($_(h,"storage-delete"))},d.onsuccess=()=>{i()}}catch(d){s($r.create("storage-delete",{originalErrorMessage:null===(o=d)||void 0===o?void 0:o.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class uoe{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return P(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function loe(){return qT.apply(this,arguments)}function qT(){return(qT=P(function*(){if(!va())return!1;try{return yield th()}catch(n){return!1}})).apply(this,arguments)}Xn(new Fn("remote-config",function(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $r.create("registration-window");if(!va())throw $r.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw $r.create("registration-project-id");if(!o)throw $r.create("registration-api-key");if(!a)throw $r.create("registration-app-id");const u=new aoe(a,r.name,t=t||"firebase"),c=new uoe(u),d=new Ea($T);d.logLevel=yt.ERROR;const h=new Jse(i,Ia,t,s,o,a),m=new eoe(h,u),y=new Qse(m,u,c,d),T=new roe(r,y,c,u,d);return function(n){const e=Jn(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(T),T},"PUBLIC").setMultipleInstances(!0)),Mt($T,"0.3.11"),Mt($T,"0.3.11","esm2017");const doe="/firebase-messaging-sw.js",hoe="/firebase-cloud-messaging-push-scope",i$="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",s$="google.c.a.c_id",poe="google.c.a.c_l",goe="google.c.a.ts",moe="google.c.a.e";var ll=(()=>(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"}(ll||(ll={})),ll))();function Zs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _oe(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const KT="fcm_token_details_db",o$="fcm_token_object_Store";function voe(n){return QT.apply(this,arguments)}function QT(){return QT=P(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(KT))return null;let e=null;return(yield Tm(KT,5,{upgrade:(r=P(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(o$))return;const c=a.objectStore(o$),d=yield c.index("fcmSenderId").get(n);if(yield c.clear(),d)if(2===s){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:null!==(u=h.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:"string"==typeof h.vapidKey?h.vapidKey:Zs(h.vapidKey)}}}else if(3===s){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Zs(h.auth),p256dh:Zs(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Zs(h.vapidKey)}}}else if(4===s){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Zs(h.auth),p256dh:Zs(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Zs(h.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield gb(KT),yield gb("fcm_vapid_details_db"),yield gb("undefined"),woe(e)?e:null;var r}),QT.apply(this,arguments)}function woe(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const eu="firebase-messaging-store";let YT=null;function JT(){return YT||(YT=Tm("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(eu)}})),YT}function a$(n){return XT.apply(this,arguments)}function XT(){return XT=P(function*(n){const e=nD(n),r=yield(yield JT()).transaction(eu).objectStore(eu).get(e);if(r)return r;{const i=yield voe(n.appConfig.senderId);if(i)return yield ZT(n,i),i}}),XT.apply(this,arguments)}function ZT(n,e){return eD.apply(this,arguments)}function eD(){return eD=P(function*(n,e){const t=nD(n),i=(yield JT()).transaction(eu,"readwrite");return yield i.objectStore(eu).put(e,t),yield i.done,e}),eD.apply(this,arguments)}function Coe(n){return tD.apply(this,arguments)}function tD(){return tD=P(function*(n){const e=nD(n),r=(yield JT()).transaction(eu,"readwrite");yield r.objectStore(eu).delete(e),yield r.done}),tD.apply(this,arguments)}function nD({appConfig:n}){return n.appId}const sr=new ds("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Toe(n,e){return rD.apply(this,arguments)}function rD(){return rD=P(function*(n,e){var t;const r=yield aD(n),i=c$(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(oD(n.appConfig),s)).json()}catch(a){throw sr.create("token-subscribe-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw sr.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw sr.create("token-subscribe-no-token");return o.token}),rD.apply(this,arguments)}function Doe(n,e){return iD.apply(this,arguments)}function iD(){return iD=P(function*(n,e){var t;const r=yield aD(n),i=c$(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let o;try{o=yield(yield fetch(`${oD(n.appConfig)}/${e.token}`,s)).json()}catch(a){throw sr.create("token-update-failed",{errorInfo:null===(t=a)||void 0===t?void 0:t.toString()})}if(o.error)throw sr.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw sr.create("token-update-no-token");return o.token}),iD.apply(this,arguments)}function u$(n,e){return sD.apply(this,arguments)}function sD(){return sD=P(function*(n,e){var t;const i={method:"DELETE",headers:yield aD(n)};try{const o=yield(yield fetch(`${oD(n.appConfig)}/${e}`,i)).json();if(o.error)throw sr.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(s){throw sr.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}}),sD.apply(this,arguments)}function oD({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function aD(n){return uD.apply(this,arguments)}function uD(){return uD=P(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}),uD.apply(this,arguments)}function c$({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==i$&&(i.web.applicationPubKey=r),i}function xoe(n){return cD.apply(this,arguments)}function cD(){return cD=P(function*(n){const e=yield Moe(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Zs(e.getKey("auth")),p256dh:Zs(e.getKey("p256dh"))},r=yield a$(n.firebaseDependencies);if(r){if(Roe(r.subscriptionOptions,t))return Date.now()>=r.createTime+6048e5?Aoe(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield u$(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return d$(n.firebaseDependencies,t)}return d$(n.firebaseDependencies,t)}),cD.apply(this,arguments)}function l$(n){return lD.apply(this,arguments)}function lD(){return lD=P(function*(n){const e=yield a$(n.firebaseDependencies);e&&(yield u$(n.firebaseDependencies,e.token),yield Coe(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()}),lD.apply(this,arguments)}function Aoe(n,e){return dD.apply(this,arguments)}function dD(){return dD=P(function*(n,e){try{const t=yield Doe(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield ZT(n.firebaseDependencies,r),t}catch(t){throw yield l$(n),t}}),dD.apply(this,arguments)}function d$(n,e){return hD.apply(this,arguments)}function hD(){return hD=P(function*(n,e){const r={token:yield Toe(n,e),createTime:Date.now(),subscriptionOptions:e};return yield ZT(n,r),r.token}),hD.apply(this,arguments)}function Moe(n,e){return fD.apply(this,arguments)}function fD(){return fD=P(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_oe(e)})}),fD.apply(this,arguments)}function Roe(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function h$(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i)}(e,n),function(n,e){!e.data||(n.data=e.data)}(e,n),function(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(null===(t=e.notification)||void 0===t?void 0:t.click_action))return;n.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(n.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(n.fcmOptions.analyticsLabel=u)}(e,n),e}function Poe(n){return"object"==typeof n&&!!n&&s$ in n}function f$(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function pD(n){return sr.create("missing-app-config-values",{valueName:n})}f$("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),f$("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Loe{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function(n){if(!n||!n.options)throw pD("App Configuration Object");if(!n.name)throw pD("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw pD(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function p$(n){return gD.apply(this,arguments)}function gD(){return gD=P(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(doe,{scope:hoe}),n.swRegistration.update().catch(()=>{})}catch(t){throw sr.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}}),gD.apply(this,arguments)}function Voe(n,e){return mD.apply(this,arguments)}function mD(){return mD=P(function*(n,e){if(!e&&!n.swRegistration&&(yield p$(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");n.swRegistration=e}}),mD.apply(this,arguments)}function Uoe(n,e){return _D.apply(this,arguments)}function _D(){return _D=P(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=i$)}),_D.apply(this,arguments)}function yD(){return yD=P(function*(n,e){if(!navigator)throw sr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw sr.create("permission-blocked");return yield Uoe(n,null==e?void 0:e.vapidKey),yield Voe(n,null==e?void 0:e.serviceWorkerRegistration),xoe(n)}),yD.apply(this,arguments)}function Boe(n,e,t){return vD.apply(this,arguments)}function vD(){return vD=P(function*(n,e,t){const r=joe(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[s$],message_name:t[poe],message_time:t[goe],message_device_time:Math.floor(Date.now()/1e3)})}),vD.apply(this,arguments)}function joe(n){switch(n){case ll.NOTIFICATION_CLICKED:return"notification_open";case ll.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wD(){return wD=P(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===ll.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(h$(t)):n.onMessageHandler.next(h$(t)));const r=t.data;Poe(r)&&"1"===r[moe]&&(yield Boe(n,t.messageType,r))}),wD.apply(this,arguments)}const m$="@firebase/messaging";function y$(){return ED.apply(this,arguments)}function ED(){return(ED=P(function*(){try{yield th()}catch(n){return!1}return"undefined"!=typeof window&&va()&&sb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}Xn(new Fn("messaging",n=>{const e=new Loe(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(n,e){return wD.apply(this,arguments)}(e,t)),e},"PUBLIC")),Xn(new Fn("messaging-internal",n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function(n,e){return yD.apply(this,arguments)}(e,r)}},"PRIVATE")),Mt(m$,"0.9.16"),Mt(m$,"0.9.16","esm2017");const H_="analytics",Koe="firebase_id",Joe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",v$="https://www.googletagmanager.com/gtag/js",or=new Ea("@firebase/analytics");function w$(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Xoe(n,e){const t=document.createElement("script");t.src=`${v$}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function eae(n,e,t,r,i,s){return ID.apply(this,arguments)}function ID(){return ID=P(function*(n,e,t,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield w$(t)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){or.error(a)}n("config",i,s)}),ID.apply(this,arguments)}function tae(n,e,t,r,i){return TD.apply(this,arguments)}function TD(){return TD=P(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield w$(t);for(const u of o){const c=a.find(h=>h.measurementId===u),d=c&&e[c.appId];if(!d){s=[];break}s.push(d)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){or.error(s)}}),TD.apply(this,arguments)}function iae(){const n=window.document.getElementsByTagName("script");for(const e of Object.values(n))if(e.src&&e.src.includes(v$))return e;return null}const ui=new ds("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),E$=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function cae(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function lae(n){return DD.apply(this,arguments)}function DD(){return DD=P(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:cae(r)},s=Joe.replace("{app-id}",t),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message)}catch(u){}throw ui.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}),DD.apply(this,arguments)}function dae(n){return SD.apply(this,arguments)}function SD(){return SD=P(function*(n,e=E$,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ui.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ui.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pae;return setTimeout(P(function*(){a.abort()}),void 0!==t?t:6e4),b$({appId:r,apiKey:i,measurementId:s},o,a,e)}),SD.apply(this,arguments)}function b$(n,e,t){return xD.apply(this,arguments)}function xD(){return xD=P(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=E$){var s,o;const{appId:a,measurementId:u}=n;try{yield hae(r,e)}catch(c){if(u)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null===(s=c)||void 0===s?void 0:s.message}]`),{appId:a,measurementId:u};throw c}try{const c=yield lae(n);return i.deleteThrottleMetadata(a),c}catch(c){const d=c;if(!fae(d)){if(i.deleteThrottleMetadata(a),u)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${null==d?void 0:d.message}]`),{appId:a,measurementId:u};throw c}const h=503===Number(null===(o=null==d?void 0:d.customData)||void 0===o?void 0:o.httpStatus)?ub(t,i.intervalMillis,30):ub(t,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:t+1};return i.setThrottleMetadata(a,m),or.debug(`Calling attemptFetch again in ${h} millis`),b$(n,m,r,i)}}),xD.apply(this,arguments)}function hae(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ui.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function fae(n){if(!(n instanceof Ci&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class pae{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let AD,PD;function MD(){return MD=P(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}}),MD.apply(this,arguments)}function C$(n){PD=n}function I$(n){AD=n}function wae(){return FD.apply(this,arguments)}function FD(){return FD=P(function*(){var n;if(!va())return or.warn(ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield th()}catch(e){return or.warn(ui.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0}),FD.apply(this,arguments)}function LD(){return LD=P(function*(n,e,t,r,i,s,o){var a;const u=dae(n);u.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>or.error(y)),e.push(u);const c=wae().then(y=>{if(y)return r.getId()}),[d,h]=yield Promise.all([u,c]);iae()||Xoe(s,d.measurementId),PD&&(i("consent","default",PD),C$(void 0)),i("js",new Date);const m=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return m.origin="firebase",m.update=!0,null!=h&&(m[Koe]=h),i("config",d.measurementId,m),AD&&(i("set",AD),I$(void 0)),d.measurementId}),LD.apply(this,arguments)}class bae{constructor(e){this.app=e}_delete(){return delete eo[this.app.options.appId],Promise.resolve()}}let eo={},T$=[];const D$={};let x$,to,G_="dataLayer",VD=!1;function Iae(n,e,t){!function(){const n=[];if(vm()&&n.push("This is a browser extension environment."),sb()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ui.create("invalid-analytics-context",{errorInfo:e});or.warn(t.message)}}();const r=n.options.appId;if(!r)throw ui.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw ui.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=eo[r])throw ui.create("already-exists",{id:r});if(!VD){!function(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(G_);const{wrappedGtag:s,gtagCore:o}=function(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(n,e,t,r){function s(){return(s=P(function*(o,a,u){try{"event"===o?yield tae(n,e,t,a,u):"config"===o?yield eae(n,e,t,r,a,u):"consent"===o?n("consent","update",u):n("set",a)}catch(c){or.error(c)}})).apply(this,arguments)}return function(o,a,u){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(eo,T$,D$,G_,"gtag");to=s,x$=o,VD=!0}return eo[r]=function(n,e,t,r,i,s,o){return LD.apply(this,arguments)}(n,T$,D$,e,x$,G_,t),new bae(n)}function Dae(){return UD.apply(this,arguments)}function UD(){return(UD=P(function*(){if(vm()||!sb()||!va())return!1;try{return yield th()}catch(n){return!1}})).apply(this,arguments)}const A$="@firebase/analytics";Xn(new Fn(H_,(e,{options:t})=>Iae(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Xn(new Fn("analytics-internal",function(e){try{const t=e.getProvider(H_).getImmediate();return{logEvent:(r,i,s)=>function(n,e,t,r){n=Jn(n),function(n,e,t,r,i){return MD.apply(this,arguments)}(to,eo[n.app.options.appId],e,t,r).catch(i=>or.error(i))}(t,r,i,s)}}catch(t){throw ui.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Mt(A$,"0.8.0"),Mt(A$,"0.8.0","esm2017");const Rae=new class extends UL{}(class extends LL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):e.flush(this)}}),dl=new gc("7.4.1"),BD="__angularfire_symbol__analyticsIsSupportedValue",jD="__angularfire_symbol__analyticsIsSupported",$D="__angularfire_symbol__remoteConfigIsSupportedValue",HD="__angularfire_symbol__remoteConfigIsSupported",GD="__angularfire_symbol__messagingIsSupportedValue",WD="__angularfire_symbol__messagingIsSupported";function af(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[jD]||(globalThis[jD]=Dae().then(n=>globalThis[BD]=n).catch(()=>globalThis[BD]=!1)),globalThis[WD]||(globalThis[WD]=y$().then(n=>globalThis[GD]=n).catch(()=>globalThis[GD]=!1)),globalThis[HD]||(globalThis[HD]=loe().then(n=>globalThis[$D]=n).catch(()=>globalThis[$D]=!1));const uf=(n,e)=>{const t=e?[e]:y2(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function hl(){}class R${constructor(e,t=Rae){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class kae{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hl,{},hl,hl)),t.pipe(xr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cf=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new R$(Zone.current)),this.insideAngular=t.run(()=>new R$(Zone.current,QE)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(Pe(Lt))},n.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tu(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Nae(n){return tu().ngZone.runOutsideAngular(()=>n())}function nu(n){return tu().ngZone.run(()=>n())}function Oae(n){return tu(),function(n){return function(t){return(t=t.lift(new kae(n.ngZone))).pipe(Cu(n.outsideAngular),oa(n.insideAngular))}}(tu())(n)}const Fae=(n,e)=>{const t=void 0;return function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),nu(()=>n.apply(t,r))}},ru=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=nu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hl,{},hl,hl)))),r[s]=Fae(r[s],t));const i=Nae(()=>n.apply(this,r));if(!e){if(i instanceof G){const s=tu();return i.pipe(Cu(s.outsideAngular),oa(s.insideAngular))}return nu(()=>i)}return i instanceof G?i.pipe(Oae):i instanceof Promise?nu(()=>new Promise((s,o)=>i.then(a=>nu(()=>s(a)),a=>nu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:nu(()=>i)};class Wo{constructor(e){return e}}class lf{constructor(){return y2()}}const qD=new Ke("angularfire2._apps"),Vae={provide:Wo,useFactory:function(n){return n&&1===n.length?n[0]:new Wo(ih())},deps:[[new St,qD]]},Uae={provide:lf,deps:[[new St,qD]]};function Bae(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Wo(r)}}let jae=(()=>{class n{constructor(t){Mt("angularfire",dl.full,"core"),Mt("angularfire",dl.full,"app"),Mt("angular",BO.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(Pe(vo))},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[Vae,Uae]}),n})();function $ae(n,...e){return{ngModule:jae,providers:[{provide:qD,useFactory:Bae(n),multi:!0,deps:[Lt,Kt,cf,...e]}]}}const Hae=ru(oee,!0),k$=new Map,Gae={activated:!1,tokenObservers:[]},Wae={initialized:!1,enabled:!1};function Hn(n){return k$.get(n)||Gae}function zi(n,e){k$.set(n,e)}function W_(){return Wae}class Yae{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return P(function*(){t.stop();try{t.pending=new Tc,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tc,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Nr=new ds("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function O$(n){if(!Hn(n).activated)throw Nr.create("use-before-activation",{appName:n.name})}function YD(n,e){return JD.apply(this,arguments)}function JD(){return JD=P(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const y=yield o.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}const a={method:"POST",body:JSON.stringify(e),headers:s};let u,c;try{u=yield fetch(n,a)}catch(y){throw Nr.create("fetch-network-error",{originalErrorMessage:null===(r=y)||void 0===r?void 0:r.message})}if(200!==u.status)throw Nr.create("fetch-status-error",{httpStatus:u.status});try{c=yield u.json()}catch(y){throw Nr.create("fetch-parse-error",{originalErrorMessage:null===(i=y)||void 0===i?void 0:i.message})}const d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const h=1e3*Number(d[1]),m=Date.now();return{token:c.token,expireTimeMillis:m+h,issuedAtTimeMillis:m}}),JD.apply(this,arguments)}function tue(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const df="firebase-app-check-store";let K_=null;function F$(){return K_||(K_=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Nr.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(df,{keyPath:"compositeKey"})}}catch(r){e(Nr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),K_)}function XD(){return XD=P(function*(n,e){const r=(yield F$()).transaction(df,"readwrite"),s=r.objectStore(df).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Nr.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})}),XD.apply(this,arguments)}const hf=new Ea("@firebase/app-check");function B$(n,e){return va()?function(n,e){return function(n,e){return XD.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{hf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function j$(){return W_().enabled}function $$(){return nS.apply(this,arguments)}function nS(){return nS=P(function*(){const n=W_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),nS.apply(this,arguments)}const due={error:"UNKNOWN_ERROR"};function hue(n){return mm.encodeString(JSON.stringify(n),!1)}function Q_(n){return rS.apply(this,arguments)}function rS(){return rS=P(function*(n,e=!1){const t=n.app;O$(t);const r=Hn(t);let s,i=r.token;if(!i){const u=yield r.cachedTokenPromise;u&&Y_(u)&&(i=u)}if(!e&&i&&Y_(i))return{token:i.token};let a,o=!1;if(j$()){r.exchangeTokenPromise||(r.exchangeTokenPromise=YD(tue(t,yield $$()),n.heartbeatServiceProvider).then(c=>(r.exchangeTokenPromise=void 0,c)),o=!0);const u=yield r.exchangeTokenPromise;return yield B$(t,u),zi(t,Object.assign(Object.assign({},r),{token:u})),{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(u=>(r.exchangeTokenPromise=void 0,u)),o=!0),i=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?hf.warn(u.message):hf.error(u),s=u}return i?(a={token:i.token},zi(t,Object.assign(Object.assign({},r),{token:i})),yield B$(t,i)):a=pue(s),o&&G$(t,a),a}),rS.apply(this,arguments)}function sS(n,e){const t=Hn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),zi(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function H$(n){const{app:e}=n,t=Hn(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new Yae(P(function*(){let r;if(r=Hn(e).token?yield Q_(n,!0):yield Q_(n),r.error)throw r.error}),()=>!0,()=>{const t=Hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),zi(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function G$(n,e){const t=Hn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Y_(n){return n.expireTimeMillis-Date.now()>0}function pue(n){return{token:hue(due),error:n}}class gue{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Hn(this.app);for(const t of e)sS(this.app,t.next);return Promise.resolve()}}const X$="app-check-internal";Xn(new Fn("app-check",n=>function(n,e){return new gue(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(X$).initialize()})),Xn(new Fn(X$,n=>function(n){return{getToken:e=>Q_(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,s=Hn(i),o={next:t,error:r,type:e};if(zi(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&Y_(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),H$(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>H$(n))}(n,"INTERNAL",e),removeTokenListener:e=>sS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Mt("@firebase/app-check","0.5.12");class ff{constructor(){return uf("app-check")}}function tH(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}"undefined"!=typeof window&&window;const Fue=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},sH=new ds("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),oH=new Ea("@firebase/auth");function Z_(n,...e){oH.logLevel<=yt.ERROR&&oH.error(`Auth (9.9.3): ${n}`,...e)}function Hr(n,...e){throw dS(n,...e)}function _s(n,...e){return dS(n,...e)}function aH(n,e,t){const r=Object.assign(Object.assign({},Fue()),{[e]:t});return new ds("auth","Firebase",r).create(e,{appName:n.name})}function dS(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sH.create(n,...e)}function ve(n,e,...t){if(!n)throw dS(e,...t)}function ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Z_(e),new Error(e)}function zo(n,e){n||ys(e)}const uH=new Map;function no(n){zo(n instanceof Function,"Expected a class definition");let e=uH.get(n);return e?(zo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uH.set(n,e),e)}function pf(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function cH(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class gf{constructor(e,t){this.shortDelay=e,this.longDelay=t,zo(t>e,"Short delay should be less than long delay!"),this.isMobile=ym()||ib()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===cH()||"https:"===cH()||vm()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function fS(n,e){zo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class lH{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jue={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$ue=new gf(3e4,6e4);function Rn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Gn(n,e,t,r){return pS.apply(this,arguments)}function pS(){return pS=P(function*(n,e,t,r,i={}){return dH(n,i,P(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=rh(Object.assign({key:n.config.apiKey},o)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),lH.fetch()(hH(n,n.config.apiHost,t,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))}),pS.apply(this,arguments)}function dH(n,e,t){return gS.apply(this,arguments)}function gS(){return gS=P(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},jue),e);try{const i=new Hue(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw mf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw mf(n,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw mf(n,"email-already-in-use",o);if("USER_DISABLED"===u)throw mf(n,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw aH(n,d,c);Hr(n,d)}}catch(i){if(i instanceof Ci)throw i;Hr(n,"network-request-failed")}}),gS.apply(this,arguments)}function ro(n,e,t,r){return mS.apply(this,arguments)}function mS(){return mS=P(function*(n,e,t,r,i={}){const s=yield Gn(n,e,t,r,i);return"mfaPendingCredential"in s&&Hr(n,"multi-factor-auth-required",{_serverResponse:s}),s}),mS.apply(this,arguments)}function hH(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?fS(n.config,i):`${n.config.apiScheme}://${i}`}class Hue{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_s(this.auth,"network-request-failed")),$ue.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=_s(n,e,r);return i.customData._tokenResponse=t,i}function _S(){return _S=P(function*(n,e){return Gn(n,"POST","/v1/accounts:delete",e)}),_S.apply(this,arguments)}function zue(n,e){return vS.apply(this,arguments)}function vS(){return vS=P(function*(n,e){return Gn(n,"POST","/v1/accounts:lookup",e)}),vS.apply(this,arguments)}function _f(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function wS(){return wS=P(function*(n,e=!1){const t=Jn(n),r=yield t.getIdToken(e),i=ey(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_f(ES(i.auth_time)),issuedAtTime:_f(ES(i.iat)),expirationTime:_f(ES(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),wS.apply(this,arguments)}function ES(n){return 1e3*Number(n)}function ey(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return Z_("JWT malformed, contained fewer than 3 sections"),null;try{const s=rb(r);return s?JSON.parse(s):(Z_("Failed to decode base64 JWT payload"),null)}catch(s){return Z_("Caught error parsing JWT payload as JSON",null===(e=s)||void 0===e?void 0:e.toString()),null}}function io(n,e){return bS.apply(this,arguments)}function bS(){return bS=P(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof Ci&&Que(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),bS.apply(this,arguments)}function Que({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class Yue{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(P(function*(){yield t.iteration()}),r)}iteration(){var e=this;return P(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class fH{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_f(this.lastLoginAt),this.creationTime=_f(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yf(n){return CS.apply(this,arguments)}function CS(){return CS=P(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield io(n,zue(t,{idToken:r}));ve(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?Zue(s.providerUserInfo):[],a=Xue(n.providerData,o),d=!!n.isAnonymous&&!(n.email&&s.passwordHash||(null==a?void 0:a.length)),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fH(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,h)}),CS.apply(this,arguments)}function IS(){return IS=P(function*(n){const e=Jn(n);yield yf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),IS.apply(this,arguments)}function Xue(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Zue(n){return n.map(e=>{var{providerId:t}=e,r=tH(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function TS(){return TS=P(function*(n,e){const t=yield dH(n,{},P(function*(){const r=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=hH(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lH.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),TS.apply(this,arguments)}class vf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(void 0!==e.idToken,"internal-error"),ve(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(n){const e=ey(n);return ve(e,"internal-error"),ve(void 0!==e.exp,"internal-error"),ve(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return P(function*(){return ve(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return P(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function(n,e){return TS.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new vf;return r&&(ve("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(ve("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(ve("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vf,this.toJSON())}_performRefresh(){return ys("not implemented")}}function qo(n,e){ve("string"==typeof n||void 0===n,"internal-error",{appName:e})}class iu{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=tH(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yue(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fH(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return P(function*(){const r=yield io(t,t.stsTokenManager.getToken(t.auth,e));return ve(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function(n){return wS.apply(this,arguments)}(this,e)}reload(){return function(n){return IS.apply(this,arguments)}(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new iu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return P(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield yf(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return P(function*(){const t=yield e.getIdToken();return yield io(e,function(n,e){return _S.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,c,d;const h=null!==(r=t.displayName)&&void 0!==r?r:void 0,m=null!==(i=t.email)&&void 0!==i?i:void 0,y=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,T=null!==(o=t.photoURL)&&void 0!==o?o:void 0,N=null!==(a=t.tenantId)&&void 0!==a?a:void 0,U=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,K=null!==(c=t.createdAt)&&void 0!==c?c:void 0,$=null!==(d=t.lastLoginAt)&&void 0!==d?d:void 0,{uid:ae,emailVerified:pe,isAnonymous:xe,providerData:ze,stsTokenManager:kt}=t;ve(ae&&kt,e,"internal-error");const Ji=vf.fromJSON(this.name,kt);ve("string"==typeof ae,e,"internal-error"),qo(h,e.name),qo(m,e.name),ve("boolean"==typeof pe,e,"internal-error"),ve("boolean"==typeof xe,e,"internal-error"),qo(y,e.name),qo(T,e.name),qo(N,e.name),qo(U,e.name),qo(K,e.name),qo($,e.name);const Eu=new iu({uid:ae,auth:e,email:m,emailVerified:pe,displayName:h,isAnonymous:xe,photoURL:T,phoneNumber:y,tenantId:N,stsTokenManager:Ji,createdAt:K,lastLoginAt:$});return ze&&Array.isArray(ze)&&(Eu.providerData=ze.map(up=>Object.assign({},up))),U&&(Eu._redirectEventId=U),Eu}static _fromIdTokenResponse(e,t,r=!1){return P(function*(){const i=new vf;i.updateFromServerResponse(t);const s=new iu({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yf(s),s})()}}const pH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return P(function*(){return!0})()}_set(t,r){var i=this;return P(function*(){i.storage[t]=r})()}_get(t){var r=this;return P(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return P(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function ty(n,e,t){return`firebase:${n}:${e}:${t}`}class pl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ty(this.userKey,i.apiKey,s),this.fullPersistenceKey=ty("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return P(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?iu._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return P(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return P(function*(){if(!t.length)return new pl(no(pH),e,r);const i=(yield Promise.all(t.map(function(){var c=P(function*(d){if(yield d._isAvailable())return d});return function(d){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||no(pH);const o=ty(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=yield c._get(o);if(d){const h=iu._fromJSON(e,d);c!==s&&(a=h),s=c;break}}catch(d){}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var c=P(function*(d){if(d!==s)try{yield d._remove(o)}catch(h){}});return function(d){return c.apply(this,arguments)}}())),new pl(s,e,r)):new pl(s,e,r)})()}}function gH(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wH(e))return"Blackberry";if(EH(e))return"Webos";if(DS(e))return"Safari";if((e.includes("chrome/")||_H(e))&&!e.includes("edge/"))return"Chrome";if(vH(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function mH(n=Pn()){return/firefox\//i.test(n)}function DS(n=Pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _H(n=Pn()){return/crios\//i.test(n)}function yH(n=Pn()){return/iemobile/i.test(n)}function vH(n=Pn()){return/android/i.test(n)}function wH(n=Pn()){return/blackberry/i.test(n)}function EH(n=Pn()){return/webos/i.test(n)}function ny(n=Pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bH(n=Pn()){return ny(n)||vH(n)||EH(n)||wH(n)||/windows phone/i.test(n)||yH(n)}function CH(n,e=[]){let t;switch(n){case"Browser":t=gH(Pn());break;case"Worker":t=`${gH(Pn())}-${n}`;break;default:t=n}return`${t}/JsCore/9.9.3/${e.length?e.join(","):"FirebaseCore-web"}`}class ice{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return P(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const s of t.queue)yield s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=s)||void 0===r?void 0:r.message})}})()}}class sce{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IH(this),this.idTokenSubscription=new IH(this),this.beforeStateQueue=new ice(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sH,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=no(t)),this._initializationPromise=this.queue(P(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield pl.create(r,e),!r._deleted)){if(null===(i=r._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(o){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return P(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return P(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=null==s?void 0:s._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===u)&&(null==c?void 0:c.user)&&(s=c.user,o=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield t.beforeStateQueue.runMiddleware(s)}catch(a){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return ve(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return P(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return P(function*(){var r;try{yield yf(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return P(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return P(function*(){const r=e?Jn(e):null;return r&&ve(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return P(function*(){if(!r._deleted)return e&&ve(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(P(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return P(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(P(function*(){yield t.assertedPersistence.setPersistence(no(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ds("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return P(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return P(function*(){if(!t.redirectPersistenceManager){const r=e&&no(e)||t._popupRedirectResolver;ve(r,t,"argument-error"),t.redirectPersistenceManager=yield pl.create(t,[no(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return P(function*(){var r,i;return t._isInitialized&&(yield t.queue(P(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return P(function*(){if(e===t.currentUser)return t.queue(P(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ve(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return P(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return P(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Gr(n){return Jn(n)}class IH{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(n,e){const t=new iZ(n,void 0);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function so(n,e){return US.apply(this,arguments)}function US(){return US=P(function*(n,e){return ro(n,"POST","/v1/accounts:signInWithIdp",Rn(n,e))}),US.apply(this,arguments)}class Ko{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Tce extends Ko{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return P(function*(){const s=yield iu._fromIdTokenResponse(e,r,i),o=RH(r);return new Ii({user:s,providerId:o,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return P(function*(){yield e._updateTokensIfNecessary(r,!0);const i=RH(r);return new Ii({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function RH(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class oy extends Ci{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,oy.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new oy(e,t,r,i)}}function kH(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?oy._fromErrorAndOperation(n,s,e,r):s})}function KS(n,e){return QS.apply(this,arguments)}function QS(){return QS=P(function*(n,e,t=!1){const r=yield io(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ii._forOperation(n,"link",r)}),QS.apply(this,arguments)}function JS(){return JS=P(function*(n,e,t=!1){var r;const{auth:i}=n,s="reauthenticate";try{const o=yield io(n,kH(i,s,e,n),t);ve(o.idToken,i,"internal-error");const a=ey(o.idToken);ve(a,i,"internal-error");const{sub:u}=a;return ve(n.uid===u,i,"user-mismatch"),Ii._forOperation(n,s,o)}catch(o){throw"auth/user-not-found"===(null===(r=o)||void 0===r?void 0:r.code)&&Hr(i,"user-mismatch"),o}}),JS.apply(this,arguments)}function XS(){return XS=P(function*(n,e,t=!1){const r="signIn",i=yield kH(n,r,e),s=yield Ii._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),XS.apply(this,arguments)}new WeakMap;const cy="__sak";class LH{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cy,"1"),this.storage.removeItem(cy),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wce=(()=>{class n extends LH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const n=Pn();return DS(n)||ny(n)}()&&function(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=bH(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);c2()&&10===document.documentMode&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,10):s()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return P(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return P(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return P(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),VH=(()=>{class n extends LH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let qce=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return P(function*(){const i=t,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!(null==u?void 0:u.size))return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(u).map(function(){var h=P(function*(m){return m(i.origin,a)});return function(m){return h.apply(this,arguments)}}()),d=yield function(n){return Promise.all(n.map(function(){var e=P(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:d})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Sx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class Kce{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return P(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const d=Sx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(y.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:d,data:t},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function kn(){return window}function xx(){return void 0!==kn().WorkerGlobalScope&&"function"==typeof kn().importScripts}function Ax(){return(Ax=P(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const UH="firebaseLocalStorageDb",ly="firebaseLocalStorage",BH="fbase_key";class Cf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dy(n,e){return n.transaction([ly],e?"readwrite":"readonly").objectStore(ly)}function Mx(){const n=indexedDB.open(UH,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ly,{keyPath:BH})}catch(i){t(i)}}),n.addEventListener("success",P(function*(){const r=n.result;r.objectStoreNames.contains(ly)?e(r):(r.close(),yield function(){const n=indexedDB.deleteDatabase(UH);return new Cf(n).toPromise()}(),e(yield Mx()))}))})}function jH(n,e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=P(function*(n,e,t){const r=dy(n,!0).put({[BH]:e,value:t});return new Cf(r).toPromise()}),Rx.apply(this,arguments)}function kx(){return kx=P(function*(n,e){const t=dy(n,!1).get(e),r=yield new Cf(t).toPromise();return void 0===r?null:r.value}),kx.apply(this,arguments)}function $H(n,e){const t=dy(n,!0).delete(e);return new Cf(t).toPromise()}const ile=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return P(function*(){return t.db||(t.db=yield Mx()),t.db})()}_withRetries(t){var r=this;return P(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return P(function*(){return xx()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return P(function*(){t.receiver=qce._getInstance(xx()?self:null),t.receiver._subscribe("keyChanged",function(){var r=P(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=P(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return P(function*(){var r,i;if(t.activeServiceWorker=yield function(){return Ax.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Kce(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return P(function*(){if(r.sender&&r.activeServiceWorker&&function(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return P(function*(){try{if(!indexedDB)return!1;const t=yield Mx();return yield jH(t,cy,"1"),yield $H(t,cy),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return P(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return P(function*(){return i._withPendingWrite(P(function*(){return yield i._withRetries(s=>jH(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return P(function*(){const i=yield r._withRetries(s=>function(n,e){return kx.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return P(function*(){return r._withPendingWrite(P(function*(){return yield r._withRetries(i=>$H(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return P(function*(){const r=yield t._withRetries(o=>{const a=dy(o,!1).getAll();return new Cf(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(t.localCache[o])!==JSON.stringify(a)&&(t.notifyListeners(o,a),i.push(o));for(const o of Object.keys(t.localCache))t.localCache[o]&&!s.has(o)&&(t.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(P(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function GH(n){return`__${n}${Math.floor(1e6*Math.random())}`}function ou(n,e){return e?no(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}GH("rcb"),new gf(3e4,6e4);class $x extends class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,t){return so(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ele(n){return function(n,e){return XS.apply(this,arguments)}(n.auth,new $x(n),n.bypassAuthState)}function ble(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),function(n,e){return JS.apply(this,arguments)}(t,new $x(n),n.bypassAuthState)}function Cle(n){return Hx.apply(this,arguments)}function Hx(){return Hx=P(function*(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),KS(t,new $x(n),n.bypassAuthState)}),Hx.apply(this,arguments)}new gf(2e3,1e4);const If=new Map;class Dle extends class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=P(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return P(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(c))}catch(d){t.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ele;case"linkViaPopup":case"linkViaRedirect":return Cle;case"reauthViaPopup":case"reauthViaRedirect":return ble;default:Hr(this.auth,"internal-error")}}resolve(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return P(function*(){let r=If.get(t.auth._key());if(!r){try{const s=(yield function(n,e){return Kx.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}If.set(t.auth._key(),r)}return t.bypassAuthState||If.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return P(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return P(function*(){})()}cleanUp(){}}function Kx(){return Kx=P(function*(n,e){const t=qH(e),r=zH(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),Kx.apply(this,arguments)}function xle(n,e){If.set(n._key(),e)}function zH(n){return no(n._redirectPersistence)}function qH(n){return ty("pendingRedirect",n.config.apiKey,n.name)}function KH(n,e){return tA.apply(this,arguments)}function tA(){return tA=P(function*(n,e,t=!1){const r=Gr(n),i=ou(r,e),o=yield new Dle(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o}),tA.apply(this,arguments)}class Nle{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JH(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!JH(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(_s(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(YH(e))}saveEventToCache(e){this.cachedEventUids.add(YH(e)),this.lastProcessedEventTime=Date.now()}}function YH(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JH({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function Ple(n){return rA.apply(this,arguments)}function rA(){return rA=P(function*(n,e={}){return Gn(n,"GET","/v1/projects",e)}),rA.apply(this,arguments)}const Fle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lle=/^https?/;function iA(){return iA=P(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield Ple(n);for(const t of e)try{if(Ule(t))return}catch(r){}Hr(n,"unauthorized-domain")}),iA.apply(this,arguments)}function Ule(n){const e=pf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return""===o.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&o.hostname===r}if(!Lle.test(t))return!1;if(Fle.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ble=new gf(3e4,6e4);function XH(){const n=kn().___jsl;if(null==n?void 0:n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let fy=null;function $le(n){return fy=fy||function(n){return new Promise((e,t)=>{var r,i,s;function o(){XH(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XH(),t(_s(n,"network-request-failed"))},timeout:Ble.get()})}if(null===(i=null===(r=kn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=kn().gapi)||void 0===s?void 0:s.load)){const a=GH("iframefcb");return kn()[a]=()=>{gapi.load?o():t(_s(n,"network-request-failed"))},function(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=_s("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>t(u))}o()}}).catch(e=>{throw fy=null,e})}(n),fy}const Hle=new gf(5e3,15e3),zle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kle(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fS(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Ia},i=qle.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${rh(r).slice(1)}`}function sA(){return sA=P(function*(n){const e=yield $le(n),t=kn().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:Kle(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zle,dontclear:!0},r=>new Promise(function(){var i=P(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=_s(n,"network-request-failed"),u=kn().setTimeout(()=>{o(a)},Hle.get());function c(){kn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),sA.apply(this,arguments)}const Yle={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ZH{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function e3(n,e,t,r,i,s){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ia,eventId:i};if(e instanceof Ko){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ob(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(s||{}))o[u]=c}if(e instanceof Tce){const u=e.getScopes().filter(c=>""!==c);u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];return`${function({config:n}){return n.emulator?fS(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${rh(a).slice(1)}`}const oA="webStorageSupport",ade=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VH,this._completeRedirectFn=KH,this._overrideRedirectResult=xle}_openPopup(e,t,r,i){var s=this;return P(function*(){var o;zo(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=e3(e,t,r,pf(),i);return function(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Yle),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Pn().toLowerCase();t&&(a=_H(c)?"_blank":t),mH(c)&&(e=e||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(function(n=Pn()){var e;return ny(n)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new ZH(null);const h=window.open(e||"",a,d);ve(h,n,"popup-blocked");try{h.focus()}catch(m){}return new ZH(h)}(e,a,Sx())})()}_openRedirect(e,t,r,i){var s=this;return P(function*(){return yield s._originValidation(e),function(n){kn().location.href=n}(e3(e,t,r,pf(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(zo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return P(function*(){const r=yield function(n){return sA.apply(this,arguments)}(e),i=new Nle(e);return r.register("authEvent",s=>(ve(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(oA,{type:oA},i=>{var s;const o=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[oA];void 0!==o&&t(!!o),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(n){return iA.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bH()||DS()||ny()}};var n3="@firebase/auth";class ude{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return P(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dde(n=ih()){const e=So(n,"auth");return e.isInitialized()?e.getImmediate():function(n,e){const t=So(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(bm(t.getOptions(),null!=e?e:{}))return i;Hr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:ade,persistence:[ile,Wce,VH]})}!function(n){Xn(new Fn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{ve(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),ve(!(null==o?void 0:o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CH(n)},d=new sce(a,u,c);return function(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(no);(null==e?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(d,t),d})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xn(new Fn("auth-internal",e=>{const t=Gr(e.getProvider("auth").getImmediate());return new ude(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(n3,"0.20.5",void 0),Mt(n3,"0.20.5","esm2017")}("Browser");class aA{constructor(e){return e}}class py{constructor(){return uf("auth")}}const uA=new Ke("angularfire2.auth-instances");function fde(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new aA(r)}}const pde={provide:py,deps:[[new St,uA]]},gde={provide:aA,useFactory:function(n,e){const t=af("auth",n,e);return t&&new aA(t)},deps:[[new St,uA],Wo]};let mde=(()=>{class n{constructor(){Mt("angularfire",dl.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[gde,pde]}),n})();function _de(n,...e){return{ngModule:mde,providers:[{provide:uA,useFactory:fde(n),multi:!0,deps:[Lt,Kt,cf,lf,[new St,ff],...e]}]}}const yde=ru(dde,!0);var vde={includeMetadataChanges:!1};function cA(n,e){return void 0===e&&(e=vde),new G(function(t){var r=function(n,...e){var t,r,i;n=Jn(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||rT(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(rT(e[o])){const h=e[o];e[o]=null===(t=h.next)||void 0===t?void 0:t.bind(h),e[o+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[o+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let u,c,d;if(n instanceof gn)c=bt(n.firestore,zt),d=Vc(n._key.path),u={next:h=>{e[o]&&e[o](function(n,e,t){const r=t.docs.get(e._key),i=new Ya(n);return new ol(n,i,e._key,r,new Qa(t.hasPendingWrites,t.fromCache),e.converter)}(c,n,h))},error:e[o+1],complete:e[o+2]};else{const h=bt(n,yr);c=bt(h.firestore,zt),d=h._query;const m=new Ya(c);u={next:y=>{e[o]&&e[o](new al(c,m,h,y))},error:e[o+1],complete:e[o+2]},function(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query)}return function(h,m,y,T){const N=new A_(T),U=new bI(m,N,y);return h.asyncQueue.enqueueAndForget(P(function*(){return function(n,e){return yI.apply(this,arguments)}(yield rl(h),U)})),()=>{N.Tc(),h.asyncQueue.enqueueAndForget(P(function*(){return function(n,e){return wI.apply(this,arguments)}(yield rl(h),U)}))}}(Mn(c),d,a,u)}(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ede(n,e){return void 0===e&&(e={}),function(n){return cA(n,{includeMetadataChanges:!0})}(n).pipe(ke(function(t){return s3(t,e)}))}function s3(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}function Sde(n,e){return void 0===e&&(e={}),function(n){return cA(n,{includeMetadataChanges:!0}).pipe(ke(function(e){return e.docs}))}(n).pipe(ke(function(t){return t.map(function(r){return s3(r,e)})}))}class gy{constructor(e){return e}}const c3="firestore",hA=new Ke("angularfire2.firestore-instances");function Mde(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new gy(r)}}const Rde={provide:class{constructor(){return uf(c3)}},deps:[[new St,hA]]},kde={provide:gy,useFactory:function(n,e){const t=af(c3,n,e);return t&&new gy(t)},deps:[[new St,hA],Wo]};let Nde=(()=>{class n{constructor(){Mt("angularfire",dl.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[kde,Rde]}),n})();function Ode(n,...e){return{ngModule:Nde,providers:[{provide:hA,useFactory:Mde(n),multi:!0,deps:[Lt,Kt,cf,lf,[new St,py],[new St,ff],...e]}]}}const Pde=ru(Sde,!0),Fde=ru(Ede,!0),Lde=ru(Rie,!0);let Vde=(()=>{class n{constructor(t){this.firestore=t,this.pokemonCollection=function(n,e,...t){if(n=Jn(n),nT("collection","path",e),n instanceof nf){const r=wt.fromString(e,...t);return fj(r),new ms(n,null,r)}{if(!(n instanceof gn||n instanceof ms))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wt.fromString(e,...t));return fj(r),new ms(n.firestore,null,r)}}(this.firestore,"produse")}log(){console.log(this.pokemonCollection)}getAll(){return Pde(this.pokemonCollection,{idField:"ean"})}get(t){const r=N_(this.firestore,`produse/${t}`);return Fde(r,{idField:"ean"})}create(t){return function(n,e){const t=bt(n.firestore,zt),r=N_(n),i=function(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return sf(t,[oT(sl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}(this.pokemonCollection,t)}update(t){return function(n,e,t,...r){n=bt(n,gn);const i=bt(n.firestore,zt),s=sl(i);let o;return o="string"==typeof(e=Jn(e))||e instanceof il?function(n,e,t,r,i,s){const o=n.aa(1,e,t),a=[cT(e,r,t)],u=[i];if(s.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(cT(e,s[m])),u.push(s[m+1]);const c=[],d=rr.empty();for(let m=a.length-1;m>=0;--m)if(!Sj(c,a[m])){const y=a[m];let T=u[m];T=Jn(T);const N=o.ia(y);if(T instanceof rf)c.push(y);else{const U=Ka(T,N);null!=U&&(c.push(y),d.set(y,U))}}const h=new ai(c);return new vj(d,h,o.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function(n,e,t,r){const i=n.aa(1,e,t);uT("Data must be an object, but it was:",i,r);const s=[],o=rr.empty();ka(r,(u,c)=>{const d=P_(e,u,t);c=Jn(c);const h=i.ia(d);if(c instanceof rf)s.push(d);else{const m=Ka(c,h);null!=m&&(s.push(d),o.set(d,m))}});const a=new ai(s);return new vj(o,a,i.fieldTransforms)}(s,"updateDoc",n._key,e),sf(i,[o.toMutation(n._key,Jt.exists(!0))])}(N_(this.firestore,`pokemon/${t.id}`),Object.assign({},t))}delete(t){return function(n){return sf(bt(n.firestore,zt),[new Hc(n._key,Jt.none())])}(N_(this.firestore,`produse/${t}`))}}return n.\u0275fac=function(t){return new(t||n)(Pe(gy))},n.\u0275prov=D({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ude(n,e){if(1&n&&(ln(0,"div",1),Dd(1,"img",2),ln(2,"div",3),wi(3),dn(),ln(4,"div",4),wi(5),dn(),dn()),2&n){const t=vg();yi(1),Li("src",t.article.image,og)("alt",t.article.name),yi(2),bg(t.article.name),yi(2),bg(t.count)}}let Bde=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Su({type:n,selectors:[["app-shopping-cart-item"]],inputs:{article:"article",count:"count"},decls:1,vars:1,consts:[["class","shopping-cart-item",4,"ngIf"],[1,"shopping-cart-item"],[1,"article-image",3,"src","alt"],[1,"article-name"],[1,"article-count"]],template:function(t,r){1&t&&yo(0,Ude,6,4,"div",0),2&t&&Li("ngIf",void 0!==r.article)},directives:[fE],styles:[".shopping-cart-item[_ngcontent-%COMP%]{padding:16px;vertical-align:center;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:#aaa;display:flex;flex-direction:row;align-items:center}.article-image[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover}.article-name[_ngcontent-%COMP%]{margin-left:8px;font-size:1.4em}.article-count[_ngcontent-%COMP%]{margin-left:auto;font-size:1.4em;text-align:right}"]}),n})();function jde(n,e){if(1&n&&(ln(0,"div",11),wi(1),dn()),2&n){const t=vg();yi(1),Ad(" ",t.errorMessage,"\n")}}function $de(n,e){if(1&n&&(ln(0,"li"),wi(1),dn()),2&n){const t=e.$implicit;yi(1),Cg("",t.name,", pre\u021b: ",t.price,"")}}function Hde(n,e){if(1&n&&(ln(0,"li"),wi(1),dn()),2&n){const t=e.$implicit;yi(1),Cg(" ",t.name,", Cod bare: ",t.ean,"")}}function Gde(n,e){1&n&&(ln(0,"span"),wi(1,"Lista e goal\u0103"),dn())}function Wde(n,e){if(1&n&&Dd(0,"app-shopping-cart-item",14),2&n){const t=e.$implicit;Li("article",t[0])("count",t[1])}}function zde(n,e){if(1&n&&(yo(0,Wde,1,2,"app-shopping-cart-item",12),ln(1,"div",13),wi(2),dn()),2&n){const t=vg();Li("ngForOf",t.items),yi(2),Ad(" Total: ",t.totalPrice," USD ")}}let qde=(()=>{class n{constructor(t,r,i,s){this.changeDetectorRef=t,this.beepService=r,this.updateService=i,this.pokedexService=s,this.acceptAnyCode=!0,this.items=[],this.totalPrice=0,this.catalogue=[{name:"Classy Crab (red)",ean:"7601234567890",image:"assets/classy_crab_red.png",price:10},{name:"Classy Crab (blue)",ean:"7601234561232",image:"assets/classy_crab_blue.png",price:10},{name:"Classy Crab (gold, ltd. ed.)",ean:"7601234564561",image:"assets/classy_crab_gold.png",price:50},{name:"Cafea",ean:"8000070038028",image:"https://www.lavazza.ro/ro/cafea/macinata/qualita-rossa.html",price:50}],this.catalogue2=[],this.shoppingCart=new WL}ngAfterViewInit(){navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(this.initializeScanner(),setTimeout(()=>{this.updateService.checkForUpdates()},1e4),this.logheaza(),this.getDocs(),this.pokemon$=this.pokedexService.getAll()):this.errorMessage="getUserMedia is not supported"}getDocs(){this.beepService.getDocs().subscribe(t=>{this.catalogue2=t,console.log("mongo Crabs=>",this.catalogue2)})}logheaza(){console.log("WORKS"),console.log(this.pokemon$)}initializeScanner(){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?pm().CameraAccess.enumerateVideoDevices().then(t=>{const r=function(n){const t=n.filter(r=>function(n){const e=n.toLowerCase();return DX.some(t=>e.includes(t))}(r.label)).sort((r,i)=>r.label.localeCompare(i.label));return t.length>0?t[0]:void 0}(t);return r?(console.log(`Using ${r.label} (${r.deviceId}) as initial camera`),this.initializeScannerWithDevice(r.deviceId)):(console.error("Unable to determine suitable camera, will fall back to default handling"),this.initializeScannerWithDevice(void 0))}).catch(t=>{this.errorMessage=`Failed to enumerate devices: ${t}`,this.started=!1}):(this.errorMessage="getUserMedia is not supported. Please use Chrome on Android or Safari on iOS",this.started=!1,Promise.reject(this.errorMessage))}initializeScannerWithDevice(t){var r;console.log("Initializing Quagga scanner...");const i={};return t?i.deviceId=t:i.facingMode="environment",pm().init({inputStream:{type:"LiveStream",constraints:i,area:{top:"25%",right:"10%",left:"10%",bottom:"25%"},target:null!==(r=document.querySelector("#scanner-container"))&&void 0!==r?r:void 0},decoder:{readers:["ean_reader"],multiple:!1},locate:!1},s=>{s?(console.error(`Quagga initialization failed: ${s}`),this.errorMessage=`Initialization error: ${s}`,this.started=!1):(console.log("Quagga initialization succeeded"),pm().start(),this.started=!0,this.changeDetectorRef.detectChanges(),pm().onDetected(o=>{o.codeResult.code&&this.onBarcodeScanned(o.codeResult.code)}))})}onBarcodeScanned(t){const r=(new Date).getTime();if(t===this.lastScannedCode&&void 0!==this.lastScannedCodeDate&&r<this.lastScannedCodeDate+3500)return;let i=this.catalogue.find(s=>s.ean===t);if(!i){if(!this.acceptAnyCode)return;i=this.createUnknownArticle(t)}this.shoppingCart.addArticle(i),this.items=this.shoppingCart.contents,this.totalPrice=this.shoppingCart.totalPrice,this.lastScannedCode=t,this.lastScannedCodeDate=r,this.beepService.beep(),this.changeDetectorRef.detectChanges()}clearCart(){this.shoppingCart.clear(),this.items=this.shoppingCart.contents}createUnknownArticle(t){function r(i){let s=0,o=1;for(let a=i.length-2;a>=0;a--)s+=parseInt(i.charAt(a))*(1+o%2*2),o++;return(10-s%10)%10}return r(t),alert(r(t)),{ean:t,name:`Codul: ${t}`,image:"assets/classy_crab_unknown.png",price:0}}}return n.\u0275fac=function(t){return new(t||n)(le(Pg),le(HX),le(GX),le(Vde))},n.\u0275cmp=Su({type:n,selectors:[["app-root"]],decls:20,vars:6,consts:[["class","error-message",4,"ngIf"],["id","scanner-container"],[1,"instructions"],[4,"ngFor","ngForOf"],[1,"controls"],["id","acceptAnyCode","type","checkbox","name","acceptAnyCode","required","",3,"ngModel","ngModelChange"],["for","acceptAnyCode"],[3,"click"],[1,"shopping-cart"],[4,"ngIf","ngIfElse"],["shoppingCartItems",""],[1,"error-message"],[3,"article","count",4,"ngFor","ngForOf"],[1,"shopping-cart-total"],[3,"article","count"]],template:function(t,r){if(1&t&&(yo(0,jde,2,1,"div",0),Dd(1,"div",1),ln(2,"div",2),ln(3,"ul"),yo(4,$de,2,2,"li",3),dn(),dn(),ln(5,"div",4),ln(6,"form"),ln(7,"input",5),Ir("ngModelChange",function(s){return r.acceptAnyCode=s}),dn(),ln(8,"label",6),wi(9,"Accept\u0103 \u0219i coduri ne\xeenregistrate \xeen sistem"),dn(),wi(10," \xa0 "),ln(11,"button",7),Ir("click",function(){return r.clearCart()}),wi(12,"\u0218terge selec\u021bii"),dn(),dn(),dn(),ln(13,"div",8),ln(14,"ul"),ln(15,"small"),yo(16,Hde,2,2,"li",3),dn(),dn(),yo(17,Gde,2,0,"span",9),yo(18,zde,3,2,"ng-template",null,10,oP),dn()),2&t){const i=function(n){return function(n,e){return n[e]}(Xe.lFrame.contextLView,20+n)}(19);Li("ngIf",r.errorMessage),yi(4),Li("ngForOf",r.catalogue2),yi(3),Li("ngModel",r.acceptAnyCode),yi(9),Li("ngForOf",r.catalogue2),yi(1),Li("ngIf",0===r.items.length)("ngIfElse",i)}},directives:[fE,lF,fL,iL,am,KE,DE,rL,jE,Bde],styles:[".error-message[_ngcontent-%COMP%]{background-color:#000;text-align:center;color:red;padding:8px}#scanner-container[_ngcontent-%COMP%]{height:300px;position:relative}#scanner-container[_ngcontent-%COMP%]  canvas{visibility:hidden;position:absolute;left:0;top:0}#scanner-container[_ngcontent-%COMP%]  video{width:100%;height:300px;object-fit:cover}.controls[_ngcontent-%COMP%]{padding-top:8px;padding-left:16px;padding-right:16px}.shopping-cart[_ngcontent-%COMP%]{padding:16px}.instructions[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;padding-top:16px;font-size:.6em;z-index:100}.shopping-cart-total[_ngcontent-%COMP%]{margin-top:16px;font-size:1.6em;font-weight:700;text-align:right}"]}),n})();class qi extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function l3(n,e,t){n?qr(t,n,e):e()}const my=f(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Jde(n,e,t,r,i){return(s,o)=>{let a=t,u=e,c=0;s.subscribe(new je(o,d=>{const h=c++;u=a?n(u,d,h):(a=!0,d),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function d3(n,e){return Ae(Jde(n,e,arguments.length>=2,!0))}function fA(n){return n<=0?()=>xi:Ae((e,t)=>{let r=[];e.subscribe(new je(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function h3(n=Xde){return Ae((e,t)=>{let r=!1;e.subscribe(new je(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Xde(){return new my}function f3(n){return Ae((e,t)=>{let r=!1;e.subscribe(new je(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function gl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):fe,Kn(1),t?f3(e):h3(()=>new my))}class oo{constructor(e,t){this.id=e,this.url=t}}class pA extends oo{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tf extends oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class p3 extends oo{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class the extends oo{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nhe extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rhe extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ihe extends oo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class she extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ohe extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g3{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class m3{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ahe{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uhe{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class che{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lhe{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _3{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const dt="primary";class dhe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ml(n){return new dhe(n)}const y3="ngNavigationCancelingError";function gA(n){const e=Error("NavigationCancelingError: "+n);return e[y3]=!0,e}function fhe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!v3(n[i],e[i]))return!1;return!0}function v3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function w3(n){return Array.prototype.concat.apply([],n)}function E3(n){return n.length>0?n[n.length-1]:null}function ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ws(n){return m0(n)?n:Sd(n)?en(Promise.resolve(n)):Ze(n)}const mhe={exact:function I3(n,e,t){if(!uu(n.segments,e.segments)||!_y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I3(n.children[r],e.children[r],t))return!1;return!0},subset:T3},b3={exact:function(n,e){return vs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>v3(n[t],e[t]))},ignored:()=>!0};function C3(n,e,t){return mhe[t.paths](n.root,e.root,t.matrixParams)&&b3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T3(n,e,t){return D3(n,e,e.segments,t)}function D3(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!uu(i,t)||e.hasChildren()||!_y(i,t,r))}if(n.segments.length===t.length){if(!uu(n.segments,t)||!_y(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T3(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(uu(n.segments,i)&&_y(n.segments,i,r)&&n.children[dt])&&D3(n.children[dt],e,s,r)}}function _y(n,e,t){return e.every((r,i)=>b3[t](n[i].parameters,r.parameters))}class au{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ml(this.queryParams)),this._queryParamMap}toString(){return Ehe.serialize(this)}}class _t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yy(this)}}class Df{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ml(this.parameters)),this._parameterMap}toString(){return R3(this)}}function uu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class S3{}class x3{parse(e){const t=new Mhe(e);return new au(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sf(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${vy(t)}=${vy(i)}`).join("&"):`${vy(t)}=${vy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const Ehe=new x3;function yy(n){return n.segments.map(e=>R3(e)).join("/")}function Sf(n,e){if(!n.hasChildren())return yy(n);if(e){const t=n.children[dt]?Sf(n.children[dt],!1):"",r=[];return ar(n.children,(i,s)=>{s!==dt&&r.push(`${s}:${Sf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return ar(n.children,(r,i)=>{i===dt&&(t=t.concat(e(r,i)))}),ar(n.children,(r,i)=>{i!==dt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===dt?[Sf(n.children[dt],!1)]:[`${i}:${Sf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[dt]?`${yy(n)}/${t[0]}`:`${yy(n)}/(${t.join("//")})`}}function A3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vy(n){return A3(n).replace(/%3B/gi,";")}function mA(n){return A3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wy(n){return decodeURIComponent(n)}function M3(n){return wy(n.replace(/\+/g,"%20"))}function R3(n){return`${mA(n.path)}${function(n){return Object.keys(n).map(e=>`;${mA(e)}=${mA(n[e])}`).join("")}(n.parameters)}`}const The=/^[^\/()?;=#]+/;function Ey(n){const e=n.match(The);return e?e[0]:""}const Dhe=/^[^=?&#]+/,xhe=/^[^&#]+/;class Mhe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[dt]=new _t(e,t)),r}parseSegment(){const e=Ey(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Df(wy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ey(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ey(this.remaining);i&&(r=i,this.capture(r))}e[wy(t)]=wy(r)}parseQueryParam(e){const t=function(n){const e=n.match(Dhe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function(n){const e=n.match(xhe);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=M3(t),s=M3(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ey(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=dt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[dt]:new _t([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class k3{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_A(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_A(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yA(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yA(e,this._root).map(t=>t.value)}}function _A(n,e){if(n===e.value)return e;for(const t of e.children){const r=_A(n,t);if(r)return r}return null}function yA(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yA(n,t);if(r.length)return r.unshift(e),r}return[]}class ao{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _l(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class N3 extends k3{constructor(e,t){super(e),this.snapshot=t,vA(this,e)}toString(){return this.snapshot.toString()}}function O3(n,e){const t=function(n,e){const o=new by([],{},{},"",{},dt,e,null,n.root,-1,{});return new F3("",new ao(o,[]))}(n,e),r=new qi([new Df("",{})]),i=new qi({}),s=new qi({}),o=new qi({}),a=new qi(""),u=new yl(r,i,o,a,s,dt,e,t.root);return u.snapshot=t.root,new N3(new ao(u,[]),t)}class yl{constructor(e,t,r,i,s,o,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(e=>ml(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(e=>ml(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function P3(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class by{constructor(e,t,r,i,s,o,a,u,c,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=d,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ml(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ml(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class F3 extends k3{constructor(e,t){super(t),this.url=e,vA(this,t)}toString(){return L3(this._root)}}function vA(n,e){e.value._routerState=n,e.children.forEach(t=>vA(n,t))}function L3(n){const e=n.children.length>0?` { ${n.children.map(L3).join(", ")} } `:"";return`${n.value}${e}`}function wA(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function EA(n,e){const t=vs(n.params,e.params)&&function(n,e){return uu(n,e)&&n.every((t,r)=>vs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||EA(n.parent,e.parent))}function xf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xf(n,r,i);return xf(n,r)})}(n,e,t);return new ao(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xf(n,a)),o}}const r=function(n){return new yl(new qi(n.url),new qi(n.params),new qi(n.queryParams),new qi(n.fragment),new qi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>xf(n,s));return new ao(r,i)}}function Cy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Af(n){return"object"==typeof n&&null!=n&&n.outlets}function bA(n,e,t,r,i){let s={};return r&&ar(r,(o,a)=>{s[a]=Array.isArray(o)?o.map(u=>`${u}`):`${o}`}),new au(t.root===n?e:V3(t.root,n,e),s,i)}function V3(n,e,t){const r={};return ar(n.children,(i,s)=>{r[s]=i===e?t:V3(i,e,t)}),new _t(n.segments,r)}class U3{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cy(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Af);if(i&&i!==E3(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class CA{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function B3(n,e,t){if(n||(n=new _t([],{})),0===n.segments.length&&n.hasChildren())return Iy(n,e,t);const r=function(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Af(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!$3(u,c,o))return s;r+=2}else{if(!$3(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new _t(n.segments.slice(0,r.pathIndex),{});return s.children[dt]=new _t(n.segments.slice(r.pathIndex),n.children),Iy(s,0,i)}return r.match&&0===i.length?new _t(n.segments,{}):r.match&&!n.hasChildren()?IA(n,e,t):r.match?Iy(n,0,i):IA(n,e,t)}function Iy(n,e,t){if(0===t.length)return new _t(n.segments,{});{const r=function(n){return Af(n[0])?n[0].outlets:{[dt]:n}}(t),i={};return ar(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=B3(n.children[o],e,s))}),ar(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new _t(n.segments,i)}}function IA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Af(s)){const u=$he(s.outlets);return new _t(r,u)}if(0===i&&Cy(t[0])){r.push(new Df(n.segments[e].path,j3(t[0]))),i++;continue}const o=Af(s)?s.outlets[dt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Cy(a)?(r.push(new Df(o,j3(a))),i+=2):(r.push(new Df(o,{})),i++)}return new _t(r,{})}function $he(n){const e={};return ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=IA(new _t([],{}),0,t))}),e}function j3(n){const e={};return ar(n,(t,r)=>e[r]=`${t}`),e}function $3(n,e,t){return n==t.path&&vs(e,t.parameters)}class Ghe{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wA(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_l(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),ar(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_l(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=_l(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=_l(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new lhe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uhe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(wA(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),wA(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),u=a?a.module.componentFactoryResolver:null;o.attachRef=null,o.route=i,o.resolver=u,o.outlet&&o.outlet.activateWith(i,u),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class TA{constructor(e,t){this.routes=e,this.module=t}}function Qo(n){return"function"==typeof n}function cu(n){return n instanceof au}const Mf=Symbol("INITIAL_VALUE");function Rf(){return Gi(n=>function(...n){const e=hi(n),t=Tp(n),{args:r,keys:i}=RF(n);if(0===r.length)return en([],e);const s=new G(function(n,e,t=fe){return r=>{l3(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)l3(e,()=>{const c=en(n[u],e);let d=!1;c.subscribe(new je(r,h=>{s[u]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>kF(i,o):fe));return t?s.pipe(TE(t)):s}(n.map(e=>e.pipe(Kn(1),function(...n){const e=hi(n);return Ae((t,r)=>{(e?Yd(n,t,e):Yd(n,t)).subscribe(r)})}(Mf)))).pipe(d3((e,t)=>{let r=!1;return t.reduce((i,s,o)=>i!==Mf?i:(s===Mf&&(r=!0),r||!1!==s&&o!==t.length-1&&!cu(s)?i:s),e)},Mf),ii(e=>e!==Mf),ke(e=>cu(e)?e:!0===e),Kn(1)))}class Jhe{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kf,this.attachRef=null}}class kf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Jhe,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let H3=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new sn,this.deactivateEvents=new sn,this.attachEvents=new sn,this.detachEvents=new sn,this.name=s||dt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const o=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,u=new Xhe(t,a,this.location.injector);this.activated=this.location.createComponent(o,this.location.length,u),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(le(kf),le(Bi),le(fc),function(n){return function(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(jM(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Tn(),n)}("name"),le(Pg))},n.\u0275dir=qe({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Xhe{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===yl?this.route:e===kf?this.childContexts:this.parent.get(e,t)}}let G3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Su({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Dd(0,"router-outlet")},directives:[H3],encapsulation:2}),n})();function W3(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Zhe(r,efe(e,r))}}function Zhe(n,e){n.children&&W3(n.children,e)}function efe(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function DA(n){const e=n.children&&n.children.map(DA),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==dt&&(t.component=G3),t}function Ti(n){return n.outlet||dt}function z3(n,e){const t=n.filter(r=>Ti(r)===e);return t.push(...n.filter(r=>Ti(r)!==e)),t}const q3={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ty(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},q3):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||fhe)(t,n,e);if(!s)return Object.assign({},q3);const o={};ar(s.posParams,(u,c)=>{o[c]=u.path});const a=s.consumed.length>0?Object.assign(Object.assign({},o),s.consumed[s.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:a,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Dy(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Sy(n,e,r)&&Ti(r)!==dt)}(n,t,r)){const o=new _t(e,function(n,e,t,r){const i={};i[dt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Ti(s)!==dt){const o=new _t([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[Ti(s)]=o}return i}(n,e,r,new _t(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Sy(n,e,r))}(n,t,r)){const o=new _t(n.segments,function(n,e,t,r,i,s){const o={};for(const a of r)if(Sy(n,t,a)&&!i[Ti(a)]){const u=new _t([],{});u._sourceSegment=n,u._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[Ti(a)]=u}return Object.assign(Object.assign({},i),o)}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new _t(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Sy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function K3(n,e,t,r){return!!(Ti(n)===r||r!==dt&&Sy(e,t,n))&&("**"===n.path||Ty(e,n,t).matched)}function Q3(n,e,t){return 0===e.length&&!n.children[t]}class Nf{constructor(e){this.segmentGroup=e||null}}class Y3{constructor(e){this.urlTree=e}}function xy(n){return new G(e=>e.error(new Nf(n)))}function J3(n){return new G(e=>e.error(new Y3(n)))}function sfe(n){return new G(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class ufe{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(Ls)}apply(){const e=Dy(this.urlTree.root,[],[],this.config).segmentGroup,t=new _t(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,dt).pipe(ke(s=>this.createUrlTree(SA(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(js(s=>{if(s instanceof Y3)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Nf?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,dt).pipe(ke(i=>this.createUrlTree(SA(i),e.queryParams,e.fragment))).pipe(js(i=>{throw i instanceof Nf?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new _t([],{[dt]:e}):e;return new au(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ke(s=>new _t([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return en(i).pipe(Cc(s=>{const o=r.children[s],a=z3(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(ke(u=>({segment:u,outlet:s})))}),d3((s,o)=>(s[o.outlet]=o.segment,s),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):fe,fA(1),t?f3(e):h3(()=>new my))}())}expandSegment(e,t,r,i,s,o){return en(r).pipe(Cc(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(js(c=>{if(c instanceof Nf)return Ze(null);throw c}))),gl(a=>!!a),js((a,u)=>{if(a instanceof my||"EmptyError"===a.name){if(Q3(t,i,s))return Ze(new _t([],{}));throw new Nf(t)}throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return K3(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):xy(t):xy(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?J3(s):this.lineralizeSegments(r,s).pipe(Zt(o=>{const a=new _t(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,lastChild:c,positionalParamSegments:d}=Ty(t,i,s);if(!a)return xy(t);const h=this.applyRedirectCommands(u,i.redirectTo,d);return i.redirectTo.startsWith("/")?J3(h):this.lineralizeSegments(i,h).pipe(Zt(m=>this.expandSegment(e,t,r,m.concat(s.slice(c)),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Ze(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(ke(m=>(r._loadedConfig=m,new _t(i,{})))):Ze(new _t(i,{}));const{matched:o,consumedSegments:a,lastChild:u}=Ty(t,r,i);if(!o)return xy(t);const c=i.slice(u);return this.getChildConfig(e,r,i).pipe(Zt(h=>{const m=h.module,y=h.routes,{segmentGroup:T,slicedSegments:N}=Dy(t,a,c,y),U=new _t(T.segments,T.children);if(0===N.length&&U.hasChildren())return this.expandChildren(m,y,U).pipe(ke(pe=>new _t(a,pe)));if(0===y.length&&0===N.length)return Ze(new _t(a,{}));const K=Ti(r)===s;return this.expandSegment(m,U,y,N,K?dt:s,!0).pipe(ke(ae=>new _t(a.concat(ae.segments),ae.children)))}))}getChildConfig(e,t,r){return t.children?Ze(new TA(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Ze(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe(Zt(i=>i?this.configLoader.load(e.injector,t).pipe(ke(s=>(t._loadedConfig=s,s))):function(n){return new G(e=>e.error(gA(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Ze(new TA([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return Ze(!0);const s=i.map(o=>{const a=e.get(o);let u;if(function(n){return n&&Qo(n.canLoad)}(a))u=a.canLoad(t,r);else{if(!Qo(a))throw new Error("Invalid CanLoad guard");u=a(t,r)}return ws(u)});return Ze(s).pipe(Rf(),xr(o=>{if(!cu(o))return;const a=gA(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),ke(o=>!0===o))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[dt])return sfe(e.redirectTo);i=i.children[dt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new au(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ar(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return ar(t.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new _t(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function SA(n){const e={};for(const r of Object.keys(n.children)){const s=SA(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function(n){if(1===n.numberOfChildren&&n.children[dt]){const e=n.children[dt];return new _t(n.segments.concat(e.segments),e.children)}return n}(new _t(n.segments,e))}class X3{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ay{constructor(e,t){this.component=e,this.route=t}}function dfe(n,e,t){const r=n._root;return Of(r,e?e._root:null,t,[r.value])}function My(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Of(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=_l(e);return n.children.forEach(o=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uu(n.url,e.url)||!vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!EA(n,e)||!vs(n.queryParams,e.queryParams);default:return!EA(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new X3(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Of(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ay(a.outlet.component,o))}else o&&Pf(e,a,i),i.canActivateChecks.push(new X3(r)),Of(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),ar(s,(o,a)=>Pf(o,t.getContext(a),i)),i}function Pf(n,e,t){const r=_l(n),i=n.value;ar(r,(s,o)=>{Pf(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ay(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ife{}function Z3(n){return new G(e=>e.error(n))}class Dfe{constructor(e,t,r,i,s,o){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Dy(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,dt);if(null===t)return null;const r=new by([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},dt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ao(r,t),s=new F3(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=P3(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const o=t.children[s],a=z3(e,s),u=this.processSegmentGroup(a,o,s);if(null===u)return null;r.push(...u)}const i=eG(r);return function(n){n.sort((e,t)=>e.value.outlet===dt?-1:t.value.outlet===dt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,t,r,i);if(null!==o)return o}return Q3(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!K3(e,t,r,i))return null;let s,o=[],a=[];if("**"===e.path){const y=r.length>0?E3(r).parameters:{};s=new by(r,y,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rG(e),Ti(e),e.component,e,tG(t),nG(t)+r.length,iG(e))}else{const y=Ty(t,e,r);if(!y.matched)return null;o=y.consumedSegments,a=r.slice(y.lastChild),s=new by(o,y.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rG(e),Ti(e),e.component,e,tG(t),nG(t)+o.length,iG(e))}const u=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:d}=Dy(t,o,a,u.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===d.length&&c.hasChildren()){const y=this.processChildren(u,c);return null===y?null:[new ao(s,y)]}if(0===u.length&&0===d.length)return[new ao(s,[])];const h=Ti(e)===i,m=this.processSegment(u,c,d,h?dt:i);return null===m?null:[new ao(s,m)]}}function Afe(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function eG(n){const e=[],t=new Set;for(const r of n){if(!Afe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=eG(r.children);e.push(new ao(r.value,i))}return e.filter(r=>!t.has(r))}function tG(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nG(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function rG(n){return n.data||{}}function iG(n){return n.resolve||{}}function xA(n){return Gi(e=>{const t=n(e);return t?en(t).pipe(ke(()=>e)):Ze(e)})}class Lfe extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const AA=new Ke("ROUTES");class sG{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe(ke(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const o=s.create(e);return new TA(w3(o.injector.get(AA,void 0,W.Self|W.Optional)).map(DA),o)}),js(s=>{throw t._loader$=void 0,s}));return t._loader$=new PL(i,()=>new Ue).pipe(OL()),t._loader$}loadModuleFactory(e){return ws(e()).pipe(Zt(t=>t instanceof HO?Ze(t):en(this.compiler.compileModuleAsync(t))))}}class Ufe{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Bfe(n){throw n}function jfe(n,e,t){return e.parse("/")}function oG(n,e){return Ze(null)}const $fe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hfe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ci=(()=>{class n{constructor(t,r,i,s,o,a,u){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ue,this.errorHandler=Bfe,this.malformedUriErrorHandler=jfe,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oG,afterPreactivation:oG},this.urlHandlingStrategy=new Ufe,this.routeReuseStrategy=new Lfe,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(Ls),this.console=o.get(TP);const h=o.get(Lt);this.isNgZoneEnabled=h instanceof Lt&&Lt.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new au(new _t([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sG(o,a,m=>this.triggerEvent(new g3(m)),m=>this.triggerEvent(new m3(m))),this.routerState=O3(this.currentUrlTree,this.rootComponentType),this.transitions=new qi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ii(i=>0!==i.id),ke(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gi(i=>{let s=!1,o=!1;return Ze(i).pipe(xr(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Gi(a=>{const u=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Ry(a.source)&&(this.browserUrlTree=a.extractedUrl),Ze(a).pipe(Gi(h=>{const m=this.transitions.getValue();return r.next(new pA(h.id,this.serializeUrl(h.extractedUrl),h.source,h.restoredState)),m!==this.transitions.getValue()?xi:Promise.resolve(h)}),function(n,e,t,r){return Gi(i=>function(n,e,t,r,i){return new ufe(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ke(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xr(h=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:h.urlAfterRedirects})}),function(n,e,t,r,i){return Zt(s=>function(n,e,t,r,i="emptyOnly",s="legacy"){try{const o=new Dfe(n,e,t,r,i,s).recognize();return null===o?Z3(new Ife):Ze(o)}catch(o){return Z3(o)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe(ke(o=>Object.assign(Object.assign({},s),{targetSnapshot:o}))))}(this.rootComponentType,this.config,h=>this.serializeUrl(h),this.paramsInheritanceStrategy,this.relativeLinkResolution),xr(h=>{if("eager"===this.urlUpdateStrategy){if(!h.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);this.setBrowserUrl(y,h)}this.browserUrlTree=h.urlAfterRedirects}const m=new nhe(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);r.next(m)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:y,source:T,restoredState:N,extras:U}=a,K=new pA(m,this.serializeUrl(y),T,N);r.next(K);const $=O3(y,this.rootComponentType).snapshot;return Ze(Object.assign(Object.assign({},a),{targetSnapshot:$,urlAfterRedirects:y,extras:Object.assign(Object.assign({},U),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,a.resolve(null),xi}),xA(a=>{const{targetSnapshot:u,id:c,extractedUrl:d,rawUrl:h,extras:{skipLocationChange:m,replaceUrl:y}}=a;return this.hooks.beforePreactivation(u,{navigationId:c,appliedUrlTree:d,rawUrlTree:h,skipLocationChange:!!m,replaceUrl:!!y})}),xr(a=>{const u=new rhe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(u)}),ke(a=>Object.assign(Object.assign({},a),{guards:dfe(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(n,e){return Zt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ze(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return en(n).pipe(Zt(i=>function(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ze(s.map(a=>{const u=My(a,e,i);let c;if(function(n){return n&&Qo(n.canDeactivate)}(u))c=ws(u.canDeactivate(n,e,t,r));else{if(!Qo(u))throw new Error("Invalid CanDeactivate guard");c=ws(u(n,e,t,r))}return c.pipe(gl())})).pipe(Rf()):Ze(!0)}(i.component,i.route,t,e,r)),gl(i=>!0!==i,!0))}(o,r,i,n).pipe(Zt(a=>a&&function(n){return"boolean"==typeof n}(a)?function(n,e,t,r){return en(e).pipe(Cc(i=>Yd(function(n,e){return null!==n&&e&&e(new ahe(n)),Ze(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new che(n)),Ze(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>cm(()=>Ze(o.guards.map(u=>{const c=My(u,o.node,t);let d;if(function(n){return n&&Qo(n.canActivateChild)}(c))d=ws(c.canActivateChild(r,n));else{if(!Qo(c))throw new Error("Invalid CanActivateChild guard");d=ws(c(r,n))}return d.pipe(gl())})).pipe(Rf())));return Ze(s).pipe(Rf())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(s=>cm(()=>{const o=My(s,e,t);let a;if(function(n){return n&&Qo(n.canActivate)}(o))a=ws(o.canActivate(e,n));else{if(!Qo(o))throw new Error("Invalid CanActivate guard");a=ws(o(e,n))}return a.pipe(gl())}));return Ze(i).pipe(Rf())}(n,i.route,t))),gl(i=>!0!==i,!0))}(r,s,n,e):Ze(a)),ke(a=>Object.assign(Object.assign({},t),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),xr(a=>{if(cu(a.guardsResult)){const c=gA(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw c.url=a.guardsResult,c}const u=new ihe(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(u)}),ii(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),xA(a=>{if(a.guards.canActivateChecks.length)return Ze(a).pipe(xr(u=>{const c=new she(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(c)}),Gi(u=>{let c=!1;return Ze(u).pipe(function(n,e){return Zt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);let s=0;return en(i).pipe(Cc(o=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Ze({});const s={};return en(i).pipe(Zt(o=>function(n,e,t,r){const i=My(n,e,r);return ws(i.resolve?i.resolve(e,t):i(e,t))}(n[o],e,t,r).pipe(xr(a=>{s[o]=a}))),fA(1),Zt(()=>Object.keys(s).length===i.length?Ze(s):xi))}(n._resolve,n,e,r).pipe(ke(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),P3(n,t).resolve),null)))}(o.route,r,n,e)),xr(()=>s++),fA(1),Zt(o=>s===i.length?Ze(t):xi))})}(this.paramsInheritanceStrategy,this.ngModule.injector),xr({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(u),this.cancelNavigationTransition(u,"At least one route resolver didn't emit any value."))}}))}),xr(u=>{const c=new ohe(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(c)}))}),xA(a=>{const{targetSnapshot:u,id:c,extractedUrl:d,rawUrl:h,extras:{skipLocationChange:m,replaceUrl:y}}=a;return this.hooks.afterPreactivation(u,{navigationId:c,appliedUrlTree:d,rawUrlTree:h,skipLocationChange:!!m,replaceUrl:!!y})}),ke(a=>{const u=function(n,e,t){const r=xf(n,e._root,t?t._root:void 0);return new N3(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:u})}),xr(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>ke(r=>(new Ghe(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),xr({next(){s=!0},complete(){s=!0}}),function(n){return Ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var a;s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(a=this.currentNavigation)||void 0===a?void 0:a.id)===i.id&&(this.currentNavigation=null)}),js(a=>{if(o=!0,function(n){return n&&n[y3]}(a)){const u=cu(a.url);u||(this.navigated=!0,this.restoreHistory(i,!0));const c=new p3(i.id,this.serializeUrl(i.extractedUrl),a.message);r.next(c),u?setTimeout(()=>{const d=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),h={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ry(i.source)};this.scheduleNavigation(d,"imperative",null,h,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const u=new the(i.id,this.serializeUrl(i.extractedUrl),a);r.next(u);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return xi}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},o=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(o){const u=Object.assign({},o);delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,o,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){W3(t),this.config=t.map(DA),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=i||this.routerState.root,d=u?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}return null!==h&&(h=this.removeEmptyProps(h)),function(n,e,t,r,i){if(0===t.length)return bA(e.root,e.root,e,r,i);const s=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new U3(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ar(s.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new U3(t,e,r)}(t);if(s.toRoot())return bA(e.root,new _t([],{}),e,r,i);const o=function(n,e,t){if(n.isAbsolute)return new CA(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new CA(s,s===e.root,0)}const r=Cy(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new CA(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),a=o.processChildren?Iy(o.segmentGroup,o.index,s.commands):B3(o.segmentGroup,o.index,s.commands);return bA(o.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,null!=d?d:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=cu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},$fe):!1===r?Object.assign({},Hfe):r,cu(t))return C3(this.currentUrlTree,t,i);const s=this.parseUrl(t);return C3(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Tf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){var a,u,c;if(this.disposed)return Promise.resolve(!1);const d=this.transitions.value,h=Ry(r)&&d&&!Ry(d.source),m=d.rawUrl.toString()===t.toString(),y=d.id===(null===(a=this.currentNavigation)||void 0===a?void 0:a.id);if(h&&m&&y)return Promise.resolve(!0);let N,U,K;o?(N=o.resolve,U=o.reject,K=o.promise):K=new Promise((pe,xe)=>{N=pe,U=xe});const $=++this.navigationId;let ae;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),ae=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(u=this.browserPageId)&&void 0!==u?u:0:(null!==(c=this.browserPageId)&&void 0!==c?c:0)+1):ae=0,this.setTransition({id:$,targetPageId:ae,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:N,reject:U,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(pe=>Promise.reject(pe))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===o?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new p3(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p0()},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function Ry(n){return"imperative"!==n}class aG{}class uG{preload(e,t){return Ze(null)}}let cG=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new sG(i,r,u=>t.triggerEvent(new g3(u)),u=>t.triggerEvent(new m3(u)))}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof Tf),Cc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Ls);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const o=s._loadedConfig;i.push(this.processRoutes(o.module,o.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return en(i).pipe(Xi(),ke(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Ze(r._loadedConfig):this.loader.load(t.injector,r)).pipe(Zt(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(Pe(ci),Pe(Og),Pe(Kt),Pe(aG))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})(),kA=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pA?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Tf&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _3&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _3(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p0()},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();const lu=new Ke("ROUTER_CONFIGURATION"),lG=new Ke("ROUTER_FORROOT_GUARD"),Kfe=[iE,{provide:S3,useClass:x3},{provide:ci,useFactory:function(n,e,t,r,i,s,o={},a,u){const c=new ci(null,n,e,t,r,i,w3(s));return a&&(c.urlHandlingStrategy=a),u&&(c.routeReuseStrategy=u),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,c),o.enableTracing&&c.events.subscribe(d=>{var h,m;null===(h=console.group)||void 0===h||h.call(console,`Router Event: ${d.constructor.name}`),console.log(d.toString()),console.log(d),null===(m=console.groupEnd)||void 0===m||m.call(console)}),c},deps:[S3,kf,iE,Kt,Og,AA,lu,[class{},new St],[class{},new St]]},kf,{provide:yl,useFactory:function(n){return n.routerState.root},deps:[ci]},cG,uG,class{preload(e,t){return t().pipe(js(()=>Ze(null)))}},{provide:lu,useValue:{enableTracing:!1}}];function Qfe(){return new RP("Router",ci)}let dG=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Kfe,hG(t),{provide:lG,useFactory:Xfe,deps:[[ci,new St,new $u]]},{provide:lu,useValue:r||{}},{provide:Ec,useFactory:Jfe,deps:[_a,[new fd(rE),new St],lu]},{provide:kA,useFactory:Yfe,deps:[ci,yY,lu]},{provide:aG,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:uG},{provide:RP,multi:!0,useFactory:Qfe},[NA,{provide:Vd,multi:!0,useFactory:npe,deps:[NA]},{provide:fG,useFactory:rpe,deps:[NA]},{provide:IP,multi:!0,useExisting:fG}]]}}static forChild(t){return{ngModule:n,providers:[hG(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Pe(lG,8),Pe(ci,8))},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({}),n})();function Yfe(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new kA(n,e,t)}function Jfe(n,e,t={}){return t.useHash?new Z9(n,e):new ZP(n,e)}function Xfe(n){return"guarded"}function hG(n){return[{provide:Iq,multi:!0,useValue:n},{provide:AA,multi:!0,useValue:n}]}let NA=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ue}appInitializer(){return this.injector.get(Y9,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(ci),o=this.injector.get(lu);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===o.initialNavigation||"enabledBlocking"===o.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?Ze(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(lu),i=this.injector.get(cG),s=this.injector.get(kA),o=this.injector.get(ci),a=this.injector.get(vc);t===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(Pe(Kt))},n.\u0275prov=D({token:n,factory:n.\u0275fac}),n})();function npe(n){return n.appInitializer.bind(n)}function rpe(n){return n.bootstrapListener.bind(n)}const fG=new Ke("Router Initializer"),spe=[{path:"",redirectTo:"AppComponent",pathMatch:"full"},{path:"produse",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Su({type:n,selectors:[["app-afisare-produse"]],decls:2,vars:0,template:function(t,r){1&t&&(ln(0,"p"),wi(1,"afisare-produse works!"),dn())},styles:[""]}),n})()},{path:"cart",component:WL}];let ope=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({imports:[[dG.forRoot(spe)]]}),n})();const pG="@firebase/database";let OA="";class upe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:nh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class cpe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mG=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new upe(e)}}catch(e){}return new cpe},du=mG("localStorage"),PA=mG("sessionStorage"),wl=new Ea("@firebase/database"),_G=function(){let n=1;return function(){return n++}}(),yG=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Ce(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new nZ;t.update(e);const r=t.digest();return mm.encodeByteArray(r)},Ff=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ff.apply(null,r):e+="object"==typeof r?Yn(r):r,e+=" "}return e};let hu=null,vG=!0;const Wn=function(...n){if(!0===vG&&(vG=!1,null===hu&&!0===PA.get("logging_enabled")&&function(n,e){Ce(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(wl.logLevel=yt.VERBOSE,hu=wl.log.bind(wl),e&&PA.set("logging_enabled",!0)):"function"==typeof n?hu=n:(hu=null,PA.remove("logging_enabled"))}(!0)),hu){const e=Ff.apply(null,n);hu(e)}},Lf=function(n){return function(...e){Wn(n,...e)}},FA=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ff(...n);wl.error(e)},Es=function(...n){const e=`FIREBASE FATAL ERROR: ${Ff(...n)}`;throw wl.error(e),new Error(e)},vr=function(...n){const e="FIREBASE WARNING: "+Ff(...n);wl.warn(e)},ky=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},uo="[MIN_NAME]",bs="[MAX_NAME]",fu=function(n,e){if(n===e)return 0;if(n===uo||e===bs)return-1;if(e===uo||n===bs)return 1;{const t=Ny(n),r=Ny(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},hpe=function(n,e){return n===e?0:n<e?-1:1},Vf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Yn(e))},LA=function(n){if("object"!=typeof n||null===n)return Yn(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Yn(e[r]),t+=":",t+=LA(n[e[r]]);return t+="}",t},EG=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function zn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bG=function(n){Ce(!ky(n),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let h="";for(u=0;u<64;u+=8){let m=parseInt(d.substr(u,8),2).toString(16);1===m.length&&(m="0"+m),h+=m}return h.toLowerCase()},mpe=new RegExp("^-?(0*)\\d{1,10}$"),Ny=function(n){if(mpe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},El=function(n){try{n()}catch(e){setTimeout(()=>{throw vr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Uf=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class ype{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vpe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Wn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vr(e)}}let Bf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const xG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,RG="websocket",kG="long_polling";class BA{constructor(e,t,r,i,s=!1,o="",a=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=du.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&du.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function NG(n,e,t){let r;if(Ce("string"==typeof e,"typeof type must == string"),Ce("object"==typeof t,"typeof params must == object"),e===RG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==kG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return zn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Epe{constructor(){this.counters_={}}incrementCounter(e,t=1){Gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return zX(this.counters_)}}const jA={},$A={};function HA(n){const e=n.toString();return jA[e]||(jA[e]=new Epe),jA[e]}class Cpe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&El(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Yo{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lf(e),this.stats_=HA(t),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),NG(t,kG,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Cpe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new GA((...s)=>{const[o,a,u,c,d]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&xG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Yo.forceAllow_=!0}static forceDisallow(){Yo.forceDisallow_=!0}static isAvailable(){return!(!Yo.forceAllow_&&(Yo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=a2(t),i=EG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Yn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class GA{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_G(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=GA.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wn("frame writing exception"),a.stack&&Wn(a.stack),Wn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Py=null;"undefined"!=typeof MozWebSocket?Py=MozWebSocket:"undefined"!=typeof WebSocket&&(Py=WebSocket);let bl=(()=>{class n{constructor(t,r,i,s,o,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lf(this.connId),this.stats_=HA(r),this.connURL=n.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return"undefined"!=typeof location&&location.hostname&&xG.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),NG(t,RG,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,du.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Py(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Py&&!n.forceDisallow_}static previouslyFailed(){return du.isInMemoryStorage||!0===du.get("previous_websocket_failure")}markConnectionHealthy(){du.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=nh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ce(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Yn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=EG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),BG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Yo,bl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bl&&bl.isAvailable();let i=r&&!bl.previouslyFailed();if(t.webSocketOnly&&(r||vr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bl];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class qG{constructor(e,t,r,i,s,o,a,u,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lf("c:"+this.id+":"),this.transportManager_=new BG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Uf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vf("t",e),r=Vf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vf("t",e),r=Vf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?FA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&vr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Uf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(du.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class KG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class QG{constructor(e){this.allowedEvents_=e,this.listeners_={},Ce(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){Ce(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Fy extends QG{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!ym()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fy}getInitialEvent(e){return Ce("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Tt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ct(){return new Tt("")}function ut(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jo(n){return n.pieces_.length-n.pieceNum_}function Ot(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Tt(n.pieces_,e)}function zA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function jf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function XG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Tt(e,0)}function qt(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Tt(t,0)}function ct(n){return n.pieceNum_>=n.pieces_.length}function Or(n,e){const t=ut(n),r=ut(e);if(null===t)return e;if(t===r)return Or(Ot(n),Ot(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function qA(n,e){if(Jo(n)!==Jo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Di(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jo(n)>Jo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class zpe{constructor(e,t){this.errorPrefix_=t,this.parts_=jf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Im(this.parts_[r]);ZG(this)}}function ZG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pu(n))}function pu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class KA extends QG{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new KA}getInitialEvent(e){return Ce("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $f=1e3;let Vy,gu=(()=>{class n extends KG{constructor(t,r,i,s,o,a,u,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Lf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$f,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");KA.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Fy.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Yn(o)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new Tc,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Ce(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,d=u.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),"ok"!==d&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Gs(t,"w")){const i=Dc(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();vr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=wm(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=wm(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Ce(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Yn(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):FA("Unrecognized action received from server: "+Yn(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$f,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$f,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$f),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return P(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let u=!1,c=null;const d=function(){c?c.close():(u=!0,s())};t.realtime_={close:d,sendRequest:function(y){Ce(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)}};const m=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,T]=yield Promise.all([t.authTokenProvider_.getToken(m),t.appCheckTokenProvider_.getToken(m)]);u?Wn("getToken() completed but was canceled"):(Wn("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=T&&T.token,c=new qG(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,N=>{vr(N+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),u||(t.repoInfo_.nodeAdmin&&vr(y),d())}}})()}interrupt(t){Wn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ob(this.interruptReasons_)&&(this.reconnectDelay_=$f,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>LA(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Tt(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Wn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+OA.replace(/\./g,"-")]=1,ym()?t["framework.cordova"]=1:ib()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Fy.getInstance().currentlyOnline();return ob(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ht{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ht(e,t)}}class Ly{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ht(uo,e),i=new ht(uo,t);return 0!==this.compare(r,i)}minPost(){return ht.MIN}}class nW extends Ly{static get __EMPTY_NODE(){return Vy}static set __EMPTY_NODE(e){Vy=e}compare(e,t){return fu(e.name,t.name)}isDefinedOn(e){throw Ic("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ht.MIN}maxPost(){return new ht(bs,Vy)}makePost(e,t){return Ce("string"==typeof e,"KeyIndex indexValue must always be a string."),new ht(e,Vy)}toString(){return".key"}}const Cs=new nW;class Uy{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let YA,Ki=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Wr.EMPTY_NODE,this.right=null!=o?o:Wr.EMPTY_NODE}copy(t,r,i,s,o){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Wr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Wr{constructor(e,t=Wr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ki.BLACK,null,null))}remove(e){return new Wr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ki.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Uy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Uy(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Uy(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Uy(this.root_,null,this.comparator_,!0,e)}}function ege(n,e){return fu(n.name,e.name)}function QA(n,e){return fu(n,e)}Wr.EMPTY_NODE=new class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ki(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const rW=function(n){return"number"==typeof n?"number:"+bG(n):"string:"+n},iW=function(n){if(n.isLeafNode()){const e=n.val();Ce("string"==typeof e||"number"==typeof e||"object"==typeof e&&Gs(e,".sv"),"Priority must be a string or number.")}else Ce(n===YA||n.isEmpty(),"priority of unexpected type.");Ce(n===YA||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let sW,oW,aW,Cl=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Ce(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iW(this.priorityNode_)}static set __childrenNodeConstructor(t){sW=t}static get __childrenNodeConstructor(){return sW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ct(t)?this:".priority"===ut(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=ut(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Ce(".priority"!==i||1===Jo(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ot(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rW(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?bG(this.value_):this.value_,this.lazyHash_=yG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Ce(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return Ce(s>=0,"Unknown leaf type: "+r),Ce(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Bt=new class extends Ly{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?fu(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ht.MIN}maxPost(){return new ht(bs,new Cl("[PRIORITY-POST]",aW))}makePost(e,t){const r=oW(e);return new ht(t,new Cl("[PRIORITY-POST]",r))}toString(){return".priority"}},sge=Math.log(2);class oge{constructor(e){this.count=parseInt(Math.log(e+1)/sge,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const By=function(n,e,t,r){n.sort(e);const i=function(u,c){const d=c-u;let h,m;if(0===d)return null;if(1===d)return h=n[u],m=t?t(h):h,new Ki(m,h.node,Ki.BLACK,null,null);{const y=parseInt(d/2,10)+u,T=i(u,y),N=i(y+1,c);return h=n[y],m=t?t(h):h,new Ki(m,h.node,Ki.BLACK,T,N)}},a=function(u){let c=null,d=null,h=n.length;const m=function(T,N){const U=h-T,K=h;h-=T;const $=i(U+1,K),ae=n[U],pe=t?t(ae):ae;y(new Ki(pe,ae.node,N,null,$))},y=function(T){c?(c.left=T,c=T):(d=T,c=T)};for(let T=0;T<u.count;++T){const N=u.nextBitIsOne(),U=Math.pow(2,u.count-(T+1));N?m(U,Ki.BLACK):(m(U,Ki.BLACK),m(U,Ki.RED))}return d}(new oge(n.length));return new Wr(r||e,a)};let JA;const Il={};class co{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Ce(Il&&Bt,"ChildrenNode.ts has not been loaded"),JA=JA||new co({".priority":Il},{".priority":Bt}),JA}get(e){const t=Dc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wr?t:null}hasIndex(e){return Gs(this.indexSet_,e.toString())}addIndex(e,t){Ce(e!==Cs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(ht.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?By(r,e.getCompare()):Il;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const d=Object.assign({},this.indexes_);return d[u]=a,new co(d,c)}addToIndexes(e,t){const r=Em(this.indexes_,(i,s)=>{const o=Dc(this.indexSet_,s);if(Ce(o,"Missing index implementation for "+s),i===Il){if(o.isDefinedOn(e.node)){const a=[],u=t.getIterator(ht.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),By(a,o.getCompare())}return Il}{const a=t.get(e.name);let u=i;return a&&(u=u.remove(new ht(e.name,a))),u.insert(e,e.node)}});return new co(r,this.indexSet_)}removeFromIndexes(e,t){const r=Em(this.indexes_,i=>{if(i===Il)return i;{const s=t.get(e.name);return s?i.remove(new ht(e.name,s)):i}});return new co(r,this.indexSet_)}}let Hf,it=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iW(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Hf||(Hf=new n(new Wr(QA),null,co.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Hf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Hf:r}}getChild(t){const r=ut(t);return null===r?this:this.getImmediateChild(r).getChild(Ot(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(Ce(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new ht(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Hf:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=ut(t);if(null===i)return r;{Ce(".priority"!==ut(t)||1===Jo(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Ot(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Bt,(a,u)=>{r[a]=u.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+rW(this.getPriority().val())+":"),this.forEachChild(Bt,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":yG(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new ht(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new ht(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new ht(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,ht.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,ht.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gf?-1:0}withIndex(t){if(t===Cs||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Cs||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Bt),s=r.getIterator(Bt);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Cs?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Gf=new class extends it{constructor(){super(new Wr(QA),it.EMPTY_NODE,co.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}};function Xt(n,e=null){if(null===n)return it.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Ce(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Cl(n,Xt(e));if(n instanceof Array){let t=it.EMPTY_NODE;return zn(n,(r,i)=>{if(Gs(n,r)&&"."!==r.substring(0,1)){const s=Xt(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Xt(e))}{const t=[];let r=!1;if(zn(n,(o,a)=>{if("."!==o.substring(0,1)){const u=Xt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),t.push(new ht(o,u)))}}),0===t.length)return it.EMPTY_NODE;const s=By(t,ege,o=>o.name,QA);if(r){const o=By(t,Bt.getCompare());return new it(s,Xt(e),new co({".priority":o},{".priority":Bt}))}return new it(s,Xt(e),co.Default)}}Object.defineProperties(ht,{MIN:{value:new ht(uo,it.EMPTY_NODE)},MAX:{value:new ht(bs,Gf)}}),nW.__EMPTY_NODE=it.EMPTY_NODE,Cl.__childrenNodeConstructor=it,function(n){YA=n}(Gf),function(n){aW=n}(Gf),function(n){oW=n}(Xt);class XA extends Ly{constructor(e){super(),this.indexPath_=e,Ce(!ct(e)&&".priority"!==ut(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?fu(e.name,t.name):s}makePost(e,t){const r=Xt(e),i=it.EMPTY_NODE.updateChild(this.indexPath_,r);return new ht(t,i)}maxPost(){const e=it.EMPTY_NODE.updateChild(this.indexPath_,Gf);return new ht(bs,e)}toString(){return jf(this.indexPath_,0).join("/")}}const ZA=new class extends Ly{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?fu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ht.MIN}maxPost(){return ht.MAX}makePost(e,t){const r=Xt(e);return new ht(t,r)}toString(){return".value"}};function zf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class n1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:uo}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Bt}copy(){const e=new n1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fW(n){const e={};if(n.isDefault())return e;let t;return n.index_===Bt?t="$priority":n.index_===ZA?t="$value":n.index_===Cs?t="$key":(Ce(n.index_ instanceof XA,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Yn(t),n.startSet_&&(e.startAt=Yn(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+Yn(n.indexStartName_))),n.endSet_&&(e.endAt=Yn(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+Yn(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Bt&&(e.i=n.index_.toString()),e}class $y extends KG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ce(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=$y.getListenId_(e,r),a={};this.listens_[o]=a;const u=fW(e._queryParams);this.restRequest_(s+".json",u,(c,d)=>{let h=d;if(404===c&&(h=null,c=null),null===c&&this.onDataUpdate_(s,h,!1,r),Dc(this.listens_,o)===a){let m;m=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(m,null)}})}unlisten(e,t){const r=$y.getListenId_(e,t);delete this.listens_[r]}get(e){const t=fW(e._queryParams),r=e._path.toString(),i=new Tc;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rh(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=nh(a.responseText)}catch(c){vr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&vr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class yge{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hy(){return{value:null,children:new Map}}function Sl(n,e,t){if(ct(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=ut(e);n.children.has(r)||n.children.set(r,Hy()),Sl(n.children.get(r),e=Ot(e),t)}}function o1(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{o1(i,new Tt(e.toString()+"/"+r),t)})}class wge{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&zn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Cge{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new wge(e);const r=1e4+2e4*Math.random();Uf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;zn(e,(i,s)=>{s>0&&Gs(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Uf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Si=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Si||(Si={})),Si))();function c1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Gy{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Si.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ct(this.path)){if(null!=this.affectedTree.value)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Tt(e));return new Gy(Ct(),t,this.revert)}}return Ce(ut(this.path)===e,"operationForChild called for unrelated child."),new Gy(Ot(this.path),this.affectedTree,this.revert)}}class mu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Si.OVERWRITE}operationForChild(e){return ct(this.path)?new mu(this.source,Ct(),this.snap.getImmediateChild(e)):new mu(this.source,Ot(this.path),this.snap)}}class xl{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Si.MERGE}operationForChild(e){if(ct(this.path)){const t=this.children.subtree(new Tt(e));return t.isEmpty()?null:t.value?new mu(this.source,Ct(),t.value):new xl(this.source,Ct(),t)}return Ce(ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xl(this.source,Ot(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xo{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ct(e))return this.isFullyInitialized()&&!this.filtered_;const t=ut(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Qf(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,u)=>function(n,e,t){if(null==e.childName||null==t.childName)throw Ic("Should only compare child_ events.");const r=new ht(e.childName,e.snapshotNode),i=new ht(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,u)),o.forEach(a=>{const u=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,n.query_))})})}function Wy(n,e){return{eventCache:n,serverCache:e}}function Yf(n,e,t,r){return Wy(new Xo(e,t,r),n.serverCache)}function mW(n,e,t,r){return Wy(n.eventCache,new Xo(e,t,r))}function zy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function _u(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let l1;class jt{constructor(e,t=(()=>(l1||(l1=new Wr(hpe)),l1))()){this.value=e,this.children=t}static fromObject(e){let t=new jt(null);return zn(e,(r,i)=>{t=t.set(new Tt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ct(),value:this.value};if(ct(e))return null;{const r=ut(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Ot(e),t);return null!=s?{path:qt(new Tt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ct(e))return this;{const t=ut(e),r=this.children.get(t);return null!==r?r.subtree(Ot(e)):new jt(null)}}set(e,t){if(ct(e))return new jt(t,this.children);{const r=ut(e),s=(this.children.get(r)||new jt(null)).set(Ot(e),t),o=this.children.insert(r,s);return new jt(this.value,o)}}remove(e){if(ct(e))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const t=ut(e),r=this.children.get(t);if(r){const i=r.remove(Ot(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new jt(null):new jt(this.value,s)}return this}}get(e){if(ct(e))return this.value;{const t=ut(e),r=this.children.get(t);return r?r.get(Ot(e)):null}}setTree(e,t){if(ct(e))return t;{const r=ut(e),s=(this.children.get(r)||new jt(null)).setTree(Ot(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new jt(this.value,o)}}fold(e){return this.fold_(Ct(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(qt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ct(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ct(e))return null;{const s=ut(e),o=this.children.get(s);return o?o.findOnPath_(Ot(e),qt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ct(),t)}foreachOnPath_(e,t,r){if(ct(e))return this;{this.value&&r(t,this.value);const i=ut(e),s=this.children.get(i);return s?s.foreachOnPath_(Ot(e),qt(t,i),r):new jt(null)}}foreach(e){this.foreach_(Ct(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(qt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Qi{constructor(e){this.writeTree_=e}static empty(){return new Qi(new jt(null))}}function Jf(n,e,t){if(ct(e))return new Qi(new jt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Or(i,e);return s=s.updateChild(o,t),new Qi(n.writeTree_.set(i,s))}{const i=new jt(t),s=n.writeTree_.setTree(e,i);return new Qi(s)}}}function d1(n,e,t){let r=n;return zn(t,(i,s)=>{r=Jf(r,qt(e,i),s)}),r}function _W(n,e){if(ct(e))return Qi.empty();{const t=n.writeTree_.setTree(e,new jt(null));return new Qi(t)}}function h1(n,e){return null!=yu(n,e)}function yu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Or(t.path,e)):null}function yW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Bt,(r,i)=>{e.push(new ht(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new ht(r,i.value))}),e}function Zo(n,e){if(ct(e))return n;{const t=yu(n,e);return new Qi(null!=t?new jt(t):n.writeTree_.subtree(e))}}function f1(n){return n.writeTree_.isEmpty()}function Al(n,e){return vW(Ct(),n.writeTree_,e)}function vW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(Ce(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=vW(qt(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(qt(n,".priority"),r)),t}}function qy(n,e){return IW(e,n)}function Nge(n,e){if(n.snap)return Di(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Di(qt(n.path,t),e))return!0;return!1}function Pge(n){return n.visible}function wW(n,e,t){let r=Qi.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)Di(t,o)?(a=Or(t,o),r=Jf(r,a,s.snap)):Di(o,t)&&(a=Or(o,t),r=Jf(r,Ct(),s.snap.getChild(a)));else{if(!s.children)throw Ic("WriteRecord should have .snap or .children");if(Di(t,o))a=Or(t,o),r=d1(r,a,s.children);else if(Di(o,t))if(a=Or(o,t),ct(a))r=d1(r,Ct(),s.children);else{const u=Dc(s.children,ut(a));if(u){const c=u.getChild(Ot(a));r=Jf(r,Ct(),c)}}}}}return r}function EW(n,e,t,r,i){if(r||i){const s=Zo(n.visibleWrites,e);return!i&&f1(s)?t:i||null!=t||h1(s,Ct())?Al(wW(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Di(c.path,e)||Di(e,c.path))},e),t||it.EMPTY_NODE):null}{const s=yu(n.visibleWrites,e);if(null!=s)return s;{const o=Zo(n.visibleWrites,e);return f1(o)?t:null!=t||h1(o,Ct())?Al(o,t||it.EMPTY_NODE):null}}}function Ky(n,e,t,r){return EW(n.writeTree,n.treePath,e,t,r)}function p1(n,e){return function(n,e,t){let r=it.EMPTY_NODE;const i=yu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Bt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Zo(n.visibleWrites,e);return t.forEachChild(Bt,(o,a)=>{const u=Al(Zo(s,new Tt(o)),a);r=r.updateImmediateChild(o,u)}),yW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return yW(Zo(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function bW(n,e,t,r){return function(n,e,t,r,i){Ce(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=qt(e,t);if(h1(n.visibleWrites,s))return null;{const o=Zo(n.visibleWrites,s);return f1(o)?i.getChild(t):Al(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Qy(n,e){return function(n,e){return yu(n.visibleWrites,e)}(n.writeTree,qt(n.treePath,e))}function g1(n,e,t){return function(n,e,t,r){const i=qt(e,t),s=yu(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Al(Zo(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function CW(n,e){return IW(qt(n.treePath,e),n.writeTree)}function IW(n,e){return{treePath:n,writeTree:e}}class Hge{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ce("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ce(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,zf(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Ic("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,zf(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const TW=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class m1{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Xo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return g1(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_u(this.viewCache_),s=function(n,e,t,r,i,s){return function(n,e,t,r,i,s,o){let a;const u=Zo(n.visibleWrites,e),c=yu(u,Ct());if(null!=c)a=c;else{if(null==t)return[];a=Al(u,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const d=[],h=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=m.getNext();for(;y&&d.length<i;)0!==h(y,r)&&d.push(y),y=m.getNext();return d}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function DW(n,e,t,r,i,s){const o=e.eventCache;if(null!=Qy(r,t))return e;{let a,u;if(ct(t))if(Ce(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=_u(e),h=p1(r,c instanceof it?c:it.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{const c=Ky(r,_u(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ut(t);if(".priority"===c){Ce(1===Jo(t),"Can't have a priority with additional path components");const d=o.getNode();u=e.serverCache.getNode();const h=bW(r,t,d,u);a=null!=h?n.filter.updatePriority(d,h):o.getNode()}else{const d=Ot(t);let h;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const m=bW(r,t,o.getNode(),u);h=null!=m?o.getNode().getImmediateChild(c).updateChild(d,m):o.getNode().getImmediateChild(c)}else h=g1(r,c,e.serverCache);a=null!=h?n.filter.updateChild(o.getNode(),c,h,d,i,s):o.getNode()}}return Yf(e,a,o.isFullyInitialized()||ct(t),n.filter.filtersNodes())}}function Yy(n,e,t,r,i,s,o,a){const u=e.serverCache;let c;const d=o?n.filter:n.filter.getIndexedFilter();if(ct(t))c=d.updateFullNode(u.getNode(),r,null);else if(d.filtersNodes()&&!u.isFiltered()){const y=u.getNode().updateChild(t,r);c=d.updateFullNode(u.getNode(),y,null)}else{const y=ut(t);if(!u.isCompleteForPath(t)&&Jo(t)>1)return e;const T=Ot(t),U=u.getNode().getImmediateChild(y).updateChild(T,r);c=".priority"===y?d.updatePriority(u.getNode(),U):d.updateChild(u.getNode(),y,U,T,TW,null)}const h=mW(e,c,u.isFullyInitialized()||ct(t),d.filtersNodes());return DW(n,h,t,i,new m1(i,h,s),a)}function _1(n,e,t,r,i,s,o){const a=e.eventCache;let u,c;const d=new m1(i,e,s);if(ct(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Yf(e,c,!0,n.filter.filtersNodes());else{const h=ut(t);if(".priority"===h)c=n.filter.updatePriority(e.eventCache.getNode(),r),u=Yf(e,c,a.isFullyInitialized(),a.isFiltered());else{const m=Ot(t),y=a.getNode().getImmediateChild(h);let T;if(ct(m))T=r;else{const N=d.getCompleteChild(h);T=null!=N?".priority"===zA(m)&&N.getChild(XG(m)).isEmpty()?N:N.updateChild(m,r):it.EMPTY_NODE}u=y.equals(T)?e:Yf(e,n.filter.updateChild(a.getNode(),h,T,m,d,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return u}function SW(n,e){return n.eventCache.isCompleteForChild(e)}function xW(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function y1(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=ct(t)?r:new jt(null).setTree(t,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((h,m)=>{if(d.hasChild(h)){const T=xW(0,e.serverCache.getNode().getImmediateChild(h),m);u=Yy(n,u,new Tt(h),T,i,s,o,a)}}),c.children.inorderTraversal((h,m)=>{const y=!e.serverCache.isCompleteForChild(h)&&null===m.value;if(!d.hasChild(h)&&!y){const N=xW(0,e.serverCache.getNode().getImmediateChild(h),m);u=Yy(n,u,new Tt(h),N,i,s,o,a)}}),u}function nme(n,e){const t=_u(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ct(e)&&!t.getImmediateChild(ut(e)).isEmpty())?t.getChild(e):null}function RW(n,e,t,r){e.type===Si.MERGE&&null!==e.source.queryId&&(Ce(_u(n.viewCache_),"We should always have a full cache before handling merges"),Ce(zy(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function(n,e,t,r,i){const s=new Hge;let o,a;if(t.type===Si.OVERWRITE){const c=t;c.source.fromUser?o=_1(n,e,c.path,c.snap,r,i,s):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ct(c.path),o=Yy(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Si.MERGE){const c=t;c.source.fromUser?o=function(n,e,t,r,i,s,o){let a=e;return r.foreach((u,c)=>{const d=qt(t,u);SW(e,ut(d))&&(a=_1(n,a,d,c,i,s,o))}),r.foreach((u,c)=>{const d=qt(t,u);SW(e,ut(d))||(a=_1(n,a,d,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=y1(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Si.ACK_USER_WRITE){const c=t;o=c.revert?function(n,e,t,r,i,s){let o;if(null!=Qy(r,t))return e;{const a=new m1(r,e,i),u=e.eventCache.getNode();let c;if(ct(t)||".priority"===ut(t)){let d;if(e.serverCache.isFullyInitialized())d=Ky(r,_u(e));else{const h=e.serverCache.getNode();Ce(h instanceof it,"serverChildren would be complete if leaf node"),d=p1(r,h)}d=d,c=n.filter.updateFullNode(u,d,s)}else{const d=ut(t);let h=g1(r,d,e.serverCache);null==h&&e.serverCache.isCompleteForChild(d)&&(h=u.getImmediateChild(d)),c=null!=h?n.filter.updateChild(u,d,h,Ot(t),a,s):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(u,d,it.EMPTY_NODE,Ot(t),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ky(r,_u(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Qy(r,Ct()),Yf(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function(n,e,t,r,i,s,o){if(null!=Qy(i,t))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ct(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return Yy(n,e,t,u.getNode().getChild(t),i,s,a,o);if(ct(t)){let c=new jt(null);return u.getNode().forEachChild(Cs,(d,h)=>{c=c.set(new Tt(d),h)}),y1(n,e,t,c,i,s,a,o)}return e}{let c=new jt(null);return r.foreach((d,h)=>{const m=qt(t,d);u.isCompleteForPath(m)&&(c=c.set(d,u.getNode().getChild(m)))}),y1(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Si.LISTEN_COMPLETE)throw Ic("Unknown operation type: "+t.type);o=function(n,e,t,r,i){const s=e.serverCache;return DW(n,mW(e,s.getNode(),s.isFullyInitialized()||ct(t),s.isFiltered()),t,r,TW,i)}(n,e,t.path,r,s)}const u=s.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=zy(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function(n){return{type:"value",snapshotNode:n}}(zy(e)))}}(e,o,u),{viewCache:o,changes:u}}(n.processor_,i,e,t,r);return function(n,e){Ce(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ce(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),Ce(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function(n,e,t,r){return function(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Qf(n,i,"child_removed",e,r,t),Qf(n,i,"child_added",e,r,t),Qf(n,i,"child_moved",s,r,t),Qf(n,i,"child_changed",e,r,t),Qf(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let Jy,Zy;function v1(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return Ce(null!=s,"SyncTree gave us an op for an invalid query."),RW(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(RW(o,e,t,r));return s}}function ea(n,e){let t=null;for(const r of n.views.values())t=t||nme(r,e);return t}class VW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_={visibleWrites:Qi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function w1(n,e,t,r,i){return function(n,e,t,r,i){Ce(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Jf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ml(n,new mu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function na(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);Ce(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Nge(a,r.path)?i=!1:Di(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function(n){n.visibleWrites=wW(n.allWrites,Pge,Ct()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_W(n.visibleWrites,r.path):zn(r.children,u=>{n.visibleWrites=_W(n.visibleWrites,qt(r.path,u))}),!0))}(n.pendingWriteTree_,e)){let s=new jt(null);return null!=r.snap?s=s.set(Ct(),!0):zn(r.children,o=>{s=s.set(new Tt(o),!0)}),Ml(n,new Gy(r.path,s,t))}return[]}function Xf(n,e,t){return Ml(n,new mu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function tv(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=ea(a,Or(o,e));if(c)return c});return EW(i,e,s,t,!0)}function Ml(n,e){return BW(e,n.syncPointTree_,null,qy(n.pendingWriteTree_,Ct()))}function BW(n,e,t,r){if(ct(n.path))return jW(n,e,t,r);{const i=e.get(Ct());null==t&&null!=i&&(t=ea(i,Ct()));let s=[];const o=ut(n.path),a=n.operationForChild(o),u=e.children.get(o);if(u&&a){const c=t?t.getImmediateChild(o):null,d=CW(r,o);s=s.concat(BW(a,u,c,d))}return i&&(s=s.concat(v1(i,n,r,t))),s}}function jW(n,e,t,r){const i=e.get(Ct());null==t&&null!=i&&(t=ea(i,Ct()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=t?t.getImmediateChild(o):null,c=CW(r,o),d=n.operationForChild(o);d&&(s=s.concat(jW(d,a,u,c)))}),i&&(s=s.concat(v1(i,n,r,t))),s}function b1(n,e){return n.tagToQueryMap.get(e)}function C1(n){const e=n.indexOf("$");return Ce(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Tt(n.substr(0,e))}}function I1(n,e,t){const r=n.syncPointTree_.get(e);return Ce(r,"Missing sync point for query tag that we're tracking"),v1(r,t,qy(n.pendingWriteTree_,e),null)}class T1{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new T1(t)}node(){return this.node_}}class D1{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=qt(this.path_,e);return new D1(this.syncTree_,t)}node(){return tv(this.syncTree_,this.path_)}}const HW=function(n,e,t){return n&&"object"==typeof n?(Ce(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ime(n[".sv"],e,t):"object"==typeof n[".sv"]?Tme(n[".sv"],e):void Ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ime=function(n,e,t){if("timestamp"===n)return t.timestamp;Ce(!1,"Unexpected server value: "+n)},Tme=function(n,e,t){n.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&Ce(!1,"Unexpected increment value: "+r);const i=e.node();if(Ce(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},S1=function(n,e,t){return x1(n,new T1(e),t)};function x1(n,e,t){const r=n.getPriority().val(),i=HW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=HW(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Cl(a,Xt(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Cl(i))),o.forEachChild(Bt,(a,u)=>{const c=x1(u,e.getImmediateChild(a),t);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class A1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function rv(n,e){let t=e instanceof Tt?e:new Tt(e),r=n,i=ut(t);for(;null!==i;){const s=Dc(r.node.children,i)||{children:{},childCount:0};r=new A1(i,r,s),t=Ot(t),i=ut(t)}return r}function vu(n){return n.node.value}function M1(n,e){n.node.value=e,R1(n)}function WW(n){return n.node.childCount>0}function iv(n,e){zn(n.node.children,(t,r)=>{e(new A1(t,n,r))})}function zW(n,e,t,r){t&&!r&&e(n),iv(n,i=>{zW(i,e,!0,r)}),t&&r&&e(n)}function tp(n){return new Tt(null===n.parent?n.name:tp(n.parent)+"/"+n.name)}function R1(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===vu(n)&&!WW(n)}(t),i=Gs(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,R1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,R1(n))}(n.parent,n.name,n)}const Ame=/[\[\].#$\/\u0000-\u001F\u007F]/,Mme=/[\[\].#$\u0000-\u001F\u007F]/,k1=10485760,sv=function(n){return"string"==typeof n&&0!==n.length&&!Ame.test(n)},rp=function(n,e,t){const r=t instanceof Tt?new zpe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+pu(r));if("function"==typeof e)throw new Error(n+"contains a function "+pu(r)+" with contents = "+e.toString());if(ky(e))throw new Error(n+"contains "+e.toString()+" "+pu(r));if("string"==typeof e&&e.length>k1/3&&Im(e)>k1)throw new Error(n+"contains a string greater than "+k1+" utf8 bytes "+pu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(zn(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!sv(o)))throw new Error(n+" contains an invalid key ("+o+") "+pu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Im(e),ZG(n)})(r,o),rp(n,a,r),function(n){const e=n.parts_.pop();n.byteLength_-=Im(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+pu(r)+" in addition to actual children.")}},QW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!sv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!Mme.test(n)}(n)}(t))throw new Error(function(n,e){return`${n} failed: ${e} argument `}(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ome{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function li(n,e,t){(function(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!qA(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Pme(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Di(r,e)||Di(e,r))}function Pme(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();hu&&Wn("event: "+t.toString()),El(r)}}}class Lme{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ome,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hy(),this.transactionQueueTree_=new A1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZW(n){const t=n.infoData_.getNode(new Tt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sp(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ZW(n)})}function ez(n,e,t,r,i){n.dataUpdateCount++;const s=new Tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const u=Em(t,c=>Xt(c));o=function(n,e,t,r){const i=b1(n,r);if(i){const s=C1(i),o=s.path,a=s.queryId,u=Or(o,e),c=jt.fromObject(t);return I1(n,o,new xl(c1(a),u,c))}return[]}(n.serverSyncTree_,s,u,i)}else{const u=Xt(t);o=function(n,e,t,r){const i=b1(n,r);if(null!=i){const s=C1(i),o=s.path,a=s.queryId,u=Or(o,e);return I1(n,o,new mu(c1(a),u,t))}return[]}(n.serverSyncTree_,s,u,i)}else if(r){const u=Em(t,c=>Xt(c));o=function(n,e,t){const r=jt.fromObject(t);return Ml(n,new xl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,u)}else{const u=Xt(t);o=Xf(n.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=kl(n,s)),li(n.eventQueue_,a,o)}function tz(n,e){P1(n,"connected",e),!1===e&&function(n){Rl(n,"onDisconnectEvents");const e=sp(n),t=Hy();o1(n.onDisconnect_,Ct(),(i,s)=>{const o=function(n,e,t,r){return x1(e,new D1(t,n),r)}(i,s,n.serverSyncTree_,e);Sl(t,i,o)});let r=[];o1(t,Ct(),(i,s)=>{r=r.concat(Xf(n.serverSyncTree_,i,s));const o=function(n,e){const t=tp(iz(n,e)),r=rv(n.transactionQueueTree_,e);return function(n,e,t){let r=void 0?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{B1(n,i)}),B1(n,r),zW(r,i=>{B1(n,i)}),t}(n,i);kl(n,o)}),n.onDisconnect_=Hy(),li(n.eventQueue_,Ct(),r)}(n)}function P1(n,e,t){const r=new Tt("/.info/"+e),i=Xt(t);n.infoData_.updateSnapshot(r,i);const s=Xf(n.infoSyncTree_,r,i);li(n.eventQueue_,r,s)}function av(n){return n.nextWriteId_++}function Rl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wn(t,...e)}function V1(n,e,t){return tv(n.serverSyncTree_,e,t)||it.EMPTY_NODE}function uv(n,e=n.transactionQueueTree_){if(e||cv(n,e),vu(e)){const t=sz(n,e);Ce(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(c=>c.currentWriteId),i=V1(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const d=t[c];Ce(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Or(e,d.path);s=s.updateChild(h,d.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;n.server_.put(u.toString(),a,c=>{Rl(n,"transaction put response",{path:u.toString(),status:c});let d=[];if("ok"===c){const h=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(na(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&h.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();cv(n,rv(n.transactionQueueTree_,e)),uv(n,n.transactionQueueTree_),li(n.eventQueue_,e,d);for(let m=0;m<h.length;m++)El(h[m])}else{if("datastale"===c)for(let h=0;h<t.length;h++)t[h].status=3===t[h].status?4:0;else{vr("transaction at "+u.toString()+" failed: "+c);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=c}kl(n,e)}},o)}(n,tp(e),t)}else WW(e)&&iv(e,t=>{uv(n,t)})}function kl(n,e){const t=iz(n,e),r=tp(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=Or(t,u.path);let h,d=!1;if(Ce(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)d=!0,h=u.abortReason,i=i.concat(na(n.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)d=!0,h="maxretry",i=i.concat(na(n.serverSyncTree_,u.currentWriteId,!0));else{const m=V1(n,u.path,o);u.currentInputSnapshot=m;const y=e[a].update(m.val());if(void 0!==y){rp("transaction failed: Data returned ",y,u.path);let T=Xt(y);"object"==typeof y&&null!=y&&Gs(y,".priority")||(T=T.updatePriority(m.getPriority()));const U=u.currentWriteId,K=sp(n),$=S1(T,m,K);u.currentOutputSnapshotRaw=T,u.currentOutputSnapshotResolved=$,u.currentWriteId=av(n),o.splice(o.indexOf(U),1),i=i.concat(w1(n.serverSyncTree_,u.path,$,u.currentWriteId,u.applyLocally)),i=i.concat(na(n.serverSyncTree_,U,!0))}else d=!0,h="nodata",i=i.concat(na(n.serverSyncTree_,u.currentWriteId,!0))}li(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===h?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(h),!1,null)))}cv(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)El(r[a]);uv(n,n.transactionQueueTree_)}(n,sz(n,t),r),r}function iz(n,e){let t,r=n.transactionQueueTree_;for(t=ut(e);null!==t&&void 0===vu(r);)r=rv(r,t),t=ut(e=Ot(e));return r}function sz(n,e){const t=[];return oz(n,e,t),t.sort((r,i)=>r.order-i.order),t}function oz(n,e,t){const r=vu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);iv(e,i=>{oz(n,i,t)})}function cv(n,e){const t=vu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,M1(e,t.length>0?t:void 0)}iv(e,r=>{cv(n,r)})}function B1(n,e){const t=vu(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(Ce(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(Ce(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(na(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?M1(e,void 0):t.length=s+1,li(n.eventQueue_,tp(e),i);for(let o=0;o<r.length;o++)El(r[o])}}const j1=function(n,e){const t=Zme(n),r=t.namespace;return"firebase.com"===t.domain&&Es(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new BA(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Tt(t.pathString)}},Zme=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");-1===d&&(d=n.length);let h=n.indexOf("?");-1===h&&(h=n.length),e=n.substring(0,Math.min(d,h)),d<h&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(d,h)));const m=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const y=e.slice(0,c);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const T=e.indexOf(".");r=e.substring(0,T).toLowerCase(),t=e.substring(T+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class di{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ct(this._path)?null:zA(this._path)}get ref(){return new Yi(this._repo,this._path)}get _queryIdentifier(){const e=pW(this._queryParams),t=LA(e);return"{}"===t?"default":t}get _queryObject(){return pW(this._queryParams)}isEqual(e){if(!((e=Jn(e))instanceof di))return!1;const t=this._repo===e._repo,r=qA(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Yi extends di{constructor(e,t){super(e,t,new n1,!1)}get parent(){const e=XG(this._path);return null===e?null:new Yi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function(n){Ce(!Jy,"__referenceConstructor has already been defined"),Jy=n})(Yi),function(n){Ce(!Zy,"__referenceConstructor has already been defined"),Zy=n}(Yi);const H1={};class y_e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=HA(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new $y(n.repoInfo_,(r,i,s,o)=>{ez(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>tz(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new gu(n.repoInfo_,e,(r,i,s,o)=>{ez(n,r,i,s,o)},r=>{tz(n,r)},r=>{!function(n,e){zn(e,(t,r)=>{P1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return $A[t]||($A[t]=e()),$A[t]}(n.repoInfo_,()=>new Cge(n.stats_,n.server_)),n.infoData_=new yge,n.infoSyncTree_=new VW({startListening:(r,i,s,o)=>{let a=[];const u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=Xf(n.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),P1(n,"connected",!1),n.serverSyncTree_=new VW({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);li(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yi(this._repo,Ct())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=H1[e];(!t||t[n.key]!==n)&&Es(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Es("Cannot call "+e+" on a deleted database.")}}function v_e(n=ih(),e){return So(n,"database").getImmediate({identifier:e})}gu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},gu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},OA="9.9.3",Xn(new Fn("database",(e,{instanceIdentifier:t})=>function(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=j1(s,i),a=o.repoInfo;"undefined"!=typeof process&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=j1(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const d=i&&u?new Bf(Bf.OWNER):new vpe(n.name,n.options,e);QW("Invalid Firebase Database URL",o),ct(o.path)||Es("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(n,e,t,r){let i=H1[e.name];i||(i={},H1[e.name]=i);let s=i[n.toURLString()];return s&&Es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Lme(n,!1,t,r),i[n.toURLString()]=s,s}(a,n,d,new ype(n.name,t));return new y_e(h,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Mt(pG,"0.13.5",void 0),Mt(pG,"0.13.5","esm2017");class G1{constructor(e){return e}}const pz="database",W1=new Ke("angularfire2.database-instances");function T_e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new G1(r)}}const D_e={provide:class{constructor(){return uf(pz)}},deps:[[new St,W1]]},S_e={provide:G1,useFactory:function(n,e){const t=af(pz,n,e);return t&&new G1(t)},deps:[[new St,W1],Wo]};let x_e=(()=>{class n{constructor(){Mt("angularfire",dl.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[S_e,D_e]}),n})();function A_e(n,...e){return{ngModule:x_e,providers:[{provide:W1,useFactory:T_e(n),multi:!0,deps:[Lt,Kt,cf,lf,[new St,py],[new St,ff],...e]}]}}const M_e=ru(v_e,!0),q1="functions";class P_e{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return P(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return P(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return P(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return P(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const K1="us-central1";class L_e{constructor(e,t,r,i,s=K1,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new P_e(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(s);this.customDomain=a.origin,this.region=K1}catch(a){this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const yz="@firebase/functions";function q_e(n=ih(),e=K1){return So(Jn(n),q1).getImmediate({identifier:e})}!function(n,e){Xn(new Fn(q1,(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),o=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),u=r.getProvider("app-check-internal");return new L_e(s,o,a,u,i,n)},"PUBLIC").setMultipleInstances(!0)),Mt(yz,"0.8.4",void 0),Mt(yz,"0.8.4","esm2017")}(fetch.bind(self));class J1{constructor(e){return e}}const wz="functions",X1=new Ke("angularfire2.functions-instances");function Y_e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new J1(r)}}const J_e={provide:class{constructor(){return uf(wz)}},deps:[[new St,X1]]},X_e={provide:J1,useFactory:function(n,e){const t=af(wz,n,e);return t&&new J1(t)},deps:[[new St,X1],Wo]};let Z_e=(()=>{class n{constructor(){Mt("angularfire",dl.full,"fn")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=C({providers:[X_e,J_e]}),n})();function eye(n,...e){return{ngModule:Z_e,providers:[{provide:X1,useFactory:Y_e(n),multi:!0,deps:[Lt,Kt,cf,lf,[new St,py],[new St,ff],...e]}]}}const tye=ru(q_e,!0);let nye=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n,bootstrap:[qde]}),n.\u0275inj=C({providers:[{provide:fm,useFactory:()=>({enabled:true,registrationStrategy:"registerImmediately"})}],imports:[[WY,tX,$X,dG,IX.register("ngsw-worker.js"),ope,$ae(()=>Hae(Zd_firebase)),_de(()=>yde()),A_e(()=>M_e()),Ode(()=>Lde()),eye(()=>tye())]]}),n})();LP=!1,HY().bootstrapModule(nye).catch(n=>console.error(n))}},wr=>{wr(wr.s=308)}]);